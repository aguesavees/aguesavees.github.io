import{s as ku,r as Zt,g as wn,c as sn,a as ju,B as Qe,P as Yo}from"./index-b4c718fb.js";function Uu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ba={exports:{}},Ae=ba.exports={},nt,rt;function Wi(){throw new Error("setTimeout has not been defined")}function Fi(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?nt=setTimeout:nt=Wi}catch{nt=Wi}try{typeof clearTimeout=="function"?rt=clearTimeout:rt=Fi}catch{rt=Fi}})();function ya(e){if(nt===setTimeout)return setTimeout(e,0);if((nt===Wi||!nt)&&setTimeout)return nt=setTimeout,setTimeout(e,0);try{return nt(e,0)}catch{try{return nt.call(null,e,0)}catch{return nt.call(this,e,0)}}}function Wu(e){if(rt===clearTimeout)return clearTimeout(e);if((rt===Fi||!rt)&&clearTimeout)return rt=clearTimeout,clearTimeout(e);try{return rt(e)}catch{try{return rt.call(null,e)}catch{return rt.call(this,e)}}}var _t=[],an=!1,Ft,br=-1;function Fu(){!an||!Ft||(an=!1,Ft.length?_t=Ft.concat(_t):br=-1,_t.length&&_a())}function _a(){if(!an){var e=ya(Fu);an=!0;for(var t=_t.length;t;){for(Ft=_t,_t=[];++br<t;)Ft&&Ft[br].run();br=-1,t=_t.length}Ft=null,an=!1,Wu(e)}}Ae.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];_t.push(new ma(e,t)),_t.length===1&&!an&&ya(_a)};function ma(e,t){this.fun=e,this.array=t}ma.prototype.run=function(){this.fun.apply(null,this.array)};Ae.title="browser";Ae.browser=!0;Ae.env={};Ae.argv=[];Ae.version="";Ae.versions={};function vt(){}Ae.on=vt;Ae.addListener=vt;Ae.once=vt;Ae.off=vt;Ae.removeListener=vt;Ae.removeAllListeners=vt;Ae.emit=vt;Ae.prependListener=vt;Ae.prependOnceListener=vt;Ae.listeners=function(e){return[]};Ae.binding=function(e){throw new Error("process.binding is not supported")};Ae.cwd=function(){return"/"};Ae.chdir=function(e){throw new Error("process.chdir is not supported")};Ae.umask=function(){return 0};var qu=ba.exports;const Sr=Uu(qu);var co={exports:{}},ln=typeof Reflect=="object"?Reflect:null,Jo=ln&&typeof ln.apply=="function"?ln.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},yr;ln&&typeof ln.ownKeys=="function"?yr=ln.ownKeys:Object.getOwnPropertySymbols?yr=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:yr=function(t){return Object.getOwnPropertyNames(t)};function Hu(e){console&&console.warn&&console.warn(e)}var Ea=Number.isNaN||function(t){return t!==t};function fe(){fe.init.call(this)}co.exports=fe;co.exports.once=Ku;fe.EventEmitter=fe;fe.prototype._events=void 0;fe.prototype._eventsCount=0;fe.prototype._maxListeners=void 0;var Zo=10;function Nr(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(fe,"defaultMaxListeners",{enumerable:!0,get:function(){return Zo},set:function(e){if(typeof e!="number"||e<0||Ea(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Zo=e}});fe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};fe.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Ea(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Sa(e){return e._maxListeners===void 0?fe.defaultMaxListeners:e._maxListeners}fe.prototype.getMaxListeners=function(){return Sa(this)};fe.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var l=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw l.context=s,l}var c=o[t];if(c===void 0)return!1;if(typeof c=="function")Jo(c,this,n);else for(var u=c.length,S=Ta(c,u),r=0;r<u;++r)Jo(S[r],this,n);return!0};function va(e,t,n,r){var i,o,s;if(Nr(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),s===void 0)s=o[t]=n,++e._eventsCount;else if(typeof s=="function"?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=Sa(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,Hu(l)}return e}fe.prototype.addListener=function(t,n){return va(this,t,n,!1)};fe.prototype.on=fe.prototype.addListener;fe.prototype.prependListener=function(t,n){return va(this,t,n,!0)};function Gu(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Aa(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=Gu.bind(r);return i.listener=n,r.wrapFn=i,i}fe.prototype.once=function(t,n){return Nr(n),this.on(t,Aa(this,t,n)),this};fe.prototype.prependOnceListener=function(t,n){return Nr(n),this.prependListener(t,Aa(this,t,n)),this};fe.prototype.removeListener=function(t,n){var r,i,o,s,l;if(Nr(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){l=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():zu(r,o),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,l||n)}return this};fe.prototype.off=fe.prototype.removeListener;fe.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function Ra(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?Vu(i):Ta(i,i.length)}fe.prototype.listeners=function(t){return Ra(this,t,!0)};fe.prototype.rawListeners=function(t){return Ra(this,t,!1)};fe.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Ia.call(e,t)};fe.prototype.listenerCount=Ia;function Ia(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}fe.prototype.eventNames=function(){return this._eventsCount>0?yr(this._events):[]};function Ta(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function zu(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Vu(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Ku(e,t){return new Promise(function(n,r){function i(s){e.removeListener(t,o),r(s)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}Oa(e,t,o,{once:!0}),t!=="error"&&Yu(e,i,{once:!0})})}function Yu(e,t,n){typeof e.on=="function"&&Oa(e,"error",t,n)}function Oa(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Un=co.exports,xa={},ho=ku.Buffer,Xo=ho.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Ju(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function Zu(e){var t=Ju(e);if(typeof t!="string"&&(ho.isEncoding===Xo||!Xo(e)))throw new Error("Unknown encoding: "+e);return t||e}xa.StringDecoder=Wn;function Wn(e){this.encoding=Zu(e);var t;switch(this.encoding){case"utf16le":this.text=rf,this.end=of,t=4;break;case"utf8":this.fillLast=ef,t=4;break;case"base64":this.text=sf,this.end=af,t=3;break;default:this.write=lf,this.end=uf;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=ho.allocUnsafe(t)}Wn.prototype.write=function(e){if(e.length===0)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""};Wn.prototype.end=nf;Wn.prototype.text=tf;Wn.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function di(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function Xu(e,t,n){var r=t.length-1;if(r<n)return 0;var i=di(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||i===-2?0:(i=di(t[r]),i>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||i===-2?0:(i=di(t[r]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function Qu(e,t,n){if((t[0]&192)!==128)return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"�"}}function ef(e){var t=this.lastTotal-this.lastNeed,n=Qu(this,e);if(n!==void 0)return n;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function tf(e,t){var n=Xu(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function nf(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function rf(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function of(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function sf(e,t){var n=(e.length-t)%3;return n===0?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function af(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function lf(e){return e.toString(this.encoding)}function uf(e){return e&&e.length?this.write(e):""}function Bn(e){"@babel/helpers - typeof";return Bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bn(e)}function ff(e,t){if(Bn(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cf(e){var t=ff(e,"string");return Bn(t)=="symbol"?t:t+""}function ee(e,t,n){return(t=cf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qo(Object(n),!0).forEach(function(r){ee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qo(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Na={exports:{}},hi={exports:{}};let df=class extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let n="";for(let r=0;r<t.length;r++)n+=`    ${t[r].stack}
`;super(n),this.name="AggregateError",this.errors=t}};var _e={AggregateError:df,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Boolean,Uint8Array},Ca={exports:{}},La={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const i=t.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}};const{format:hf,inspect:vr}=La,{AggregateError:gf}=_e,pf=globalThis.AggregateError||gf,wf=Symbol("kIsNodeError"),bf=["string","function","number","object","Function","Object","boolean","bigint","symbol"],yf=/^([A-Z][a-z0-9]*)+$/,_f="__node_internal_",Cr={};function Gt(e,t){if(!e)throw new Cr.ERR_INTERNAL_ASSERTION(t)}function es(e){let t="",n=e.length;const r=e[0]==="-"?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function mf(e,t,n){if(typeof t=="function")return Gt(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);const r=(t.match(/%[dfijoOs]/g)||[]).length;return Gt(r===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?t:hf(t,...n)}function Ce(e,t,n){n||(n=Error);class r extends n{constructor(...o){super(mf(e,t,o))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=e,r.prototype[wf]=!0,Cr[e]=r}function ts(e){const t=_f+e.name;return Object.defineProperty(e,"name",{value:t}),e}function Ef(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new pf([t,e],t.message);return n.code=t.code,n}return e||t}let Sf=class extends Error{constructor(t="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new Cr.ERR_INVALID_ARG_TYPE("options","Object",n);super(t,n),this.code="ABORT_ERR",this.name="AbortError"}};Ce("ERR_ASSERTION","%s",Error);Ce("ERR_INVALID_ARG_TYPE",(e,t,n)=>{Gt(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let r="The ";e.endsWith(" argument")?r+=`${e} `:r+=`"${e}" ${e.includes(".")?"property":"argument"} `,r+="must be ";const i=[],o=[],s=[];for(const c of t)Gt(typeof c=="string","All expected entries have to be of type string"),bf.includes(c)?i.push(c.toLowerCase()):yf.test(c)?o.push(c):(Gt(c!=="object",'The value "object" should be written as "Object"'),s.push(c));if(o.length>0){const c=i.indexOf("object");c!==-1&&(i.splice(i,c,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{const c=i.pop();r+=`one of type ${i.join(", ")}, or ${c}`}}(o.length>0||s.length>0)&&(r+=" or ")}if(o.length>0){switch(o.length){case 1:r+=`an instance of ${o[0]}`;break;case 2:r+=`an instance of ${o[0]} or ${o[1]}`;break;default:{const c=o.pop();r+=`an instance of ${o.join(", ")}, or ${c}`}}s.length>0&&(r+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(r+="an "),r+=`${s[0]}`;break;case 2:r+=`one of ${s[0]} or ${s[1]}`;break;default:{const c=s.pop();r+=`one of ${s.join(", ")}, or ${c}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var l;if((l=n.constructor)!==null&&l!==void 0&&l.name)r+=`. Received an instance of ${n.constructor.name}`;else{const c=vr(n,{depth:-1});r+=`. Received ${c}`}}else{let c=vr(n,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),r+=`. Received type ${typeof n} (${c})`}return r},TypeError);Ce("ERR_INVALID_ARG_VALUE",(e,t,n="is invalid")=>{let r=vr(t);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${n}. Received ${r}`},TypeError);Ce("ERR_INVALID_RETURN_VALUE",(e,t,n)=>{var r;const i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${e} to be returned from the "${t}" function but got ${i}.`},TypeError);Ce("ERR_MISSING_ARGS",(...e)=>{Gt(e.length>0,"At least one arg needs to be specified");let t;const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map(r=>`"${r}"`).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}break}return`${t} must be specified`},TypeError);Ce("ERR_OUT_OF_RANGE",(e,t,n)=>{Gt(t,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=es(String(n));else if(typeof n=="bigint"){r=String(n);const i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=es(r)),r+="n"}else r=vr(n);return`The value of "${e}" is out of range. It must be ${t}. Received ${r}`},RangeError);Ce("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Ce("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Ce("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Ce("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Ce("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Ce("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ce("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Ce("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Ce("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Ce("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Ce("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Me={AbortError:Sf,aggregateTwoErrors:ts(Ef),hideStackFrames:ts,codes:Cr},On={exports:{}},ns;function Dn(){if(ns)return On.exports;ns=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return On.exports=e,On.exports.AbortSignal=t,On.exports.default=e,On.exports}(function(e){const t=Zt,{format:n,inspect:r}=La,{codes:{ERR_INVALID_ARG_TYPE:i}}=Me,{kResistStopPropagation:o,AggregateError:s,SymbolDispose:l}=_e,c=globalThis.AbortSignal||Dn().AbortSignal,u=globalThis.AbortController||Dn().AbortController,S=Object.getPrototypeOf(async function(){}).constructor,v=globalThis.Blob||t.Blob,P=typeof v<"u"?function(T){return T instanceof v}:function(T){return!1},B=(_,T)=>{if(_!==void 0&&(_===null||typeof _!="object"||!("aborted"in _)))throw new i(T,"AbortSignal",_)},k=(_,T)=>{if(typeof _!="function")throw new i(T,"Function",_)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(_){let T=!1;return function(...O){T||(T=!0,_.apply(this,O))}},createDeferredPromise:function(){let _,T;return{promise:new Promise((I,M)=>{_=I,T=M}),resolve:_,reject:T}},promisify(_){return new Promise((T,O)=>{_((I,...M)=>I?O(I):T(...M))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(_){return _ instanceof S},isArrayBufferView(_){return ArrayBuffer.isView(_)}},isBlob:P,deprecate(_,T){return _},addAbortListener:Un.addAbortListener||function(T,O){if(T===void 0)throw new i("signal","AbortSignal",T);B(T,"signal"),k(O,"listener");let I;return T.aborted?queueMicrotask(()=>O()):(T.addEventListener("abort",O,{__proto__:null,once:!0,[o]:!0}),I=()=>{T.removeEventListener("abort",O)}),{__proto__:null,[l](){var M;(M=I)===null||M===void 0||M()}}},AbortSignalAny:c.any||function(T){if(T.length===1)return T[0];const O=new u,I=()=>O.abort();return T.forEach(M=>{B(M,"signals"),M.addEventListener("abort",I,{once:!0})}),O.signal.addEventListener("abort",()=>{T.forEach(M=>M.removeEventListener("abort",I))},{once:!0}),O.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(Ca);var ke=Ca.exports,go={};const{ArrayIsArray:po,ArrayPrototypeIncludes:Pa,ArrayPrototypeJoin:Ma,ArrayPrototypeMap:vf,NumberIsInteger:wo,NumberIsNaN:Af,NumberMAX_SAFE_INTEGER:Rf,NumberMIN_SAFE_INTEGER:If,NumberParseInt:Tf,ObjectPrototypeHasOwnProperty:Of,RegExpPrototypeExec:Ba,String:xf,StringPrototypeToUpperCase:Nf,StringPrototypeTrim:Cf}=_e,{hideStackFrames:Ye,codes:{ERR_SOCKET_BAD_PORT:Lf,ERR_INVALID_ARG_TYPE:Pe,ERR_INVALID_ARG_VALUE:bn,ERR_OUT_OF_RANGE:Vt,ERR_UNKNOWN_SIGNAL:rs}}=Me,{normalizeEncoding:Pf}=ke,{isAsyncFunction:Mf,isArrayBufferView:Bf}=ke.types,is={};function Df(e){return e===(e|0)}function $f(e){return e===e>>>0}const kf=/^[0-7]+$/,jf="must be a 32-bit unsigned integer or an octal string";function Uf(e,t,n){if(typeof e>"u"&&(e=n),typeof e=="string"){if(Ba(kf,e)===null)throw new bn(t,e,jf);e=Tf(e,8)}return Da(e,t),e}const Wf=Ye((e,t,n=If,r=Rf)=>{if(typeof e!="number")throw new Pe(t,"number",e);if(!wo(e))throw new Vt(t,"an integer",e);if(e<n||e>r)throw new Vt(t,`>= ${n} && <= ${r}`,e)}),Ff=Ye((e,t,n=-2147483648,r=2147483647)=>{if(typeof e!="number")throw new Pe(t,"number",e);if(!wo(e))throw new Vt(t,"an integer",e);if(e<n||e>r)throw new Vt(t,`>= ${n} && <= ${r}`,e)}),Da=Ye((e,t,n=!1)=>{if(typeof e!="number")throw new Pe(t,"number",e);if(!wo(e))throw new Vt(t,"an integer",e);const r=n?1:0,i=4294967295;if(e<r||e>i)throw new Vt(t,`>= ${r} && <= ${i}`,e)});function bo(e,t){if(typeof e!="string")throw new Pe(t,"string",e)}function qf(e,t,n=void 0,r){if(typeof e!="number")throw new Pe(t,"number",e);if(n!=null&&e<n||r!=null&&e>r||(n!=null||r!=null)&&Af(e))throw new Vt(t,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,e)}const Hf=Ye((e,t,n)=>{if(!Pa(n,e)){const i="must be one of: "+Ma(vf(n,o=>typeof o=="string"?`'${o}'`:xf(o)),", ");throw new bn(t,e,i)}});function $a(e,t){if(typeof e!="boolean")throw new Pe(t,"boolean",e)}function gi(e,t,n){return e==null||!Of(e,t)?n:e[t]}const Gf=Ye((e,t,n=null)=>{const r=gi(n,"allowArray",!1),i=gi(n,"allowFunction",!1);if(!gi(n,"nullable",!1)&&e===null||!r&&po(e)||typeof e!="object"&&(!i||typeof e!="function"))throw new Pe(t,"Object",e)}),zf=Ye((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new Pe(t,"a dictionary",e)}),Lr=Ye((e,t,n=0)=>{if(!po(e))throw new Pe(t,"Array",e);if(e.length<n){const r=`must be longer than ${n}`;throw new bn(t,e,r)}});function Vf(e,t){Lr(e,t);for(let n=0;n<e.length;n++)bo(e[n],`${t}[${n}]`)}function Kf(e,t){Lr(e,t);for(let n=0;n<e.length;n++)$a(e[n],`${t}[${n}]`)}function Yf(e,t){Lr(e,t);for(let n=0;n<e.length;n++){const r=e[n],i=`${t}[${n}]`;if(r==null)throw new Pe(i,"AbortSignal",r);ka(r,i)}}function Jf(e,t="signal"){if(bo(e,t),is[e]===void 0)throw is[Nf(e)]!==void 0?new rs(e+" (signals must use all capital letters)"):new rs(e)}const Zf=Ye((e,t="buffer")=>{if(!Bf(e))throw new Pe(t,["Buffer","TypedArray","DataView"],e)});function Xf(e,t){const n=Pf(t),r=e.length;if(n==="hex"&&r%2!==0)throw new bn("encoding",t,`is invalid for data of length ${r}`)}function Qf(e,t="Port",n=!0){if(typeof e!="number"&&typeof e!="string"||typeof e=="string"&&Cf(e).length===0||+e!==+e>>>0||e>65535||e===0&&!n)throw new Lf(t,e,n);return e|0}const ka=Ye((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new Pe(t,"AbortSignal",e)}),ec=Ye((e,t)=>{if(typeof e!="function")throw new Pe(t,"Function",e)}),tc=Ye((e,t)=>{if(typeof e!="function"||Mf(e))throw new Pe(t,"Function",e)}),nc=Ye((e,t)=>{if(e!==void 0)throw new Pe(t,"undefined",e)});function rc(e,t,n){if(!Pa(n,e))throw new Pe(t,`('${Ma(n,"|")}')`,e)}const ic=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function os(e,t){if(typeof e>"u"||!Ba(ic,e))throw new bn(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function oc(e){if(typeof e=="string")return os(e,"hints"),e;if(po(e)){const t=e.length;let n="";if(t===0)return n;for(let r=0;r<t;r++){const i=e[r];os(i,"hints"),n+=i,r!==t-1&&(n+=", ")}return n}throw new bn("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var Fn={isInt32:Df,isUint32:$f,parseFileMode:Uf,validateArray:Lr,validateStringArray:Vf,validateBooleanArray:Kf,validateAbortSignalArray:Yf,validateBoolean:$a,validateBuffer:Zf,validateDictionary:zf,validateEncoding:Xf,validateFunction:ec,validateInt32:Ff,validateInteger:Wf,validateNumber:qf,validateObject:Gf,validateOneOf:Hf,validatePlainFunction:tc,validatePort:Qf,validateSignalName:Jf,validateString:bo,validateUint32:Da,validateUndefined:nc,validateUnion:rc,validateAbortSignal:ka,validateLinkHeaderValue:oc},yo={exports:{}},Lt={};(function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(H){return H&&H.__esModule&&Object.prototype.hasOwnProperty.call(H,"default")?H.default:H}var n={exports:{}},r=n.exports={},i,o;function s(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=s}catch{i=s}try{typeof clearTimeout=="function"?o=clearTimeout:o=l}catch{o=l}})();function c(H){if(i===setTimeout)return setTimeout(H,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(H,0);try{return i(H,0)}catch{try{return i.call(null,H,0)}catch{return i.call(this,H,0)}}}function u(H){if(o===clearTimeout)return clearTimeout(H);if((o===l||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(H);try{return o(H)}catch{try{return o.call(null,H)}catch{return o.call(this,H)}}}var S=[],v=!1,P,B=-1;function k(){!v||!P||(v=!1,P.length?S=P.concat(S):B=-1,S.length&&_())}function _(){if(!v){var H=c(k);v=!0;for(var W=S.length;W;){for(P=S,S=[];++B<W;)P&&P[B].run();B=-1,W=S.length}P=null,v=!1,u(H)}}r.nextTick=function(H){var W=new Array(arguments.length-1);if(arguments.length>1)for(var G=1;G<arguments.length;G++)W[G-1]=arguments[G];S.push(new T(H,W)),S.length===1&&!v&&c(_)};function T(H,W){this.fun=H,this.array=W}T.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function O(){}r.on=O,r.addListener=O,r.once=O,r.off=O,r.removeListener=O,r.removeAllListeners=O,r.emit=O,r.prependListener=O,r.prependOnceListener=O,r.listeners=function(H){return[]},r.binding=function(H){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(H){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var I=n.exports;const M=t(I);e.default=M,e.process=M})(Lt);const{SymbolAsyncIterator:ss,SymbolIterator:as,SymbolFor:Xt}=_e,ja=Xt("nodejs.stream.destroyed"),Ua=Xt("nodejs.stream.errored"),qi=Xt("nodejs.stream.readable"),Hi=Xt("nodejs.stream.writable"),Wa=Xt("nodejs.stream.disturbed"),sc=Xt("nodejs.webstream.isClosedPromise"),ac=Xt("nodejs.webstream.controllerErrorFunction");function Pr(e,t=!1){var n;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((n=e._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!e._writableState||e._readableState))}function Mr(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function lc(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function at(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function Fa(e){return!!(e&&!at(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function qa(e){return!!(e&&!at(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function Ha(e){return!!(e&&!at(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function uc(e){return Fa(e)||qa(e)||Ha(e)}function fc(e,t){return e==null?!1:t===!0?typeof e[ss]=="function":t===!1?typeof e[as]=="function":typeof e[ss]=="function"||typeof e[as]=="function"}function Br(e){if(!at(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[ja]||r!=null&&r.destroyed)}function Ga(e){if(!Mr(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function cc(e,t){if(!Mr(e))return null;if(e.writableFinished===!0)return!0;const n=e._writableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.finished)!="boolean"?null:!!(n.finished||t===!1&&n.ended===!0&&n.length===0)}function dc(e){if(!Pr(e))return null;if(e.readableEnded===!0)return!0;const t=e._readableState;return!t||t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function za(e,t){if(!Pr(e))return null;const n=e._readableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.endEmitted)!="boolean"?null:!!(n.endEmitted||t===!1&&n.ended===!0&&n.length===0)}function Va(e){return e&&e[qi]!=null?e[qi]:typeof(e==null?void 0:e.readable)!="boolean"?null:Br(e)?!1:Pr(e)&&e.readable&&!za(e)}function Ka(e){return e&&e[Hi]!=null?e[Hi]:typeof(e==null?void 0:e.writable)!="boolean"?null:Br(e)?!1:Mr(e)&&e.writable&&!Ga(e)}function hc(e,t){return at(e)?Br(e)?!0:!((t==null?void 0:t.readable)!==!1&&Va(e)||(t==null?void 0:t.writable)!==!1&&Ka(e)):null}function gc(e){var t,n;return at(e)?e.writableErrored?e.writableErrored:(t=(n=e._writableState)===null||n===void 0?void 0:n.errored)!==null&&t!==void 0?t:null:null}function pc(e){var t,n;return at(e)?e.readableErrored?e.readableErrored:(t=(n=e._readableState)===null||n===void 0?void 0:n.errored)!==null&&t!==void 0?t:null:null}function wc(e){if(!at(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,n=e._readableState;return typeof(t==null?void 0:t.closed)=="boolean"||typeof(n==null?void 0:n.closed)=="boolean"?(t==null?void 0:t.closed)||(n==null?void 0:n.closed):typeof e._closed=="boolean"&&Ya(e)?e._closed:null}function Ya(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function Ja(e){return typeof e._sent100=="boolean"&&Ya(e)}function bc(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function yc(e){if(!at(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&Ja(e)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function _c(e){var t;return!!(e&&((t=e[Wa])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function mc(e){var t,n,r,i,o,s,l,c,u,S;return!!(e&&((t=(n=(r=(i=(o=(s=e[Ua])!==null&&s!==void 0?s:e.readableErrored)!==null&&o!==void 0?o:e.writableErrored)!==null&&i!==void 0?i:(l=e._readableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(c=e._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&n!==void 0?n:(u=e._readableState)===null||u===void 0?void 0:u.errored)!==null&&t!==void 0?t:!((S=e._writableState)===null||S===void 0)&&S.errored))}var At={isDestroyed:Br,kIsDestroyed:ja,isDisturbed:_c,kIsDisturbed:Wa,isErrored:mc,kIsErrored:Ua,isReadable:Va,kIsReadable:qi,kIsClosedPromise:sc,kControllerErrorFunction:ac,kIsWritable:Hi,isClosed:wc,isDuplexNodeStream:lc,isFinished:hc,isIterable:fc,isReadableNodeStream:Pr,isReadableStream:Fa,isReadableEnded:dc,isReadableFinished:za,isReadableErrored:pc,isNodeStream:at,isWebStream:uc,isWritable:Ka,isWritableNodeStream:Mr,isWritableStream:qa,isWritableEnded:Ga,isWritableFinished:cc,isWritableErrored:gc,isServerRequest:bc,isServerResponse:Ja,willEmitClose:yc,isTransformStream:Ha};const Ot=Lt,{AbortError:Za,codes:Ec}=Me,{ERR_INVALID_ARG_TYPE:Sc,ERR_STREAM_PREMATURE_CLOSE:ls}=Ec,{kEmptyObject:Gi,once:zi}=ke,{validateAbortSignal:vc,validateFunction:Ac,validateObject:Rc,validateBoolean:Ic}=Fn,{Promise:Tc,PromisePrototypeThen:Oc,SymbolDispose:Xa}=_e,{isClosed:xc,isReadable:us,isReadableNodeStream:pi,isReadableStream:Nc,isReadableFinished:fs,isReadableErrored:cs,isWritable:ds,isWritableNodeStream:hs,isWritableStream:Cc,isWritableFinished:gs,isWritableErrored:ps,isNodeStream:Lc,willEmitClose:Pc,kIsClosedPromise:Mc}=At;let un;function Bc(e){return e.setHeader&&typeof e.abort=="function"}const Vi=()=>{};function Qa(e,t,n){var r,i;if(arguments.length===2?(n=t,t=Gi):t==null?t=Gi:Rc(t,"options"),Ac(n,"callback"),vc(t.signal,"options.signal"),n=zi(n),Nc(e)||Cc(e))return Dc(e,t,n);if(!Lc(e))throw new Sc("stream",["ReadableStream","WritableStream","Stream"],e);const o=(r=t.readable)!==null&&r!==void 0?r:pi(e),s=(i=t.writable)!==null&&i!==void 0?i:hs(e),l=e._writableState,c=e._readableState,u=()=>{e.writable||P()};let S=Pc(e)&&pi(e)===o&&hs(e)===s,v=gs(e,!1);const P=()=>{v=!0,e.destroyed&&(S=!1),!(S&&(!e.readable||o))&&(!o||B)&&n.call(e)};let B=fs(e,!1);const k=()=>{B=!0,e.destroyed&&(S=!1),!(S&&(!e.writable||s))&&(!s||v)&&n.call(e)},_=W=>{n.call(e,W)};let T=xc(e);const O=()=>{T=!0;const W=ps(e)||cs(e);if(W&&typeof W!="boolean")return n.call(e,W);if(o&&!B&&pi(e,!0)&&!fs(e,!1))return n.call(e,new ls);if(s&&!v&&!gs(e,!1))return n.call(e,new ls);n.call(e)},I=()=>{T=!0;const W=ps(e)||cs(e);if(W&&typeof W!="boolean")return n.call(e,W);n.call(e)},M=()=>{e.req.on("finish",P)};Bc(e)?(e.on("complete",P),S||e.on("abort",O),e.req?M():e.on("request",M)):s&&!l&&(e.on("end",u),e.on("close",u)),!S&&typeof e.aborted=="boolean"&&e.on("aborted",O),e.on("end",k),e.on("finish",P),t.error!==!1&&e.on("error",_),e.on("close",O),T?Ot.nextTick(O):l!=null&&l.errorEmitted||c!=null&&c.errorEmitted?S||Ot.nextTick(I):(!o&&(!S||us(e))&&(v||ds(e)===!1)||!s&&(!S||ds(e))&&(B||us(e)===!1)||c&&e.req&&e.aborted)&&Ot.nextTick(I);const H=()=>{n=Vi,e.removeListener("aborted",O),e.removeListener("complete",P),e.removeListener("abort",O),e.removeListener("request",M),e.req&&e.req.removeListener("finish",P),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",P),e.removeListener("end",k),e.removeListener("error",_),e.removeListener("close",O)};if(t.signal&&!T){const W=()=>{const G=n;H(),G.call(e,new Za(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)Ot.nextTick(W);else{un=un||ke.addAbortListener;const G=un(t.signal,W),K=n;n=zi((...a)=>{G[Xa](),K.apply(e,a)})}}return H}function Dc(e,t,n){let r=!1,i=Vi;if(t.signal)if(i=()=>{r=!0,n.call(e,new Za(void 0,{cause:t.signal.reason}))},t.signal.aborted)Ot.nextTick(i);else{un=un||ke.addAbortListener;const s=un(t.signal,i),l=n;n=zi((...c)=>{s[Xa](),l.apply(e,c)})}const o=(...s)=>{r||Ot.nextTick(()=>n.apply(e,s))};return Oc(e[Mc].promise,o,o),Vi}function $c(e,t){var n;let r=!1;return t===null&&(t=Gi),(n=t)!==null&&n!==void 0&&n.cleanup&&(Ic(t.cleanup,"cleanup"),r=t.cleanup),new Tc((i,o)=>{const s=Qa(e,t,l=>{r&&s(),l?o(l):i()})})}yo.exports=Qa;yo.exports.finished=$c;var Pt=yo.exports;const ot=Lt,{aggregateTwoErrors:kc,codes:{ERR_MULTIPLE_CALLBACK:jc},AbortError:Uc}=Me,{Symbol:el}=_e,{kIsDestroyed:Wc,isDestroyed:Fc,isFinished:qc,isServerRequest:Hc}=At,tl=el("kDestroy"),Ki=el("kConstruct");function nl(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function Gc(e,t){const n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof t=="function"&&t(),this):(nl(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?ws(this,e,t):this.once(tl,function(o){ws(this,kc(o,e),t)}),this)}function ws(e,t,n){let r=!1;function i(o){if(r)return;r=!0;const s=e._readableState,l=e._writableState;nl(o,l,s),l&&(l.closed=!0),s&&(s.closed=!0),typeof n=="function"&&n(o),o?ot.nextTick(zc,e,o):ot.nextTick(rl,e)}try{e._destroy(t||null,i)}catch(o){i(o)}}function zc(e,t){Yi(e,t),rl(e)}function rl(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(n!=null&&n.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function Yi(e,t){const n=e._readableState,r=e._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function Vc(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function Ji(e,t,n){const r=e._readableState,i=e._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),r&&!r.errored&&(r.errored=t),n?ot.nextTick(Yi,e,t):Yi(e,t))}function Kc(e,t){if(typeof e._construct!="function")return;const n=e._readableState,r=e._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),e.once(Ki,t),!(e.listenerCount(Ki)>1)&&ot.nextTick(Yc,e)}function Yc(e){let t=!1;function n(r){if(t){Ji(e,r??new jc);return}t=!0;const i=e._readableState,o=e._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?e.emit(tl,r):r?Ji(e,r,!0):ot.nextTick(Jc,e)}try{e._construct(r=>{ot.nextTick(n,r)})}catch(r){ot.nextTick(n,r)}}function Jc(e){e.emit(Ki)}function bs(e){return(e==null?void 0:e.setHeader)&&typeof e.abort=="function"}function il(e){e.emit("close")}function Zc(e,t){e.emit("error",t),ot.nextTick(il,e)}function Xc(e,t){!e||Fc(e)||(!t&&!qc(e)&&(t=new Uc),Hc(e)?(e.socket=null,e.destroy(t)):bs(e)?e.abort():bs(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?ot.nextTick(Zc,e,t):ot.nextTick(il,e),e.destroyed||(e[Wc]=!0))}var yn={construct:Kc,destroyer:Xc,destroy:Gc,undestroy:Vc,errorOrDestroy:Ji};const{ArrayIsArray:Qc,ObjectSetPrototypeOf:ol}=_e,{EventEmitter:Dr}=Un;function $r(e){Dr.call(this,e)}ol($r.prototype,Dr.prototype);ol($r,Dr);$r.prototype.pipe=function(e,t){const n=this;function r(S){e.writable&&e.write(S)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(n.on("end",s),n.on("close",l));let o=!1;function s(){o||(o=!0,e.end())}function l(){o||(o=!0,typeof e.destroy=="function"&&e.destroy())}function c(S){u(),Dr.listenerCount(this,"error")===0&&this.emit("error",S)}Zi(n,"error",c),Zi(e,"error",c);function u(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",s),n.removeListener("close",l),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e};function Zi(e,t,n){if(typeof e.prependListener=="function")return e.prependListener(t,n);!e._events||!e._events[t]?e.on(t,n):Qc(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]}var _o={Stream:$r,prependListener:Zi},sl={exports:{}};(function(e){const{SymbolDispose:t}=_e,{AbortError:n,codes:r}=Me,{isNodeStream:i,isWebStream:o,kControllerErrorFunction:s}=At,l=Pt,{ERR_INVALID_ARG_TYPE:c}=r;let u;const S=(v,P)=>{if(typeof v!="object"||!("aborted"in v))throw new c(P,"AbortSignal",v)};e.exports.addAbortSignal=function(P,B){if(S(P,"signal"),!i(B)&&!o(B))throw new c("stream",["ReadableStream","WritableStream","Stream"],B);return e.exports.addAbortSignalNoValidate(P,B)},e.exports.addAbortSignalNoValidate=function(v,P){if(typeof v!="object"||!("aborted"in v))return P;const B=i(P)?()=>{P.destroy(new n(void 0,{cause:v.reason}))}:()=>{P[s](new n(void 0,{cause:v.reason}))};if(v.aborted)B();else{u=u||ke.addAbortListener;const k=u(v,B);l(P,k[t])}return P}})(sl);var kr=sl.exports;const{StringPrototypeSlice:ys,SymbolIterator:ed,TypedArrayPrototypeSet:ar,Uint8Array:td}=_e,{Buffer:wi}=Zt,{inspect:nd}=ke;var rd=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(t){const n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;const t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=t+n.data;return r}concat(t){if(this.length===0)return wi.alloc(0);const n=wi.allocUnsafe(t>>>0);let r=this.head,i=0;for(;r;)ar(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(t,n){const r=this.head.data;if(t<r.length){const i=r.slice(0,t);return this.head.data=r.slice(t),i}return t===r.length?this.shift():n?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[ed](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let n="",r=this.head,i=0;do{const o=r.data;if(t>o.length)n+=o,t-=o.length;else{t===o.length?(n+=o,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=ys(o,0,t),this.head=r,r.data=ys(o,t));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(t){const n=wi.allocUnsafe(t),r=t;let i=this.head,o=0;do{const s=i.data;if(t>s.length)ar(n,s,r-t),t-=s.length;else{t===s.length?(ar(n,s,r-t),++o,i.next?this.head=i.next:this.head=this.tail=null):(ar(n,new td(s.buffer,s.byteOffset,t),r-t),this.head=i,i.data=s.slice(t));break}++o}while((i=i.next)!==null);return this.length-=o,n}[Symbol.for("nodejs.util.inspect.custom")](t,n){return nd(this,{...n,depth:0,customInspect:!1})}};const{MathFloor:id,NumberIsInteger:od}=_e,{validateInteger:sd}=Fn,{ERR_INVALID_ARG_VALUE:ad}=Me.codes;let al=16*1024,ll=16;function ld(e,t,n){return e.highWaterMark!=null?e.highWaterMark:t?e[n]:null}function ul(e){return e?ll:al}function ud(e,t){sd(t,"value",0),e?ll=t:al=t}function fd(e,t,n,r){const i=ld(t,r,n);if(i!=null){if(!od(i)||i<0){const o=r?`options.${n}`:"options.highWaterMark";throw new ad(o,i)}return id(i)}return ul(e.objectMode)}var jr={getHighWaterMark:fd,getDefaultHighWaterMark:ul,setDefaultHighWaterMark:ud};const _s=Lt,{PromisePrototypeThen:cd,SymbolAsyncIterator:ms,SymbolIterator:Es}=_e,{Buffer:dd}=Zt,{ERR_INVALID_ARG_TYPE:hd,ERR_STREAM_NULL_VALUES:gd}=Me.codes;function pd(e,t,n){let r;if(typeof t=="string"||t instanceof dd)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});let i;if(t&&t[ms])i=!0,r=t[ms]();else if(t&&t[Es])i=!1,r=t[Es]();else throw new hd("iterable",["Iterable"],t);const o=new e({objectMode:!0,highWaterMark:1,...n});let s=!1;o._read=function(){s||(s=!0,c())},o._destroy=function(u,S){cd(l(u),()=>_s.nextTick(S,u),v=>_s.nextTick(S,v||u))};async function l(u){const S=u!=null,v=typeof r.throw=="function";if(S&&v){const{value:P,done:B}=await r.throw(u);if(await P,B)return}if(typeof r.return=="function"){const{value:P}=await r.return();await P}}async function c(){for(;;){try{const{value:u,done:S}=i?await r.next():r.next();if(S)o.push(null);else{const v=u&&typeof u.then=="function"?await u:u;if(v===null)throw s=!1,new gd;if(o.push(v))continue;s=!1}}catch(u){o.destroy(u)}break}}return o}var fl=pd,bi,Ss;function Ur(){if(Ss)return bi;Ss=1;const e=Lt,{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:s,ObjectSetPrototypeOf:l,Promise:c,SafeSet:u,SymbolAsyncDispose:S,SymbolAsyncIterator:v,Symbol:P}=_e;bi=re,re.ReadableState=je;const{EventEmitter:B}=Un,{Stream:k,prependListener:_}=_o,{Buffer:T}=Zt,{addAbortSignal:O}=kr,I=Pt;let M=ke.debuglog("stream",h=>{M=h});const H=rd,W=yn,{getHighWaterMark:G,getDefaultHighWaterMark:K}=jr,{aggregateTwoErrors:a,codes:{ERR_INVALID_ARG_TYPE:d,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_OUT_OF_RANGE:E,ERR_STREAM_PUSH_AFTER_EOF:m,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:g},AbortError:C}=Me,{validateObject:f}=Fn,w=P("kPaused"),{StringDecoder:A}=xa,R=fl;l(re.prototype,k.prototype),l(re,k);const D=()=>{},{errorOrDestroy:F}=W,q=1,X=2,U=4,ne=8,te=16,ie=32,se=64,Se=128,Re=256,Ie=512,me=1024,Ee=2048,N=4096,L=8192,j=16384,J=32768,Q=65536,ce=1<<17,pe=1<<18;function ue(h){return{enumerable:!1,get(){return(this.state&h)!==0},set(y){y?this.state|=h:this.state&=~h}}}o(je.prototype,{objectMode:ue(q),ended:ue(X),endEmitted:ue(U),reading:ue(ne),constructed:ue(te),sync:ue(ie),needReadable:ue(se),emittedReadable:ue(Se),readableListening:ue(Re),resumeScheduled:ue(Ie),errorEmitted:ue(me),emitClose:ue(Ee),autoDestroy:ue(N),destroyed:ue(L),closed:ue(j),closeEmitted:ue(J),multiAwaitDrain:ue(Q),readingMore:ue(ce),dataEmitted:ue(pe)});function je(h,y,V){typeof V!="boolean"&&(V=y instanceof Et()),this.state=Ee|N|te|ie,h&&h.objectMode&&(this.state|=q),V&&h&&h.readableObjectMode&&(this.state|=q),this.highWaterMark=h?G(this,h,"readableHighWaterMark",V):K(!1),this.buffer=new H,this.length=0,this.pipes=[],this.flowing=null,this[w]=null,h&&h.emitClose===!1&&(this.state&=~Ee),h&&h.autoDestroy===!1&&(this.state&=~N),this.errored=null,this.defaultEncoding=h&&h.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,h&&h.encoding&&(this.decoder=new A(h.encoding),this.encoding=h.encoding)}function re(h){if(!(this instanceof re))return new re(h);const y=this instanceof Et();this._readableState=new je(h,this,y),h&&(typeof h.read=="function"&&(this._read=h.read),typeof h.destroy=="function"&&(this._destroy=h.destroy),typeof h.construct=="function"&&(this._construct=h.construct),h.signal&&!y&&O(h.signal,this)),k.call(this,h),W.construct(this,()=>{this._readableState.needReadable&&Bt(this,this._readableState)})}re.prototype.destroy=W.destroy,re.prototype._undestroy=W.undestroy,re.prototype._destroy=function(h,y){y(h)},re.prototype[B.captureRejectionSymbol]=function(h){this.destroy(h)},re.prototype[S]=function(){let h;return this.destroyed||(h=this.readableEnded?null:new C,this.destroy(h)),new c((y,V)=>I(this,z=>z&&z!==h?V(z):y(null)))},re.prototype.push=function(h,y){return Te(this,h,y,!1)},re.prototype.unshift=function(h,y){return Te(this,h,y,!0)};function Te(h,y,V,z){M("readableAddChunk",y);const Z=h._readableState;let Oe;if(Z.state&q||(typeof y=="string"?(V=V||Z.defaultEncoding,Z.encoding!==V&&(z&&Z.encoding?y=T.from(y,V).toString(Z.encoding):(y=T.from(y,V),V=""))):y instanceof T?V="":k._isUint8Array(y)?(y=k._uint8ArrayToBuffer(y),V=""):y!=null&&(Oe=new d("chunk",["string","Buffer","Uint8Array"],y))),Oe)F(h,Oe);else if(y===null)Z.state&=~ne,nn(h,Z);else if(Z.state&q||y&&y.length>0)if(z)if(Z.state&U)F(h,new g);else{if(Z.destroyed||Z.errored)return!1;tn(h,Z,y,!0)}else if(Z.ended)F(h,new m);else{if(Z.destroyed||Z.errored)return!1;Z.state&=~ne,Z.decoder&&!V?(y=Z.decoder.write(y),Z.objectMode||y.length!==0?tn(h,Z,y,!1):Bt(h,Z)):tn(h,Z,y,!1)}else z||(Z.state&=~ne,Bt(h,Z));return!Z.ended&&(Z.length<Z.highWaterMark||Z.length===0)}function tn(h,y,V,z){y.flowing&&y.length===0&&!y.sync&&h.listenerCount("data")>0?(y.state&Q?y.awaitDrainWriters.clear():y.awaitDrainWriters=null,y.dataEmitted=!0,h.emit("data",V)):(y.length+=y.objectMode?1:V.length,z?y.buffer.unshift(V):y.buffer.push(V),y.state&se&&Mt(h)),Bt(h,y)}re.prototype.isPaused=function(){const h=this._readableState;return h[w]===!0||h.flowing===!1},re.prototype.setEncoding=function(h){const y=new A(h);this._readableState.decoder=y,this._readableState.encoding=this._readableState.decoder.encoding;const V=this._readableState.buffer;let z="";for(const Z of V)z+=y.write(Z);return V.clear(),z!==""&&V.push(z),this._readableState.length=z.length,this};const Vn=1073741824;function Zr(h){if(h>Vn)throw new E("size","<= 1GiB",h);return h--,h|=h>>>1,h|=h>>>2,h|=h>>>4,h|=h>>>8,h|=h>>>16,h++,h}function Kn(h,y){return h<=0||y.length===0&&y.ended?0:y.state&q?1:r(h)?y.flowing&&y.length?y.buffer.first().length:y.length:h<=y.length?h:y.ended?y.length:0}re.prototype.read=function(h){M("read",h),h===void 0?h=NaN:n(h)||(h=i(h,10));const y=this._readableState,V=h;if(h>y.highWaterMark&&(y.highWaterMark=Zr(h)),h!==0&&(y.state&=~Se),h===0&&y.needReadable&&((y.highWaterMark!==0?y.length>=y.highWaterMark:y.length>0)||y.ended))return M("read: emitReadable",y.length,y.ended),y.length===0&&y.ended?ut(this):Mt(this),null;if(h=Kn(h,y),h===0&&y.ended)return y.length===0&&ut(this),null;let z=(y.state&se)!==0;if(M("need readable",z),(y.length===0||y.length-h<y.highWaterMark)&&(z=!0,M("length less than watermark",z)),y.ended||y.reading||y.destroyed||y.errored||!y.constructed)z=!1,M("reading, ended or constructing",z);else if(z){M("do read"),y.state|=ne|ie,y.length===0&&(y.state|=se);try{this._read(y.highWaterMark)}catch(Oe){F(this,Oe)}y.state&=~ie,y.reading||(h=Kn(V,y))}let Z;return h>0?Z=Sn(h,y):Z=null,Z===null?(y.needReadable=y.length<=y.highWaterMark,h=0):(y.length-=h,y.multiAwaitDrain?y.awaitDrainWriters.clear():y.awaitDrainWriters=null),y.length===0&&(y.ended||(y.needReadable=!0),V!==h&&y.ended&&ut(this)),Z!==null&&!y.errorEmitted&&!y.closeEmitted&&(y.dataEmitted=!0,this.emit("data",Z)),Z};function nn(h,y){if(M("onEofChunk"),!y.ended){if(y.decoder){const V=y.decoder.end();V&&V.length&&(y.buffer.push(V),y.length+=y.objectMode?1:V.length)}y.ended=!0,y.sync?Mt(h):(y.needReadable=!1,y.emittedReadable=!0,mn(h))}}function Mt(h){const y=h._readableState;M("emitReadable",y.needReadable,y.emittedReadable),y.needReadable=!1,y.emittedReadable||(M("emitReadable",y.flowing),y.emittedReadable=!0,e.nextTick(mn,h))}function mn(h){const y=h._readableState;M("emitReadable_",y.destroyed,y.length,y.ended),!y.destroyed&&!y.errored&&(y.length||y.ended)&&(h.emit("readable"),y.emittedReadable=!1),y.needReadable=!y.flowing&&!y.ended&&y.length<=y.highWaterMark,Xn(h)}function Bt(h,y){!y.readingMore&&y.constructed&&(y.readingMore=!0,e.nextTick(Yn,h,y))}function Yn(h,y){for(;!y.reading&&!y.ended&&(y.length<y.highWaterMark||y.flowing&&y.length===0);){const V=y.length;if(M("maybeReadMore read 0"),h.read(0),V===y.length)break}y.readingMore=!1}re.prototype._read=function(h){throw new b("_read()")},re.prototype.pipe=function(h,y){const V=this,z=this._readableState;z.pipes.length===1&&(z.multiAwaitDrain||(z.multiAwaitDrain=!0,z.awaitDrainWriters=new u(z.awaitDrainWriters?[z.awaitDrainWriters]:[]))),z.pipes.push(h),M("pipe count=%d opts=%j",z.pipes.length,y);const Oe=(!y||y.end!==!1)&&h!==e.stdout&&h!==e.stderr?er:Dt;z.endEmitted?e.nextTick(Oe):V.once("end",Oe),h.on("unpipe",Be);function Be(ht,Je){M("onunpipe"),ht===V&&Je&&Je.hasUnpiped===!1&&(Je.hasUnpiped=!0,ti())}function er(){M("onend"),h.end()}let ct,dt=!1;function ti(){M("cleanup"),h.removeListener("close",Rn),h.removeListener("finish",et),ct&&h.removeListener("drain",ct),h.removeListener("error",An),h.removeListener("unpipe",Be),V.removeListener("end",er),V.removeListener("end",Dt),V.removeListener("data",nr),dt=!0,ct&&z.awaitDrainWriters&&(!h._writableState||h._writableState.needDrain)&&ct()}function tr(){dt||(z.pipes.length===1&&z.pipes[0]===h?(M("false write response, pause",0),z.awaitDrainWriters=h,z.multiAwaitDrain=!1):z.pipes.length>1&&z.pipes.includes(h)&&(M("false write response, pause",z.awaitDrainWriters.size),z.awaitDrainWriters.add(h)),V.pause()),ct||(ct=Jn(V,h),h.on("drain",ct))}V.on("data",nr);function nr(ht){M("ondata");const Je=h.write(ht);M("dest.write",Je),Je===!1&&tr()}function An(ht){if(M("onerror",ht),Dt(),h.removeListener("error",An),h.listenerCount("error")===0){const Je=h._writableState||h._readableState;Je&&!Je.errorEmitted?F(h,ht):h.emit("error",ht)}}_(h,"error",An);function Rn(){h.removeListener("finish",et),Dt()}h.once("close",Rn);function et(){M("onfinish"),h.removeListener("close",Rn),Dt()}h.once("finish",et);function Dt(){M("unpipe"),V.unpipe(h)}return h.emit("pipe",V),h.writableNeedDrain===!0?tr():z.flowing||(M("pipe resume"),V.resume()),h};function Jn(h,y){return function(){const z=h._readableState;z.awaitDrainWriters===y?(M("pipeOnDrain",1),z.awaitDrainWriters=null):z.multiAwaitDrain&&(M("pipeOnDrain",z.awaitDrainWriters.size),z.awaitDrainWriters.delete(y)),(!z.awaitDrainWriters||z.awaitDrainWriters.size===0)&&h.listenerCount("data")&&h.resume()}}re.prototype.unpipe=function(h){const y=this._readableState,V={hasUnpiped:!1};if(y.pipes.length===0)return this;if(!h){const Z=y.pipes;y.pipes=[],this.pause();for(let Oe=0;Oe<Z.length;Oe++)Z[Oe].emit("unpipe",this,{hasUnpiped:!1});return this}const z=t(y.pipes,h);return z===-1?this:(y.pipes.splice(z,1),y.pipes.length===0&&this.pause(),h.emit("unpipe",this,V),this)},re.prototype.on=function(h,y){const V=k.prototype.on.call(this,h,y),z=this._readableState;return h==="data"?(z.readableListening=this.listenerCount("readable")>0,z.flowing!==!1&&this.resume()):h==="readable"&&!z.endEmitted&&!z.readableListening&&(z.readableListening=z.needReadable=!0,z.flowing=!1,z.emittedReadable=!1,M("on readable",z.length,z.reading),z.length?Mt(this):z.reading||e.nextTick(Xr,this)),V},re.prototype.addListener=re.prototype.on,re.prototype.removeListener=function(h,y){const V=k.prototype.removeListener.call(this,h,y);return h==="readable"&&e.nextTick(Zn,this),V},re.prototype.off=re.prototype.removeListener,re.prototype.removeAllListeners=function(h){const y=k.prototype.removeAllListeners.apply(this,arguments);return(h==="readable"||h===void 0)&&e.nextTick(Zn,this),y};function Zn(h){const y=h._readableState;y.readableListening=h.listenerCount("readable")>0,y.resumeScheduled&&y[w]===!1?y.flowing=!0:h.listenerCount("data")>0?h.resume():y.readableListening||(y.flowing=null)}function Xr(h){M("readable nexttick read 0"),h.read(0)}re.prototype.resume=function(){const h=this._readableState;return h.flowing||(M("resume"),h.flowing=!h.readableListening,lt(this,h)),h[w]=!1,this};function lt(h,y){y.resumeScheduled||(y.resumeScheduled=!0,e.nextTick(rn,h,y))}function rn(h,y){M("resume",y.reading),y.reading||h.read(0),y.resumeScheduled=!1,h.emit("resume"),Xn(h),y.flowing&&!y.reading&&h.read(0)}re.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[w]=!0,this};function Xn(h){const y=h._readableState;for(M("flow",y.flowing);y.flowing&&h.read()!==null;);}re.prototype.wrap=function(h){let y=!1;h.on("data",z=>{!this.push(z)&&h.pause&&(y=!0,h.pause())}),h.on("end",()=>{this.push(null)}),h.on("error",z=>{F(this,z)}),h.on("close",()=>{this.destroy()}),h.on("destroy",()=>{this.destroy()}),this._read=()=>{y&&h.resume&&(y=!1,h.resume())};const V=s(h);for(let z=1;z<V.length;z++){const Z=V[z];this[Z]===void 0&&typeof h[Z]=="function"&&(this[Z]=h[Z].bind(h))}return this},re.prototype[v]=function(){return En(this)},re.prototype.iterator=function(h){return h!==void 0&&f(h,"options"),En(this,h)};function En(h,y){typeof h.read!="function"&&(h=re.wrap(h,{objectMode:!0}));const V=Qr(h,y);return V.stream=h,V}async function*Qr(h,y){let V=D;function z(Be){this===h?(V(),V=D):V=Be}h.on("readable",z);let Z;const Oe=I(h,{writable:!1},Be=>{Z=Be?a(Z,Be):null,V(),V=D});try{for(;;){const Be=h.destroyed?null:h.read();if(Be!==null)yield Be;else{if(Z)throw Z;if(Z===null)return;await new c(z)}}}catch(Be){throw Z=a(Z,Be),Z}finally{(Z||(y==null?void 0:y.destroyOnReturn)!==!1)&&(Z===void 0||h._readableState.autoDestroy)?W.destroyer(h,null):(h.off("readable",z),Oe())}}o(re.prototype,{readable:{__proto__:null,get(){const h=this._readableState;return!!h&&h.readable!==!1&&!h.destroyed&&!h.errorEmitted&&!h.endEmitted},set(h){this._readableState&&(this._readableState.readable=!!h)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(h){this._readableState&&(this._readableState.flowing=h)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(h){this._readableState&&(this._readableState.destroyed=h)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(je.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[w]!==!1},set(h){this[w]=!!h}}}),re._fromList=Sn;function Sn(h,y){if(y.length===0)return null;let V;return y.objectMode?V=y.buffer.shift():!h||h>=y.length?(y.decoder?V=y.buffer.join(""):y.buffer.length===1?V=y.buffer.first():V=y.buffer.concat(y.length),y.buffer.clear()):V=y.buffer.consume(h,y.decoder),V}function ut(h){const y=h._readableState;M("endReadable",y.endEmitted),y.endEmitted||(y.ended=!0,e.nextTick(ei,y,h))}function ei(h,y){if(M("endReadableNT",h.endEmitted,h.length),!h.errored&&!h.closeEmitted&&!h.endEmitted&&h.length===0){if(h.endEmitted=!0,y.emit("end"),y.writable&&y.allowHalfOpen===!1)e.nextTick(ft,y);else if(h.autoDestroy){const V=y._writableState;(!V||V.autoDestroy&&(V.finished||V.writable===!1))&&y.destroy()}}}function ft(h){h.writable&&!h.writableEnded&&!h.destroyed&&h.end()}re.from=function(h,y){return R(re,h,y)};let vn;function Qn(){return vn===void 0&&(vn={}),vn}return re.fromWeb=function(h,y){return Qn().newStreamReadableFromReadableStream(h,y)},re.toWeb=function(h,y){return Qn().newReadableStreamFromStreamReadable(h,y)},re.wrap=function(h,y){var V,z;return new re({objectMode:(V=(z=h.readableObjectMode)!==null&&z!==void 0?z:h.objectMode)!==null&&V!==void 0?V:!0,...y,destroy(Z,Oe){W.destroyer(h,Z),Oe(Z)}}).wrap(h)},bi}var yi,vs;function mo(){if(vs)return yi;vs=1;const e=Lt,{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:l,Symbol:c,SymbolHasInstance:u}=_e;yi=f,f.WritableState=g;const{EventEmitter:S}=Un,v=_o.Stream,{Buffer:P}=Zt,B=yn,{addAbortSignal:k}=kr,{getHighWaterMark:_,getDefaultHighWaterMark:T}=jr,{ERR_INVALID_ARG_TYPE:O,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_MULTIPLE_CALLBACK:M,ERR_STREAM_CANNOT_PIPE:H,ERR_STREAM_DESTROYED:W,ERR_STREAM_ALREADY_FINISHED:G,ERR_STREAM_NULL_VALUES:K,ERR_STREAM_WRITE_AFTER_END:a,ERR_UNKNOWN_ENCODING:d}=Me.codes,{errorOrDestroy:b}=B;s(f.prototype,v.prototype),s(f,v);function E(){}const m=c("kOnFinished");function g(N,L,j){typeof j!="boolean"&&(j=L instanceof Et()),this.objectMode=!!(N&&N.objectMode),j&&(this.objectMode=this.objectMode||!!(N&&N.writableObjectMode)),this.highWaterMark=N?_(this,N,"writableHighWaterMark",j):T(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const J=!!(N&&N.decodeStrings===!1);this.decodeStrings=!J,this.defaultEncoding=N&&N.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=F.bind(void 0,L),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,C(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!N||N.emitClose!==!1,this.autoDestroy=!N||N.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[m]=[]}function C(N){N.buffered=[],N.bufferedIndex=0,N.allBuffers=!0,N.allNoop=!0}g.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(g.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function f(N){const L=this instanceof Et();if(!L&&!r(f,this))return new f(N);this._writableState=new g(N,this,L),N&&(typeof N.write=="function"&&(this._write=N.write),typeof N.writev=="function"&&(this._writev=N.writev),typeof N.destroy=="function"&&(this._destroy=N.destroy),typeof N.final=="function"&&(this._final=N.final),typeof N.construct=="function"&&(this._construct=N.construct),N.signal&&k(N.signal,this)),v.call(this,N),B.construct(this,()=>{const j=this._writableState;j.writing||ne(this,j),Se(this,j)})}i(f,u,{__proto__:null,value:function(N){return r(this,N)?!0:this!==f?!1:N&&N._writableState instanceof g}}),f.prototype.pipe=function(){b(this,new H)};function w(N,L,j,J){const Q=N._writableState;if(typeof j=="function")J=j,j=Q.defaultEncoding;else{if(!j)j=Q.defaultEncoding;else if(j!=="buffer"&&!P.isEncoding(j))throw new d(j);typeof J!="function"&&(J=E)}if(L===null)throw new K;if(!Q.objectMode)if(typeof L=="string")Q.decodeStrings!==!1&&(L=P.from(L,j),j="buffer");else if(L instanceof P)j="buffer";else if(v._isUint8Array(L))L=v._uint8ArrayToBuffer(L),j="buffer";else throw new O("chunk",["string","Buffer","Uint8Array"],L);let ce;return Q.ending?ce=new a:Q.destroyed&&(ce=new W("write")),ce?(e.nextTick(J,ce),b(N,ce,!0),ce):(Q.pendingcb++,A(N,Q,L,j,J))}f.prototype.write=function(N,L,j){return w(this,N,L,j)===!0},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){const N=this._writableState;N.corked&&(N.corked--,N.writing||ne(this,N))},f.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=l(L)),!P.isEncoding(L))throw new d(L);return this._writableState.defaultEncoding=L,this};function A(N,L,j,J,Q){const ce=L.objectMode?1:j.length;L.length+=ce;const pe=L.length<L.highWaterMark;return pe||(L.needDrain=!0),L.writing||L.corked||L.errored||!L.constructed?(L.buffered.push({chunk:j,encoding:J,callback:Q}),L.allBuffers&&J!=="buffer"&&(L.allBuffers=!1),L.allNoop&&Q!==E&&(L.allNoop=!1)):(L.writelen=ce,L.writecb=Q,L.writing=!0,L.sync=!0,N._write(j,J,L.onwrite),L.sync=!1),pe&&!L.errored&&!L.destroyed}function R(N,L,j,J,Q,ce,pe){L.writelen=J,L.writecb=pe,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new W("write")):j?N._writev(Q,L.onwrite):N._write(Q,ce,L.onwrite),L.sync=!1}function D(N,L,j,J){--L.pendingcb,J(j),U(L),b(N,j)}function F(N,L){const j=N._writableState,J=j.sync,Q=j.writecb;if(typeof Q!="function"){b(N,new M);return}j.writing=!1,j.writecb=null,j.length-=j.writelen,j.writelen=0,L?(L.stack,j.errored||(j.errored=L),N._readableState&&!N._readableState.errored&&(N._readableState.errored=L),J?e.nextTick(D,N,j,L,Q):D(N,j,L,Q)):(j.buffered.length>j.bufferedIndex&&ne(N,j),J?j.afterWriteTickInfo!==null&&j.afterWriteTickInfo.cb===Q?j.afterWriteTickInfo.count++:(j.afterWriteTickInfo={count:1,cb:Q,stream:N,state:j},e.nextTick(q,j.afterWriteTickInfo)):X(N,j,1,Q))}function q({stream:N,state:L,count:j,cb:J}){return L.afterWriteTickInfo=null,X(N,L,j,J)}function X(N,L,j,J){for(!L.ending&&!N.destroyed&&L.length===0&&L.needDrain&&(L.needDrain=!1,N.emit("drain"));j-- >0;)L.pendingcb--,J();L.destroyed&&U(L),Se(N,L)}function U(N){if(N.writing)return;for(let Q=N.bufferedIndex;Q<N.buffered.length;++Q){var L;const{chunk:ce,callback:pe}=N.buffered[Q],ue=N.objectMode?1:ce.length;N.length-=ue,pe((L=N.errored)!==null&&L!==void 0?L:new W("write"))}const j=N[m].splice(0);for(let Q=0;Q<j.length;Q++){var J;j[Q]((J=N.errored)!==null&&J!==void 0?J:new W("end"))}C(N)}function ne(N,L){if(L.corked||L.bufferProcessing||L.destroyed||!L.constructed)return;const{buffered:j,bufferedIndex:J,objectMode:Q}=L,ce=j.length-J;if(!ce)return;let pe=J;if(L.bufferProcessing=!0,ce>1&&N._writev){L.pendingcb-=ce-1;const ue=L.allNoop?E:re=>{for(let Te=pe;Te<j.length;++Te)j[Te].callback(re)},je=L.allNoop&&pe===0?j:t(j,pe);je.allBuffers=L.allBuffers,R(N,L,!0,L.length,je,"",ue),C(L)}else{do{const{chunk:ue,encoding:je,callback:re}=j[pe];j[pe++]=null;const Te=Q?1:ue.length;R(N,L,!1,Te,ue,je,re)}while(pe<j.length&&!L.writing);pe===j.length?C(L):pe>256?(j.splice(0,pe),L.bufferedIndex=0):L.bufferedIndex=pe}L.bufferProcessing=!1}f.prototype._write=function(N,L,j){if(this._writev)this._writev([{chunk:N,encoding:L}],j);else throw new I("_write()")},f.prototype._writev=null,f.prototype.end=function(N,L,j){const J=this._writableState;typeof N=="function"?(j=N,N=null,L=null):typeof L=="function"&&(j=L,L=null);let Q;if(N!=null){const ce=w(this,N,L);ce instanceof n&&(Q=ce)}return J.corked&&(J.corked=1,this.uncork()),Q||(!J.errored&&!J.ending?(J.ending=!0,Se(this,J,!0),J.ended=!0):J.finished?Q=new G("end"):J.destroyed&&(Q=new W("end"))),typeof j=="function"&&(Q||J.finished?e.nextTick(j,Q):J[m].push(j)),this};function te(N){return N.ending&&!N.destroyed&&N.constructed&&N.length===0&&!N.errored&&N.buffered.length===0&&!N.finished&&!N.writing&&!N.errorEmitted&&!N.closeEmitted}function ie(N,L){let j=!1;function J(Q){if(j){b(N,Q??M());return}if(j=!0,L.pendingcb--,Q){const ce=L[m].splice(0);for(let pe=0;pe<ce.length;pe++)ce[pe](Q);b(N,Q,L.sync)}else te(L)&&(L.prefinished=!0,N.emit("prefinish"),L.pendingcb++,e.nextTick(Re,N,L))}L.sync=!0,L.pendingcb++;try{N._final(J)}catch(Q){J(Q)}L.sync=!1}function se(N,L){!L.prefinished&&!L.finalCalled&&(typeof N._final=="function"&&!L.destroyed?(L.finalCalled=!0,ie(N,L)):(L.prefinished=!0,N.emit("prefinish")))}function Se(N,L,j){te(L)&&(se(N,L),L.pendingcb===0&&(j?(L.pendingcb++,e.nextTick((J,Q)=>{te(Q)?Re(J,Q):Q.pendingcb--},N,L)):te(L)&&(L.pendingcb++,Re(N,L))))}function Re(N,L){L.pendingcb--,L.finished=!0;const j=L[m].splice(0);for(let J=0;J<j.length;J++)j[J]();if(N.emit("finish"),L.autoDestroy){const J=N._readableState;(!J||J.autoDestroy&&(J.endEmitted||J.readable===!1))&&N.destroy()}}o(f.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(N){this._writableState&&(this._writableState.destroyed=N)}},writable:{__proto__:null,get(){const N=this._writableState;return!!N&&N.writable!==!1&&!N.destroyed&&!N.errored&&!N.ending&&!N.ended},set(N){this._writableState&&(this._writableState.writable=!!N)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const N=this._writableState;return N?!N.destroyed&&!N.ending&&N.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Ie=B.destroy;f.prototype.destroy=function(N,L){const j=this._writableState;return!j.destroyed&&(j.bufferedIndex<j.buffered.length||j[m].length)&&e.nextTick(U,j),Ie.call(this,N,L),this},f.prototype._undestroy=B.undestroy,f.prototype._destroy=function(N,L){L(N)},f.prototype[S.captureRejectionSymbol]=function(N){this.destroy(N)};let me;function Ee(){return me===void 0&&(me={}),me}return f.fromWeb=function(N,L){return Ee().newStreamWritableFromWritableStream(N,L)},f.toWeb=function(N){return Ee().newWritableStreamFromStreamWritable(N)},yi}var _i,As;function wd(){if(As)return _i;As=1;const e=Lt,t=Zt,{isReadable:n,isWritable:r,isIterable:i,isNodeStream:o,isReadableNodeStream:s,isWritableNodeStream:l,isDuplexNodeStream:c,isReadableStream:u,isWritableStream:S}=At,v=Pt,{AbortError:P,codes:{ERR_INVALID_ARG_TYPE:B,ERR_INVALID_RETURN_VALUE:k}}=Me,{destroyer:_}=yn,T=Et(),O=Ur(),I=mo(),{createDeferredPromise:M}=ke,H=fl,W=globalThis.Blob||t.Blob,G=typeof W<"u"?function(g){return g instanceof W}:function(g){return!1},K=globalThis.AbortController||Dn().AbortController,{FunctionPrototypeCall:a}=_e;class d extends T{constructor(g){super(g),(g==null?void 0:g.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(g==null?void 0:g.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}_i=function m(g,C){if(c(g))return g;if(s(g))return E({readable:g});if(l(g))return E({writable:g});if(o(g))return E({writable:!1,readable:!1});if(u(g))return E({readable:O.fromWeb(g)});if(S(g))return E({writable:I.fromWeb(g)});if(typeof g=="function"){const{value:w,write:A,final:R,destroy:D}=b(g);if(i(w))return H(d,w,{objectMode:!0,write:A,final:R,destroy:D});const F=w==null?void 0:w.then;if(typeof F=="function"){let q;const X=a(F,w,U=>{if(U!=null)throw new k("nully","body",U)},U=>{_(q,U)});return q=new d({objectMode:!0,readable:!1,write:A,final(U){R(async()=>{try{await X,e.nextTick(U,null)}catch(ne){e.nextTick(U,ne)}})},destroy:D})}throw new k("Iterable, AsyncIterable or AsyncFunction",C,w)}if(G(g))return m(g.arrayBuffer());if(i(g))return H(d,g,{objectMode:!0,writable:!1});if(u(g==null?void 0:g.readable)&&S(g==null?void 0:g.writable))return d.fromWeb(g);if(typeof(g==null?void 0:g.writable)=="object"||typeof(g==null?void 0:g.readable)=="object"){const w=g!=null&&g.readable?s(g==null?void 0:g.readable)?g==null?void 0:g.readable:m(g.readable):void 0,A=g!=null&&g.writable?l(g==null?void 0:g.writable)?g==null?void 0:g.writable:m(g.writable):void 0;return E({readable:w,writable:A})}const f=g==null?void 0:g.then;if(typeof f=="function"){let w;return a(f,g,A=>{A!=null&&w.push(A),w.push(null)},A=>{_(w,A)}),w=new d({objectMode:!0,writable:!1,read(){}})}throw new B(C,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],g)};function b(m){let{promise:g,resolve:C}=M();const f=new K,w=f.signal;return{value:m(async function*(){for(;;){const R=g;g=null;const{chunk:D,done:F,cb:q}=await R;if(e.nextTick(q),F)return;if(w.aborted)throw new P(void 0,{cause:w.reason});({promise:g,resolve:C}=M()),yield D}}(),{signal:w}),write(R,D,F){const q=C;C=null,q({chunk:R,done:!1,cb:F})},final(R){const D=C;C=null,D({done:!0,cb:R})},destroy(R,D){f.abort(),D(R)}}}function E(m){const g=m.readable&&typeof m.readable.read!="function"?O.wrap(m.readable):m.readable,C=m.writable;let f=!!n(g),w=!!r(C),A,R,D,F,q;function X(U){const ne=F;F=null,ne?ne(U):U&&q.destroy(U)}return q=new d({readableObjectMode:!!(g!=null&&g.readableObjectMode),writableObjectMode:!!(C!=null&&C.writableObjectMode),readable:f,writable:w}),w&&(v(C,U=>{w=!1,U&&_(g,U),X(U)}),q._write=function(U,ne,te){C.write(U,ne)?te():A=te},q._final=function(U){C.end(),R=U},C.on("drain",function(){if(A){const U=A;A=null,U()}}),C.on("finish",function(){if(R){const U=R;R=null,U()}})),f&&(v(g,U=>{f=!1,U&&_(g,U),X(U)}),g.on("readable",function(){if(D){const U=D;D=null,U()}}),g.on("end",function(){q.push(null)}),q._read=function(){for(;;){const U=g.read();if(U===null){D=q._read;return}if(!q.push(U))return}}),q._destroy=function(U,ne){!U&&F!==null&&(U=new P),D=null,A=null,R=null,F===null?ne(U):(F=ne,_(C,U),_(g,U))},q}return _i}var mi,Rs;function Et(){if(Rs)return mi;Rs=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=_e;mi=s;const i=Ur(),o=mo();r(s.prototype,i.prototype),r(s,i);{const S=n(o.prototype);for(let v=0;v<S.length;v++){const P=S[v];s.prototype[P]||(s.prototype[P]=o.prototype[P])}}function s(S){if(!(this instanceof s))return new s(S);i.call(this,S),o.call(this,S),S?(this.allowHalfOpen=S.allowHalfOpen!==!1,S.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),S.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(o.prototype,"writableLength")},writableFinished:{__proto__:null,...t(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(S){this._readableState&&this._writableState&&(this._readableState.destroyed=S,this._writableState.destroyed=S)}}});let l;function c(){return l===void 0&&(l={}),l}s.fromWeb=function(S,v){return c().newStreamDuplexFromReadableWritablePair(S,v)},s.toWeb=function(S){return c().newReadableWritablePairFromDuplex(S)};let u;return s.from=function(S){return u||(u=wd()),u(S,"body")},mi}const{ObjectSetPrototypeOf:cl,Symbol:bd}=_e;var dl=St;const{ERR_METHOD_NOT_IMPLEMENTED:yd}=Me.codes,Eo=Et(),{getHighWaterMark:_d}=jr;cl(St.prototype,Eo.prototype);cl(St,Eo);const Pn=bd("kCallback");function St(e){if(!(this instanceof St))return new St(e);const t=e?_d(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),Eo.call(this,e),this._readableState.sync=!1,this[Pn]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",md)}function Xi(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,n)=>{if(t){e?e(t):this.destroy(t);return}n!=null&&this.push(n),this.push(null),e&&e()}):(this.push(null),e&&e())}function md(){this._final!==Xi&&Xi.call(this)}St.prototype._final=Xi;St.prototype._transform=function(e,t,n){throw new yd("_transform()")};St.prototype._write=function(e,t,n){const r=this._readableState,i=this._writableState,o=r.length;this._transform(e,t,(s,l)=>{if(s){n(s);return}l!=null&&this.push(l),i.ended||o===r.length||r.length<r.highWaterMark?n():this[Pn]=n})};St.prototype._read=function(){if(this[Pn]){const e=this[Pn];this[Pn]=null,e()}};const{ObjectSetPrototypeOf:hl}=_e;var gl=dn;const So=dl;hl(dn.prototype,So.prototype);hl(dn,So);function dn(e){if(!(this instanceof dn))return new dn(e);So.call(this,e)}dn.prototype._transform=function(e,t,n){n(null,e)};const Cn=Lt,{ArrayIsArray:Ed,Promise:Sd,SymbolAsyncIterator:vd,SymbolDispose:Ad}=_e,Ar=Pt,{once:Rd}=ke,Id=yn,Is=Et(),{aggregateTwoErrors:Td,codes:{ERR_INVALID_ARG_TYPE:Qi,ERR_INVALID_RETURN_VALUE:Ei,ERR_MISSING_ARGS:Od,ERR_STREAM_DESTROYED:xd,ERR_STREAM_PREMATURE_CLOSE:Nd},AbortError:Cd}=Me,{validateFunction:Ld,validateAbortSignal:Pd}=Fn,{isIterable:Ut,isReadable:Si,isReadableNodeStream:_r,isNodeStream:Ts,isTransformStream:on,isWebStream:Md,isReadableStream:vi,isReadableFinished:Bd}=At,Dd=globalThis.AbortController||Dn().AbortController;let Ai,Ri,Ii;function Os(e,t,n){let r=!1;e.on("close",()=>{r=!0});const i=Ar(e,{readable:t,writable:n},o=>{r=!o});return{destroy:o=>{r||(r=!0,Id.destroyer(e,o||new xd("pipe")))},cleanup:i}}function $d(e){return Ld(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function Ti(e){if(Ut(e))return e;if(_r(e))return kd(e);throw new Qi("val",["Readable","Iterable","AsyncIterable"],e)}async function*kd(e){Ri||(Ri=Ur()),yield*Ri.prototype[vd].call(e)}async function lr(e,t,n,{end:r}){let i,o=null;const s=u=>{if(u&&(i=u),o){const S=o;o=null,S()}},l=()=>new Sd((u,S)=>{i?S(i):o=()=>{i?S(i):u()}});t.on("drain",s);const c=Ar(t,{readable:!1},s);try{t.writableNeedDrain&&await l();for await(const u of e)t.write(u)||await l();r&&(t.end(),await l()),n()}catch(u){n(i!==u?Td(i,u):u)}finally{c(),t.off("drain",s)}}async function Oi(e,t,n,{end:r}){on(t)&&(t=t.writable);const i=t.getWriter();try{for await(const o of e)await i.ready,i.write(o).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(o){try{await i.abort(o),n(o)}catch(s){n(s)}}}function jd(...e){return pl(e,Rd($d(e)))}function pl(e,t,n){if(e.length===1&&Ed(e[0])&&(e=e[0]),e.length<2)throw new Od("streams");const r=new Dd,i=r.signal,o=n==null?void 0:n.signal,s=[];Pd(o,"options.signal");function l(){k(new Cd)}Ii=Ii||ke.addAbortListener;let c;o&&(c=Ii(o,l));let u,S;const v=[];let P=0;function B(I){k(I,--P===0)}function k(I,M){var H;if(I&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=I),!(!u&&!M)){for(;v.length;)v.shift()(u);(H=c)===null||H===void 0||H[Ad](),r.abort(),M&&(u||s.forEach(W=>W()),Cn.nextTick(t,u,S))}}let _;for(let I=0;I<e.length;I++){const M=e[I],H=I<e.length-1,W=I>0,G=H||(n==null?void 0:n.end)!==!1,K=I===e.length-1;if(Ts(M)){let a=function(d){d&&d.name!=="AbortError"&&d.code!=="ERR_STREAM_PREMATURE_CLOSE"&&B(d)};if(G){const{destroy:d,cleanup:b}=Os(M,H,W);v.push(d),Si(M)&&K&&s.push(b)}M.on("error",a),Si(M)&&K&&s.push(()=>{M.removeListener("error",a)})}if(I===0)if(typeof M=="function"){if(_=M({signal:i}),!Ut(_))throw new Ei("Iterable, AsyncIterable or Stream","source",_)}else Ut(M)||_r(M)||on(M)?_=M:_=Is.from(M);else if(typeof M=="function"){if(on(_)){var T;_=Ti((T=_)===null||T===void 0?void 0:T.readable)}else _=Ti(_);if(_=M(_,{signal:i}),H){if(!Ut(_,!0))throw new Ei("AsyncIterable",`transform[${I-1}]`,_)}else{var O;Ai||(Ai=gl);const a=new Ai({objectMode:!0}),d=(O=_)===null||O===void 0?void 0:O.then;if(typeof d=="function")P++,d.call(_,m=>{S=m,m!=null&&a.write(m),G&&a.end(),Cn.nextTick(B)},m=>{a.destroy(m),Cn.nextTick(B,m)});else if(Ut(_,!0))P++,lr(_,a,B,{end:G});else if(vi(_)||on(_)){const m=_.readable||_;P++,lr(m,a,B,{end:G})}else throw new Ei("AsyncIterable or Promise","destination",_);_=a;const{destroy:b,cleanup:E}=Os(_,!1,!0);v.push(b),K&&s.push(E)}}else if(Ts(M)){if(_r(_)){P+=2;const a=Ud(_,M,B,{end:G});Si(M)&&K&&s.push(a)}else if(on(_)||vi(_)){const a=_.readable||_;P++,lr(a,M,B,{end:G})}else if(Ut(_))P++,lr(_,M,B,{end:G});else throw new Qi("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],_);_=M}else if(Md(M)){if(_r(_))P++,Oi(Ti(_),M,B,{end:G});else if(vi(_)||Ut(_))P++,Oi(_,M,B,{end:G});else if(on(_))P++,Oi(_.readable,M,B,{end:G});else throw new Qi("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],_);_=M}else _=Is.from(M)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&Cn.nextTick(l),_}function Ud(e,t,n,{end:r}){let i=!1;if(t.on("close",()=>{i||n(new Nd)}),e.pipe(t,{end:!1}),r){let o=function(){i=!0,t.end()};Bd(e)?Cn.nextTick(o):e.once("end",o)}else n();return Ar(e,{readable:!0,writable:!1},o=>{const s=e._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&s&&s.ended&&!s.errored&&!s.errorEmitted?e.once("end",n).once("error",n):n(o)}),Ar(t,{readable:!1,writable:!0},n)}var vo={pipelineImpl:pl,pipeline:jd};const{pipeline:Wd}=vo,ur=Et(),{destroyer:Fd}=yn,{isNodeStream:fr,isReadable:xs,isWritable:Ns,isWebStream:xi,isTransformStream:kt,isWritableStream:Cs,isReadableStream:Ls}=At,{AbortError:qd,codes:{ERR_INVALID_ARG_VALUE:Ps,ERR_MISSING_ARGS:Hd}}=Me,Gd=Pt;var wl=function(...t){if(t.length===0)throw new Hd("streams");if(t.length===1)return ur.from(t[0]);const n=[...t];if(typeof t[0]=="function"&&(t[0]=ur.from(t[0])),typeof t[t.length-1]=="function"){const B=t.length-1;t[B]=ur.from(t[B])}for(let B=0;B<t.length;++B)if(!(!fr(t[B])&&!xi(t[B]))){if(B<t.length-1&&!(xs(t[B])||Ls(t[B])||kt(t[B])))throw new Ps(`streams[${B}]`,n[B],"must be readable");if(B>0&&!(Ns(t[B])||Cs(t[B])||kt(t[B])))throw new Ps(`streams[${B}]`,n[B],"must be writable")}let r,i,o,s,l;function c(B){const k=s;s=null,k?k(B):B?l.destroy(B):!P&&!v&&l.destroy()}const u=t[0],S=Wd(t,c),v=!!(Ns(u)||Cs(u)||kt(u)),P=!!(xs(S)||Ls(S)||kt(S));if(l=new ur({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(S!=null&&S.readableObjectMode),writable:v,readable:P}),v){if(fr(u))l._write=function(k,_,T){u.write(k,_)?T():r=T},l._final=function(k){u.end(),i=k},u.on("drain",function(){if(r){const k=r;r=null,k()}});else if(xi(u)){const _=(kt(u)?u.writable:u).getWriter();l._write=async function(T,O,I){try{await _.ready,_.write(T).catch(()=>{}),I()}catch(M){I(M)}},l._final=async function(T){try{await _.ready,_.close().catch(()=>{}),i=T}catch(O){T(O)}}}const B=kt(S)?S.readable:S;Gd(B,()=>{if(i){const k=i;i=null,k()}})}if(P){if(fr(S))S.on("readable",function(){if(o){const B=o;o=null,B()}}),S.on("end",function(){l.push(null)}),l._read=function(){for(;;){const B=S.read();if(B===null){o=l._read;return}if(!l.push(B))return}};else if(xi(S)){const k=(kt(S)?S.readable:S).getReader();l._read=async function(){for(;;)try{const{value:_,done:T}=await k.read();if(!l.push(_))return;if(T){l.push(null);return}}catch{return}}}}return l._destroy=function(B,k){!B&&s!==null&&(B=new qd),o=null,r=null,i=null,s===null?k(B):(s=k,fr(S)&&Fd(S,B))},l};const zd=globalThis.AbortController||Dn().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Vd,ERR_INVALID_ARG_TYPE:qn,ERR_MISSING_ARGS:Kd,ERR_OUT_OF_RANGE:Yd},AbortError:st}=Me,{validateAbortSignal:Qt,validateInteger:Ms,validateObject:en}=Fn,Jd=_e.Symbol("kWeak"),Zd=_e.Symbol("kResistStopPropagation"),{finished:Xd}=Pt,Qd=wl,{addAbortSignalNoValidate:eh}=kr,{isWritable:th,isNodeStream:nh}=At,{deprecate:rh}=ke,{ArrayPrototypePush:ih,Boolean:oh,MathFloor:Bs,Number:sh,NumberIsNaN:ah,Promise:Ds,PromiseReject:$s,PromiseResolve:lh,PromisePrototypeThen:ks,Symbol:bl}=_e,Rr=bl("kEmpty"),js=bl("kEof");function uh(e,t){if(t!=null&&en(t,"options"),(t==null?void 0:t.signal)!=null&&Qt(t.signal,"options.signal"),nh(e)&&!th(e))throw new Vd("stream",e,"must be writable");const n=Qd(this,e);return t!=null&&t.signal&&eh(t.signal,n),n}function Wr(e,t){if(typeof e!="function")throw new qn("fn",["Function","AsyncFunction"],e);t!=null&&en(t,"options"),(t==null?void 0:t.signal)!=null&&Qt(t.signal,"options.signal");let n=1;(t==null?void 0:t.concurrency)!=null&&(n=Bs(t.concurrency));let r=n-1;return(t==null?void 0:t.highWaterMark)!=null&&(r=Bs(t.highWaterMark)),Ms(n,"options.concurrency",1),Ms(r,"options.highWaterMark",0),r+=n,async function*(){const o=ke.AbortSignalAny([t==null?void 0:t.signal].filter(oh)),s=this,l=[],c={signal:o};let u,S,v=!1,P=0;function B(){v=!0,k()}function k(){P-=1,_()}function _(){S&&!v&&P<n&&l.length<r&&(S(),S=null)}async function T(){try{for await(let O of s){if(v)return;if(o.aborted)throw new st;try{if(O=e(O,c),O===Rr)continue;O=lh(O)}catch(I){O=$s(I)}P+=1,ks(O,k,B),l.push(O),u&&(u(),u=null),!v&&(l.length>=r||P>=n)&&await new Ds(I=>{S=I})}l.push(js)}catch(O){const I=$s(O);ks(I,k,B),l.push(I)}finally{v=!0,u&&(u(),u=null)}}T();try{for(;;){for(;l.length>0;){const O=await l[0];if(O===js)return;if(o.aborted)throw new st;O!==Rr&&(yield O),l.shift(),_()}await new Ds(O=>{u=O})}}finally{v=!0,S&&(S(),S=null)}}.call(this)}function fh(e=void 0){return e!=null&&en(e,"options"),(e==null?void 0:e.signal)!=null&&Qt(e.signal,"options.signal"),async function*(){let n=0;for await(const i of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new st({cause:e.signal.reason});yield[n++,i]}}.call(this)}async function yl(e,t=void 0){for await(const n of Ao.call(this,e,t))return!0;return!1}async function ch(e,t=void 0){if(typeof e!="function")throw new qn("fn",["Function","AsyncFunction"],e);return!await yl.call(this,async(...n)=>!await e(...n),t)}async function dh(e,t){for await(const n of Ao.call(this,e,t))return n}async function hh(e,t){if(typeof e!="function")throw new qn("fn",["Function","AsyncFunction"],e);async function n(r,i){return await e(r,i),Rr}for await(const r of Wr.call(this,n,t));}function Ao(e,t){if(typeof e!="function")throw new qn("fn",["Function","AsyncFunction"],e);async function n(r,i){return await e(r,i)?r:Rr}return Wr.call(this,n,t)}class gh extends Kd{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function ph(e,t,n){var r;if(typeof e!="function")throw new qn("reducer",["Function","AsyncFunction"],e);n!=null&&en(n,"options"),(n==null?void 0:n.signal)!=null&&Qt(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){const u=new st(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await Xd(this.destroy(u)),u}const o=new zd,s=o.signal;if(n!=null&&n.signal){const u={once:!0,[Jd]:this,[Zd]:!0};n.signal.addEventListener("abort",()=>o.abort(),u)}let l=!1;try{for await(const u of this){var c;if(l=!0,n!=null&&(c=n.signal)!==null&&c!==void 0&&c.aborted)throw new st;i?t=await e(t,u,{signal:s}):(t=u,i=!0)}if(!l&&!i)throw new gh}finally{o.abort()}return t}async function wh(e){e!=null&&en(e,"options"),(e==null?void 0:e.signal)!=null&&Qt(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new st(void 0,{cause:e.signal.reason});ih(t,r)}return t}function bh(e,t){const n=Wr.call(this,e,t);return async function*(){for await(const i of n)yield*i}.call(this)}function _l(e){if(e=sh(e),ah(e))return 0;if(e<0)throw new Yd("number",">= 0",e);return e}function yh(e,t=void 0){return t!=null&&en(t,"options"),(t==null?void 0:t.signal)!=null&&Qt(t.signal,"options.signal"),e=_l(e),async function*(){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new st;for await(const o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new st;e--<=0&&(yield o)}}.call(this)}function _h(e,t=void 0){return t!=null&&en(t,"options"),(t==null?void 0:t.signal)!=null&&Qt(t.signal,"options.signal"),e=_l(e),async function*(){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new st;for await(const o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new st;if(e-- >0&&(yield o),e<=0)return}}.call(this)}go.streamReturningOperators={asIndexedPairs:rh(fh,"readable.asIndexedPairs will be removed in a future version."),drop:yh,filter:Ao,flatMap:bh,map:Wr,take:_h,compose:uh};go.promiseReturningOperators={every:ch,forEach:hh,reduce:ph,toArray:wh,some:yl,find:dh};var Ni,Us;function ml(){if(Us)return Ni;Us=1;const{ArrayPrototypePop:e,Promise:t}=_e,{isIterable:n,isNodeStream:r,isWebStream:i}=At,{pipelineImpl:o}=vo,{finished:s}=Pt;El();function l(...c){return new t((u,S)=>{let v,P;const B=c[c.length-1];if(B&&typeof B=="object"&&!r(B)&&!n(B)&&!i(B)){const k=e(c);v=k.signal,P=k.end}o(c,(k,_)=>{k?S(k):u(_)},{signal:v,end:P})})}return Ni={finished:s,pipeline:l},Ni}var Ws;function El(){if(Ws)return hi.exports;Ws=1;const{Buffer:e}=Zt,{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=_e,{promisify:{custom:i}}=ke,{streamReturningOperators:o,promiseReturningOperators:s}=go,{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=Me,c=wl,{setDefaultHighWaterMark:u,getDefaultHighWaterMark:S}=jr,{pipeline:v}=vo,{destroyer:P}=yn,B=Pt,k=ml(),_=At,T=hi.exports=_o.Stream;T.isDestroyed=_.isDestroyed,T.isDisturbed=_.isDisturbed,T.isErrored=_.isErrored,T.isReadable=_.isReadable,T.isWritable=_.isWritable,T.Readable=Ur();for(const I of n(o)){let H=function(...W){if(new.target)throw l();return T.Readable.from(r(M,this,W))};const M=o[I];t(H,"name",{__proto__:null,value:M.name}),t(H,"length",{__proto__:null,value:M.length}),t(T.Readable.prototype,I,{__proto__:null,value:H,enumerable:!1,configurable:!0,writable:!0})}for(const I of n(s)){let H=function(...W){if(new.target)throw l();return r(M,this,W)};const M=s[I];t(H,"name",{__proto__:null,value:M.name}),t(H,"length",{__proto__:null,value:M.length}),t(T.Readable.prototype,I,{__proto__:null,value:H,enumerable:!1,configurable:!0,writable:!0})}T.Writable=mo(),T.Duplex=Et(),T.Transform=dl,T.PassThrough=gl,T.pipeline=v;const{addAbortSignal:O}=kr;return T.addAbortSignal=O,T.finished=B,T.destroy=P,T.compose=c,T.setDefaultHighWaterMark=u,T.getDefaultHighWaterMark=S,t(T,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return k}}),t(v,i,{__proto__:null,enumerable:!0,get(){return k.pipeline}}),t(B,i,{__proto__:null,enumerable:!0,get(){return k.finished}}),T.Stream=T,T._isUint8Array=function(M){return M instanceof Uint8Array},T._uint8ArrayToBuffer=function(M){return e.from(M.buffer,M.byteOffset,M.byteLength)},hi.exports}(function(e){const t=El(),n=ml(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(Na);var Fr=Na.exports,Sl=$n;$n.default=$n;$n.stable=Rl;$n.stableStringify=Rl;var Ir="[...]",vl="[Circular]",Kt=[],qt=[];function Al(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function $n(e,t,n,r){typeof r>"u"&&(r=Al()),eo(e,"",0,[],void 0,0,r);var i;try{qt.length===0?i=JSON.stringify(e,t,n):i=JSON.stringify(e,Il(t),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Kt.length!==0;){var o=Kt.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function fn(e,t,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:e}),Kt.push([r,n,t,i])):qt.push([t,n,e]):(r[n]=e,Kt.push([r,n,t]))}function eo(e,t,n,r,i,o,s){o+=1;var l;if(typeof e=="object"&&e!==null){for(l=0;l<r.length;l++)if(r[l]===e){fn(vl,e,t,i);return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){fn(Ir,e,t,i);return}if(typeof s.edgesLimit<"u"&&n+1>s.edgesLimit){fn(Ir,e,t,i);return}if(r.push(e),Array.isArray(e))for(l=0;l<e.length;l++)eo(e[l],l,l,r,e,o,s);else{var c=Object.keys(e);for(l=0;l<c.length;l++){var u=c[l];eo(e[u],u,l,r,e,o,s)}}r.pop()}}function mh(e,t){return e<t?-1:e>t?1:0}function Rl(e,t,n,r){typeof r>"u"&&(r=Al());var i=to(e,"",0,[],void 0,0,r)||e,o;try{qt.length===0?o=JSON.stringify(i,t,n):o=JSON.stringify(i,Il(t),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Kt.length!==0;){var s=Kt.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return o}function to(e,t,n,r,i,o,s){o+=1;var l;if(typeof e=="object"&&e!==null){for(l=0;l<r.length;l++)if(r[l]===e){fn(vl,e,t,i);return}try{if(typeof e.toJSON=="function")return}catch{return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){fn(Ir,e,t,i);return}if(typeof s.edgesLimit<"u"&&n+1>s.edgesLimit){fn(Ir,e,t,i);return}if(r.push(e),Array.isArray(e))for(l=0;l<e.length;l++)to(e[l],l,l,r,e,o,s);else{var c={},u=Object.keys(e).sort(mh);for(l=0;l<u.length;l++){var S=u[l];to(e[S],S,l,r,e,o,s),c[S]=e[S]}if(typeof i<"u")Kt.push([i,t,e]),i[t]=c;else return c}r.pop()}}function Il(e){return e=typeof e<"u"?e:function(t,n){return n},function(t,n){if(qt.length>0)for(var r=0;r<qt.length;r++){var i=qt[r];if(i[1]===t&&i[0]===n){n=i[2],qt.splice(r,1);break}}return e.call(this,t,n)}}const Eh=wn(Sl);var Ro={exports:{}},Sh=Tl;function Tl(e,t){if(e&&t)return Tl(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(r){n[r]=e[r]}),n;function n(){for(var r=new Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];var o=e.apply(this,r),s=r[r.length-1];return typeof o=="function"&&o!==s&&Object.keys(s).forEach(function(l){o[l]=s[l]}),o}}var Ol=Sh;Ro.exports=Ol(mr);Ro.exports.strict=Ol(xl);mr.proto=mr(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return mr(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return xl(this)},configurable:!0})});function mr(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function xl(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}var Io=Ro.exports;const vh=wn(Io);var Ah=Io,Rh=function(){},Ih=sn.Bare?queueMicrotask:Sr.nextTick.bind(Sr),Th=function(e){return e.setHeader&&typeof e.abort=="function"},Oh=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},Nl=function(e,t,n){if(typeof t=="function")return Nl(e,null,t);t||(t={}),n=Ah(n||Rh);var r=e._writableState,i=e._readableState,o=t.readable||t.readable!==!1&&e.readable,s=t.writable||t.writable!==!1&&e.writable,l=!1,c=function(){e.writable||u()},u=function(){s=!1,o||n.call(e)},S=function(){o=!1,s||n.call(e)},v=function(T){n.call(e,T?new Error("exited with error code: "+T):null)},P=function(T){n.call(e,T)},B=function(){Ih(k)},k=function(){if(!l){if(o&&!(i&&i.ended&&!i.destroyed))return n.call(e,new Error("premature close"));if(s&&!(r&&r.ended&&!r.destroyed))return n.call(e,new Error("premature close"))}},_=function(){e.req.on("finish",u)};return Th(e)?(e.on("complete",u),e.on("abort",B),e.req?_():e.on("request",_)):s&&!r&&(e.on("end",c),e.on("close",c)),Oh(e)&&e.on("exit",v),e.on("end",S),e.on("finish",u),t.error!==!1&&e.on("error",P),e.on("close",B),function(){l=!0,e.removeListener("complete",u),e.removeListener("abort",B),e.removeListener("request",_),e.req&&e.req.removeListener("finish",u),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",u),e.removeListener("exit",v),e.removeListener("end",S),e.removeListener("error",P),e.removeListener("close",B)}},Cl=Nl;const Fs=wn(Cl);var xh=null;const Nh=Object.freeze(Object.defineProperty({__proto__:null,default:xh},Symbol.toStringTag,{value:"Module"})),Ch=ju(Nh);var Lh=Io,Ph=Cl,Er;try{Er=Ch}catch{}var kn=function(){},Mh=typeof Sr>"u"?!1:/^v?\.0/.test(Sr.version),qr=function(e){return typeof e=="function"},Bh=function(e){return!Mh||!Er?!1:(e instanceof(Er.ReadStream||kn)||e instanceof(Er.WriteStream||kn))&&qr(e.close)},Dh=function(e){return e.setHeader&&qr(e.abort)},$h=function(e,t,n,r){r=Lh(r);var i=!1;e.on("close",function(){i=!0}),Ph(e,{readable:t,writable:n},function(s){if(s)return r(s);i=!0,r()});var o=!1;return function(s){if(!i&&!o){if(o=!0,Bh(e))return e.close(kn);if(Dh(e))return e.abort();if(qr(e.destroy))return e.destroy();r(s||new Error("stream was destroyed"))}}},qs=function(e){e()},kh=function(e,t){return e.pipe(t)},jh=function(){var e=Array.prototype.slice.call(arguments),t=qr(e[e.length-1]||kn)&&e.pop()||kn;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var n,r=e.map(function(i,o){var s=o<e.length-1,l=o>0;return $h(i,s,l,function(c){n||(n=c),c&&r.forEach(qs),!s&&(r.forEach(qs),t(n))})});return e.reduce(kh)},Uh=jh;const Hs=wn(Uh);function cr(){}const Gs="SYN",Ci="ACK",zs="BRK";class Vs extends Fr.Duplex{constructor(t){let{name:n,target:r,targetWindow:i=window,targetOrigin:o="*"}=t;if(super({objectMode:!0}),ee(this,"_init",void 0),ee(this,"_haveSyn",void 0),ee(this,"_name",void 0),ee(this,"_target",void 0),ee(this,"_targetWindow",void 0),ee(this,"_targetOrigin",void 0),ee(this,"_onMessage",void 0),ee(this,"_synIntervalId",void 0),!n||!r)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=n,this._target=r,this._targetWindow=i,this._targetOrigin=o,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(zs,null,cr),this._haveSyn=!1,this._init=!1}_handShake(){this._write(Gs,null,cr),this.cork()}_onData(t){if(!this._init)t===Gs?(this._haveSyn=!0,this._write(Ci,null,cr)):t===Ci&&(this._init=!0,this._haveSyn||this._write(Ci,null,cr),this.uncork());else if(t===zs)this._break();else try{this.push(t)}catch(n){this.emit("error",n)}}_postMessage(t){const n=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:t},n)}onMessage(t){const n=t.data;this._targetOrigin!=="*"&&t.origin!==this._targetOrigin||t.source!==this._targetWindow||typeof n!="object"||n.target!==this._name||!n.data||this._onData(n.data)}_read(){}_write(t,n,r){this._postMessage(t),r()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const Wh={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Ks={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},Ys=Wh.rpc.internal,Fh="Unspecified error message. This is a bug, please report it.",qh="Unspecified server error.";function Ll(e){return Number.isInteger(e)}function Js(e){return typeof e=="string"&&e.length>0}function Zs(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function Hh(e){return e>=-32099&&e<=-32e3}function Pl(e){const t=e;return!(!t||!Ll(t.code)||!Js(t.message)||t.stack&&!Js(t.stack))}function Gh(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fh;if(Ll(e)){const n=e.toString();if(Object.hasOwn(Ks,n))return Ks[n].message;if(Hh(e))return qh}return t}const zh={code:Ys,message:Gh(Ys)};function no(e){try{JSON.parse(JSON.stringify(e,(t,n)=>{if(t==="__proto__"||t==="constructor")throw new Error("Not valid json");if(typeof n=="function"||typeof n=="symbol")throw new Error("Not valid json");return n}),(t,n)=>{if(!(t==="__proto__"||t==="constructor"))return n})}catch{return!1}return!0}function Xs(e){return Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return no(r)&&(t[n]=r),t},{})}function Vh(e){return Array.isArray(e)?e.map(t=>no(t)?t:Zs(t)?Xs(t):null):Zs(e)?Xs(e):no(e)?e:null}function Kh(e,t){if(e&&typeof e=="object"&&"serialize"in e&&typeof e.serialize=="function")return e.serialize();if(Pl(e))return e;const n=Vh(e);return Ke(Ke({},t),{},{data:{cause:n}})}function Qs(e){let{fallbackError:t=zh,shouldIncludeStack:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Pl(t))throw new Error("Must provide fallback error with integer number code and string message.");const r=Kh(e,t);return n||delete r.stack,r}function ea(e,t,n){try{Reflect.apply(e,t,n)}catch(r){setTimeout(()=>{throw r})}}function Yh(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}class Hr extends Un.EventEmitter{emit(t){let n=t==="error";const r=this._events;if(r!==void 0)n=n&&r.error===void 0;else if(!n)return!1;for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(n){let c;if(o.length>0&&([c]=o),c instanceof Error)throw c;const u=new Error(`Unhandled error.${c?` (${c.message})`:""}`);throw u.context=c,u}const l=r[t];if(l===void 0)return!1;if(typeof l=="function")ea(l,this,o);else{const c=l.length,u=Yh(l);for(let S=0;S<c;S+=1)ea(u[S],this,o)}return!0}}class xn extends Error{constructor(t){let{code:n,message:r,data:i}=t;if(!Number.isInteger(n))throw new Error("code must be an integer");if(!r||typeof r!="string")throw new Error("message must be string");super(r),ee(this,"code",void 0),ee(this,"data",void 0),this.code=n,i!==void 0&&(this.data=i)}toString(){return Eh({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const ro=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(r,i)=>{r||i.error?t(r||i.error):!n||Array.isArray(i)?e(i):e(i.result)}};function Jh(){const e={};function t(){return!1}const n=new Hr;function r(c){const u=e[c.id];if(!u)throw new Error(`StreamMiddleware - Unknown response id "${c.id}"`);delete e[c.id],Object.assign(u.res,c),setTimeout(u.end)}function i(c){n.emit("notification",c)}function o(c,u,S){let v;try{!c.id?i(c):r(c)}catch(P){v=P}S(v)}const s=new Fr.Duplex({objectMode:!0,read:t,write:o});return{events:n,middleware:(c,u,S,v)=>{s.push(c),e[c.id]={req:c,res:u,next:S,end:v}},stream:s}}function Zh(){return(e,t,n,r)=>{const i=e.id,o=Math.random().toString(36).slice(2);e.id=o,t.id=o,n(s=>{e.id=i,t.id=i,s()})}}class wt extends Hr{constructor(){super(),ee(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(t,n,r){const i=[];let o=null,s=!1;for(const l of r)if([o,s]=await wt._runMiddleware(t,n,l,i),s)break;return[o,s,i.reverse()]}static _runMiddleware(t,n,r,i){return new Promise(o=>{const s=c=>{const u=c||n.error;u&&(typeof u=="object"&&Object.keys(u).includes("stack")===!1&&(u.stack="Stack trace is not available."),n.error=Qs(u,{shouldIncludeStack:!0,fallbackError:{message:(u==null?void 0:u.message)||(u==null?void 0:u.toString()),code:(u==null?void 0:u.code)||-32603,stack:(u==null?void 0:u.stack)||"Stack trace is not available.",data:(u==null?void 0:u.data)||(u==null?void 0:u.message)||(u==null?void 0:u.toString())}})),o([u,!0])},l=c=>{n.error?s(n.error):(c&&(typeof c!="function"&&s(new xn({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),i.push(c)),o([null,!1]))};try{r(t,n,l,s)}catch(c){s(c)}})}static async _runReturnHandlers(t){for(const n of t)await new Promise((r,i)=>{n(o=>o?i(o):r())})}static _checkForCompletion(t,n,r){if(!("result"in n)&&!("error"in n))throw new xn({code:-32603,message:"Response has no error or result for request"});if(!r)throw new xn({code:-32603,message:"Nothing ended request"})}push(t){this._middleware.push(t)}handle(t,n){if(n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(t)?n?this._handleBatch(t,n):this._handleBatch(t):n?this._handle(t,n):this._promiseHandle(t)}asMiddleware(){return async(t,n,r,i)=>{try{const[o,s,l]=await wt._runAllMiddleware(t,n,this._middleware);return s?(await wt._runReturnHandlers(l),i(o)):r(async c=>{try{await wt._runReturnHandlers(l)}catch(u){return c(u)}return c()})}catch(o){return i(o)}}}async _handleBatch(t,n){try{const r=await Promise.all(t.map(this._promiseHandle.bind(this)));return n?n(null,r):r}catch(r){if(n)return n(r);throw r}}_promiseHandle(t){return new Promise((n,r)=>{this._handle(t,(i,o)=>{i&&o===void 0?r(i):n(o)}).catch(r)})}async _handle(t,n){if(!t||Array.isArray(t)||typeof t!="object"){const B=new xn({code:-32603,message:"request must be plain object"});return n(B,{id:void 0,jsonrpc:"2.0",error:B})}if(typeof t.method!="string"){const B=new xn({code:-32603,message:"method must be string"});return n(B,{id:t.id,jsonrpc:"2.0",error:B})}const r=Ke({},t),i={id:r.id,jsonrpc:r.jsonrpc};let o=null;try{await this._processRequest(r,i)}catch(B){o=B}if(o&&(delete i.result,!i.error)){var s,l,c,u,S,v,P;typeof o=="object"&&Object.keys(o).includes("stack")===!1&&(o.stack="Stack trace is not available."),i.error=Qs(o,{shouldIncludeStack:!0,fallbackError:{message:((s=o)===null||s===void 0?void 0:s.message)||((l=o)===null||l===void 0?void 0:l.toString()),code:((c=o)===null||c===void 0?void 0:c.code)||-32603,stack:((u=o)===null||u===void 0?void 0:u.stack)||"Stack trace is not available.",data:((S=o)===null||S===void 0?void 0:S.data)||((v=o)===null||v===void 0?void 0:v.message)||((P=o)===null||P===void 0?void 0:P.toString())}})}return n(o,i)}async _processRequest(t,n){const[r,i,o]=await wt._runAllMiddleware(t,n,this._middleware);if(wt._checkForCompletion(t,n,i),await wt._runReturnHandlers(o),r)throw r}}class Xh extends Fr.Duplex{constructor(t){let{parent:n,name:r}=t;super({objectMode:!0}),ee(this,"_parent",void 0),ee(this,"_name",void 0),this._parent=n,this._name=r}_read(){}_write(t,n,r){this._parent.push({name:this._name,data:t}),r()}}const ta=Symbol("IGNORE_SUBSTREAM");class Qh extends Fr.Duplex{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(Ke(Ke({},t),{},{objectMode:!0})),ee(this,"_substreams",void 0),ee(this,"getStream",void 0),this._substreams={}}createStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const n=new Xh({parent:this,name:t});return this._substreams[t]=n,eg(this,r=>n.destroy(r||void 0)),n}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=ta}_read(){}_write(t,n,r){const{name:i,data:o}=t;if(!i)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),r();const s=this._substreams[i];return s?(s!==ta&&s.push(o),r()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${i}"`),r())}}function eg(e,t){const n=vh(t);Fs(e,{readable:!1},n),Fs(e,{writable:!1},n)}var Tr={exports:{}};Tr.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,l="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",S="[object Boolean]",v="[object Date]",P="[object Error]",B="[object Function]",k="[object GeneratorFunction]",_="[object Map]",T="[object Number]",O="[object Null]",I="[object Object]",M="[object Proxy]",H="[object RegExp]",W="[object Set]",G="[object String]",K="[object Undefined]",a="[object WeakMap]",d="[object ArrayBuffer]",b="[object DataView]",E="[object Float32Array]",m="[object Float64Array]",g="[object Int8Array]",C="[object Int16Array]",f="[object Int32Array]",w="[object Uint8Array]",A="[object Uint8ClampedArray]",R="[object Uint16Array]",D="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,q=/^\[object .+?Constructor\]$/,X=/^(?:0|[1-9]\d*)$/,U={};U[E]=U[m]=U[g]=U[C]=U[f]=U[w]=U[A]=U[R]=U[D]=!0,U[l]=U[c]=U[d]=U[S]=U[b]=U[v]=U[P]=U[B]=U[_]=U[T]=U[I]=U[H]=U[W]=U[G]=U[a]=!1;var ne=typeof sn=="object"&&sn&&sn.Object===Object&&sn,te=typeof self=="object"&&self&&self.Object===Object&&self,ie=ne||te||Function("return this")(),se=t&&!t.nodeType&&t,Se=se&&!0&&e&&!e.nodeType&&e,Re=Se&&Se.exports===se,Ie=Re&&ne.process,me=function(){try{var p=Se&&Se.require&&Se.require("util").types;return p||Ie&&Ie.binding&&Ie.binding("util")}catch{}}(),Ee=me&&me.isTypedArray;function N(p,x,$){switch($.length){case 0:return p.call(x);case 1:return p.call(x,$[0]);case 2:return p.call(x,$[0],$[1]);case 3:return p.call(x,$[0],$[1],$[2])}return p.apply(x,$)}function L(p,x){for(var $=-1,Y=Array(p);++$<p;)Y[$]=x($);return Y}function j(p){return function(x){return p(x)}}function J(p,x){return p==null?void 0:p[x]}function Q(p,x){return function($){return p(x($))}}var ce=Array.prototype,pe=Function.prototype,ue=Object.prototype,je=ie["__core-js_shared__"],re=pe.toString,Te=ue.hasOwnProperty,tn=function(){var p=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),Vn=ue.toString,Zr=re.call(Object),Kn=RegExp("^"+re.call(Te).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nn=Re?ie.Buffer:void 0,Mt=ie.Symbol,mn=ie.Uint8Array,Bt=nn?nn.allocUnsafe:void 0,Yn=Q(Object.getPrototypeOf,Object),Jn=Object.create,Zn=ue.propertyIsEnumerable,Xr=ce.splice,lt=Mt?Mt.toStringTag:void 0,rn=function(){try{var p=ii(Object,"defineProperty");return p({},"",{}),p}catch{}}(),Xn=nn?nn.isBuffer:void 0,En=Math.max,Qr=Date.now,Sn=ii(ie,"Map"),ut=ii(Object,"create"),ei=function(){function p(){}return function(x){if(!$t(x))return{};if(Jn)return Jn(x);p.prototype=x;var $=new p;return p.prototype=void 0,$}}();function ft(p){var x=-1,$=p==null?0:p.length;for(this.clear();++x<$;){var Y=p[x];this.set(Y[0],Y[1])}}function vn(){this.__data__=ut?ut(null):{},this.size=0}function Qn(p){var x=this.has(p)&&delete this.__data__[p];return this.size-=x?1:0,x}function h(p){var x=this.__data__;if(ut){var $=x[p];return $===r?void 0:$}return Te.call(x,p)?x[p]:void 0}function y(p){var x=this.__data__;return ut?x[p]!==void 0:Te.call(x,p)}function V(p,x){var $=this.__data__;return this.size+=this.has(p)?0:1,$[p]=ut&&x===void 0?r:x,this}ft.prototype.clear=vn,ft.prototype.delete=Qn,ft.prototype.get=h,ft.prototype.has=y,ft.prototype.set=V;function z(p){var x=-1,$=p==null?0:p.length;for(this.clear();++x<$;){var Y=p[x];this.set(Y[0],Y[1])}}function Z(){this.__data__=[],this.size=0}function Oe(p){var x=this.__data__,$=rr(x,p);if($<0)return!1;var Y=x.length-1;return $==Y?x.pop():Xr.call(x,$,1),--this.size,!0}function Be(p){var x=this.__data__,$=rr(x,p);return $<0?void 0:x[$][1]}function er(p){return rr(this.__data__,p)>-1}function ct(p,x){var $=this.__data__,Y=rr($,p);return Y<0?(++this.size,$.push([p,x])):$[Y][1]=x,this}z.prototype.clear=Z,z.prototype.delete=Oe,z.prototype.get=Be,z.prototype.has=er,z.prototype.set=ct;function dt(p){var x=-1,$=p==null?0:p.length;for(this.clear();++x<$;){var Y=p[x];this.set(Y[0],Y[1])}}function ti(){this.size=0,this.__data__={hash:new ft,map:new(Sn||z),string:new ft}}function tr(p){var x=or(this,p).delete(p);return this.size-=x?1:0,x}function nr(p){return or(this,p).get(p)}function An(p){return or(this,p).has(p)}function Rn(p,x){var $=or(this,p),Y=$.size;return $.set(p,x),this.size+=$.size==Y?0:1,this}dt.prototype.clear=ti,dt.prototype.delete=tr,dt.prototype.get=nr,dt.prototype.has=An,dt.prototype.set=Rn;function et(p){var x=this.__data__=new z(p);this.size=x.size}function Dt(){this.__data__=new z,this.size=0}function ht(p){var x=this.__data__,$=x.delete(p);return this.size=x.size,$}function Je(p){return this.__data__.get(p)}function ru(p){return this.__data__.has(p)}function iu(p,x){var $=this.__data__;if($ instanceof z){var Y=$.__data__;if(!Sn||Y.length<n-1)return Y.push([p,x]),this.size=++$.size,this;$=this.__data__=new dt(Y)}return $.set(p,x),this.size=$.size,this}et.prototype.clear=Dt,et.prototype.delete=ht,et.prototype.get=Je,et.prototype.has=ru,et.prototype.set=iu;function ou(p,x){var $=ai(p),Y=!$&&si(p),le=!$&&!Y&&qo(p),de=!$&&!Y&&!le&&Go(p),we=$||Y||le||de,ae=we?L(p.length,String):[],be=ae.length;for(var We in p)(x||Te.call(p,We))&&!(we&&(We=="length"||le&&(We=="offset"||We=="parent")||de&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||Wo(We,be)))&&ae.push(We);return ae}function ni(p,x,$){($!==void 0&&!sr(p[x],$)||$===void 0&&!(x in p))&&ri(p,x,$)}function su(p,x,$){var Y=p[x];(!(Te.call(p,x)&&sr(Y,$))||$===void 0&&!(x in p))&&ri(p,x,$)}function rr(p,x){for(var $=p.length;$--;)if(sr(p[$][0],x))return $;return-1}function ri(p,x,$){x=="__proto__"&&rn?rn(p,x,{configurable:!0,enumerable:!0,value:$,writable:!0}):p[x]=$}var au=mu();function ir(p){return p==null?p===void 0?K:O:lt&&lt in Object(p)?Eu(p):Tu(p)}function jo(p){return In(p)&&ir(p)==l}function lu(p){if(!$t(p)||Ru(p))return!1;var x=ui(p)?Kn:q;return x.test(Cu(p))}function uu(p){return In(p)&&Ho(p.length)&&!!U[ir(p)]}function fu(p){if(!$t(p))return Iu(p);var x=Fo(p),$=[];for(var Y in p)Y=="constructor"&&(x||!Te.call(p,Y))||$.push(Y);return $}function Uo(p,x,$,Y,le){p!==x&&au(x,function(de,we){if(le||(le=new et),$t(de))cu(p,x,we,$,Uo,Y,le);else{var ae=Y?Y(oi(p,we),de,we+"",p,x,le):void 0;ae===void 0&&(ae=de),ni(p,we,ae)}},zo)}function cu(p,x,$,Y,le,de,we){var ae=oi(p,$),be=oi(x,$),We=we.get(be);if(We){ni(p,$,We);return}var Ue=de?de(ae,be,$+"",p,x,we):void 0,Tn=Ue===void 0;if(Tn){var fi=ai(be),ci=!fi&&qo(be),Ko=!fi&&!ci&&Go(be);Ue=be,fi||ci||Ko?ai(ae)?Ue=ae:Lu(ae)?Ue=bu(ae):ci?(Tn=!1,Ue=gu(be,!0)):Ko?(Tn=!1,Ue=wu(be,!0)):Ue=[]:Pu(be)||si(be)?(Ue=ae,si(ae)?Ue=Mu(ae):(!$t(ae)||ui(ae))&&(Ue=Su(be))):Tn=!1}Tn&&(we.set(be,Ue),le(Ue,be,Y,de,we),we.delete(be)),ni(p,$,Ue)}function du(p,x){return xu(Ou(p,x,Vo),p+"")}var hu=rn?function(p,x){return rn(p,"toString",{configurable:!0,enumerable:!1,value:Du(x),writable:!0})}:Vo;function gu(p,x){if(x)return p.slice();var $=p.length,Y=Bt?Bt($):new p.constructor($);return p.copy(Y),Y}function pu(p){var x=new p.constructor(p.byteLength);return new mn(x).set(new mn(p)),x}function wu(p,x){var $=x?pu(p.buffer):p.buffer;return new p.constructor($,p.byteOffset,p.length)}function bu(p,x){var $=-1,Y=p.length;for(x||(x=Array(Y));++$<Y;)x[$]=p[$];return x}function yu(p,x,$,Y){var le=!$;$||($={});for(var de=-1,we=x.length;++de<we;){var ae=x[de],be=Y?Y($[ae],p[ae],ae,$,p):void 0;be===void 0&&(be=p[ae]),le?ri($,ae,be):su($,ae,be)}return $}function _u(p){return du(function(x,$){var Y=-1,le=$.length,de=le>1?$[le-1]:void 0,we=le>2?$[2]:void 0;for(de=p.length>3&&typeof de=="function"?(le--,de):void 0,we&&vu($[0],$[1],we)&&(de=le<3?void 0:de,le=1),x=Object(x);++Y<le;){var ae=$[Y];ae&&p(x,ae,Y,de)}return x})}function mu(p){return function(x,$,Y){for(var le=-1,de=Object(x),we=Y(x),ae=we.length;ae--;){var be=we[p?ae:++le];if($(de[be],be,de)===!1)break}return x}}function or(p,x){var $=p.__data__;return Au(x)?$[typeof x=="string"?"string":"hash"]:$.map}function ii(p,x){var $=J(p,x);return lu($)?$:void 0}function Eu(p){var x=Te.call(p,lt),$=p[lt];try{p[lt]=void 0;var Y=!0}catch{}var le=Vn.call(p);return Y&&(x?p[lt]=$:delete p[lt]),le}function Su(p){return typeof p.constructor=="function"&&!Fo(p)?ei(Yn(p)):{}}function Wo(p,x){var $=typeof p;return x=x??s,!!x&&($=="number"||$!="symbol"&&X.test(p))&&p>-1&&p%1==0&&p<x}function vu(p,x,$){if(!$t($))return!1;var Y=typeof x;return(Y=="number"?li($)&&Wo(x,$.length):Y=="string"&&x in $)?sr($[x],p):!1}function Au(p){var x=typeof p;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?p!=="__proto__":p===null}function Ru(p){return!!tn&&tn in p}function Fo(p){var x=p&&p.constructor,$=typeof x=="function"&&x.prototype||ue;return p===$}function Iu(p){var x=[];if(p!=null)for(var $ in Object(p))x.push($);return x}function Tu(p){return Vn.call(p)}function Ou(p,x,$){return x=En(x===void 0?p.length-1:x,0),function(){for(var Y=arguments,le=-1,de=En(Y.length-x,0),we=Array(de);++le<de;)we[le]=Y[x+le];le=-1;for(var ae=Array(x+1);++le<x;)ae[le]=Y[le];return ae[x]=$(we),N(p,this,ae)}}function oi(p,x){if(!(x==="constructor"&&typeof p[x]=="function")&&x!="__proto__")return p[x]}var xu=Nu(hu);function Nu(p){var x=0,$=0;return function(){var Y=Qr(),le=o-(Y-$);if($=Y,le>0){if(++x>=i)return arguments[0]}else x=0;return p.apply(void 0,arguments)}}function Cu(p){if(p!=null){try{return re.call(p)}catch{}try{return p+""}catch{}}return""}function sr(p,x){return p===x||p!==p&&x!==x}var si=jo(function(){return arguments}())?jo:function(p){return In(p)&&Te.call(p,"callee")&&!Zn.call(p,"callee")},ai=Array.isArray;function li(p){return p!=null&&Ho(p.length)&&!ui(p)}function Lu(p){return In(p)&&li(p)}var qo=Xn||$u;function ui(p){if(!$t(p))return!1;var x=ir(p);return x==B||x==k||x==u||x==M}function Ho(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=s}function $t(p){var x=typeof p;return p!=null&&(x=="object"||x=="function")}function In(p){return p!=null&&typeof p=="object"}function Pu(p){if(!In(p)||ir(p)!=I)return!1;var x=Yn(p);if(x===null)return!0;var $=Te.call(x,"constructor")&&x.constructor;return typeof $=="function"&&$ instanceof $&&re.call($)==Zr}var Go=Ee?j(Ee):uu;function Mu(p){return yu(p,zo(p))}function zo(p){return li(p)?ou(p,!0):fu(p)}var Bu=_u(function(p,x,$){Uo(p,x,$)});function Du(p){return function(){return p}}function Vo(p){return p}function $u(){return!1}e.exports=Bu})(Tr,Tr.exports);Tr.exports;var Ml={exports:{}};(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(sn,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},s=null;function l(_,T){var O=_[T];if(typeof O.bind=="function")return O.bind(_);try{return Function.prototype.bind.call(O,_)}catch{return function(){return Function.prototype.apply.apply(O,[_,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function u(_){return _==="debug"&&(_="log"),typeof console===n?!1:_==="trace"&&r?c:console[_]!==void 0?l(console,_):console.log!==void 0?l(console,"log"):t}function S(){for(var _=this.getLevel(),T=0;T<i.length;T++){var O=i[T];this[O]=T<_?t:this.methodFactory(O,_,this.name)}if(this.log=this.debug,typeof console===n&&_<this.levels.SILENT)return"No console available for logging"}function v(_){return function(){typeof console!==n&&(S.call(this),this[_].apply(this,arguments))}}function P(_,T,O){return u(_)||v.apply(this,arguments)}function B(_,T){var O=this,I,M,H,W="loglevel";typeof _=="string"?W+=":"+_:typeof _=="symbol"&&(W=void 0);function G(E){var m=(i[E]||"silent").toUpperCase();if(!(typeof window===n||!W)){try{window.localStorage[W]=m;return}catch{}try{window.document.cookie=encodeURIComponent(W)+"="+m+";"}catch{}}}function K(){var E;if(!(typeof window===n||!W)){try{E=window.localStorage[W]}catch{}if(typeof E===n)try{var m=window.document.cookie,g=encodeURIComponent(W),C=m.indexOf(g+"=");C!==-1&&(E=/^([^;]+)/.exec(m.slice(C+g.length+1))[1])}catch{}return O.levels[E]===void 0&&(E=void 0),E}}function a(){if(!(typeof window===n||!W)){try{window.localStorage.removeItem(W)}catch{}try{window.document.cookie=encodeURIComponent(W)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function d(E){var m=E;if(typeof m=="string"&&O.levels[m.toUpperCase()]!==void 0&&(m=O.levels[m.toUpperCase()]),typeof m=="number"&&m>=0&&m<=O.levels.SILENT)return m;throw new TypeError("log.setLevel() called with invalid level: "+E)}O.name=_,O.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},O.methodFactory=T||P,O.getLevel=function(){return H??M??I},O.setLevel=function(E,m){return H=d(E),m!==!1&&G(H),S.call(O)},O.setDefaultLevel=function(E){M=d(E),K()||O.setLevel(E,!1)},O.resetLevel=function(){H=null,a(),S.call(O)},O.enableAll=function(E){O.setLevel(O.levels.TRACE,E)},O.disableAll=function(E){O.setLevel(O.levels.SILENT,E)},O.rebuild=function(){if(s!==O&&(I=d(s.getLevel())),S.call(O),s===O)for(var E in o)o[E].rebuild()},I=d(s?s.getLevel():"WARN");var b=K();b!=null&&(H=d(b)),S.call(O)}s=new B,s.getLogger=function(T){if(typeof T!="symbol"&&typeof T!="string"||T==="")throw new TypeError("You must supply a name when creating a logger.");var O=o[T];return O||(O=o[T]=new B(T,s.methodFactory)),O};var k=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=k),s},s.getLoggers=function(){return o},s.default=s,s})})(Ml);var Bl=Ml.exports;const Or=wn(Bl),tg=Or.getLogger("http-helpers");tg.setLevel(Bl.levels.INFO);function na(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function ng(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Gr(e,...t){if(!ng(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function rg(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");na(e.outputLen),na(e.blockLen)}function xr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ig(e,t){Gr(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Li=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pi=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),tt=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function og(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function To(e){return typeof e=="string"&&(e=og(e)),Gr(e),e}function sg(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];Gr(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}class Dl{clone(){return this._cloneInto()}}function ag(e){const t=r=>e().update(To(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function lg(e=32){if(Li&&typeof Li.getRandomValues=="function")return Li.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function ug(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),l=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,l,r)}const fg=(e,t,n)=>e&t^~e&n,cg=(e,t,n)=>e&t^e&n^t&n;class dg extends Dl{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Pi(this.buffer)}update(t){xr(this);const{view:n,buffer:r,blockLen:i}=this;t=To(t);const o=t.length;for(let s=0;s<o;){const l=Math.min(i-this.pos,o-s);if(l===i){const c=Pi(t);for(;i<=o-s;s+=i)this.process(c,s);continue}r.set(t.subarray(s,s+l),this.pos),this.pos+=l,s+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){xr(this),ig(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let v=s;v<i;v++)n[v]=0;ug(r,i-8,BigInt(this.length*8),o),this.process(r,0);const l=Pi(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,S=this.get();if(u>S.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<u;v++)l.setUint32(4*v,S[v],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:l}=this;return t.length=i,t.pos=l,t.finished=o,t.destroyed=s,i%n&&t.buffer.set(r),t}}const hg=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Rt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),It=new Uint32Array(64);class gg extends dg{constructor(){super(64,32,8,!1),this.A=Rt[0]|0,this.B=Rt[1]|0,this.C=Rt[2]|0,this.D=Rt[3]|0,this.E=Rt[4]|0,this.F=Rt[5]|0,this.G=Rt[6]|0,this.H=Rt[7]|0}get(){const{A:t,B:n,C:r,D:i,E:o,F:s,G:l,H:c}=this;return[t,n,r,i,o,s,l,c]}set(t,n,r,i,o,s,l,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=l|0,this.H=c|0}process(t,n){for(let v=0;v<16;v++,n+=4)It[v]=t.getUint32(n,!1);for(let v=16;v<64;v++){const P=It[v-15],B=It[v-2],k=tt(P,7)^tt(P,18)^P>>>3,_=tt(B,17)^tt(B,19)^B>>>10;It[v]=_+It[v-7]+k+It[v-16]|0}let{A:r,B:i,C:o,D:s,E:l,F:c,G:u,H:S}=this;for(let v=0;v<64;v++){const P=tt(l,6)^tt(l,11)^tt(l,25),B=S+P+fg(l,c,u)+hg[v]+It[v]|0,_=(tt(r,2)^tt(r,13)^tt(r,22))+cg(r,i,o)|0;S=u,u=c,c=l,l=s+B|0,s=o,o=i,i=r,r=B+_|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,l=l+this.E|0,c=c+this.F|0,u=u+this.G|0,S=S+this.H|0,this.set(r,i,o,s,l,c,u,S)}roundClean(){It.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const pg=ag(()=>new gg);class $l extends Dl{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,rg(t);const r=To(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?t.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return xr(this),this.iHash.update(t),this}digestInto(t){xr(this),Gr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:l}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=l,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const kl=(e,t,n)=>new $l(e,t).update(n).digest();kl.create=(e,t)=>new $l(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jl=BigInt(0),zr=BigInt(1),wg=BigInt(2);function Yt(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Hn(e){if(!Yt(e))throw new Error("Uint8Array expected")}const bg=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function hn(e){Hn(e);let t="";for(let n=0;n<e.length;n++)t+=bg[e[n]];return t}function Ul(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Oo(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const gt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function ra(e){if(e>=gt._0&&e<=gt._9)return e-gt._0;if(e>=gt._A&&e<=gt._F)return e-(gt._A-10);if(e>=gt._a&&e<=gt._f)return e-(gt._a-10)}function gn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=ra(e.charCodeAt(o)),l=ra(e.charCodeAt(o+1));if(s===void 0||l===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[i]=s*16+l}return r}function zt(e){return Oo(hn(e))}function xo(e){return Hn(e),Oo(hn(Uint8Array.from(e).reverse()))}function pn(e,t){return gn(e.toString(16).padStart(t*2,"0"))}function No(e,t){return pn(e,t).reverse()}function yg(e){return gn(Ul(e))}function Xe(e,t,n){let r;if(typeof t=="string")try{r=gn(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(Yt(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function jn(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];Hn(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}function _g(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function mg(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Eg(e){let t;for(t=0;e>jl;e>>=zr,t+=1);return t}function Sg(e,t){return e>>BigInt(t)&zr}function vg(e,t,n){return e|(n?zr:jl)<<BigInt(t)}const Co=e=>(wg<<BigInt(e-1))-zr,Mi=e=>new Uint8Array(e),ia=e=>Uint8Array.from(e);function Wl(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Mi(e),i=Mi(e),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},l=(...v)=>n(i,r,...v),c=(v=Mi())=>{i=l(ia([0]),v),r=l(),v.length!==0&&(i=l(ia([1]),v),r=l())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let v=0;const P=[];for(;v<t;){r=l();const B=r.slice();P.push(B),v+=r.length}return jn(...P)};return(v,P)=>{s(),c(v);let B;for(;!(B=P(u()));)c();return s(),B}}const Ag={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Yt(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Gn(e,t,n={}){const r=(i,o,s)=>{const l=Ag[o];if(typeof l!="function")throw new Error(`Invalid validator "${o}", expected function`);const c=e[i];if(!(s&&c===void 0)&&!l(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}const Rg=Object.freeze(Object.defineProperty({__proto__:null,abytes:Hn,bitGet:Sg,bitLen:Eg,bitMask:Co,bitSet:vg,bytesToHex:hn,bytesToNumberBE:zt,bytesToNumberLE:xo,concatBytes:jn,createHmacDrbg:Wl,ensureBytes:Xe,equalBytes:_g,hexToBytes:gn,hexToNumber:Oo,isBytes:Yt,numberToBytesBE:pn,numberToBytesLE:No,numberToHexUnpadded:Ul,numberToVarBytesBE:yg,utf8ToBytes:mg,validateObject:Gn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ne=BigInt(0),ve=BigInt(1),Wt=BigInt(2),Ig=BigInt(3),io=BigInt(4),oa=BigInt(5),sa=BigInt(8);BigInt(9);BigInt(16);function $e(e,t){const n=e%t;return n>=Ne?n:t+n}function Tg(e,t,n){if(n<=Ne||t<Ne)throw new Error("Expected power/modulo > 0");if(n===ve)return Ne;let r=ve;for(;t>Ne;)t&ve&&(r=r*e%n),e=e*e%n,t>>=ve;return r}function Fe(e,t,n){let r=e;for(;t-- >Ne;)r*=r,r%=n;return r}function oo(e,t){if(e===Ne||t<=Ne)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=$e(e,t),r=t,i=Ne,o=ve;for(;n!==Ne;){const l=r/n,c=r%n,u=i-o*l;r=n,n=c,i=o,o=u}if(r!==ve)throw new Error("invert: does not exist");return $e(i,t)}function Og(e){const t=(e-ve)/Wt;let n,r,i;for(n=e-ve,r=0;n%Wt===Ne;n/=Wt,r++);for(i=Wt;i<e&&Tg(i,t,e)!==e-ve;i++);if(r===1){const s=(e+ve)/io;return function(c,u){const S=c.pow(u,s);if(!c.eql(c.sqr(S),u))throw new Error("Cannot find square root");return S}}const o=(n+ve)/Wt;return function(l,c){if(l.pow(c,t)===l.neg(l.ONE))throw new Error("Cannot find square root");let u=r,S=l.pow(l.mul(l.ONE,i),n),v=l.pow(c,o),P=l.pow(c,n);for(;!l.eql(P,l.ONE);){if(l.eql(P,l.ZERO))return l.ZERO;let B=1;for(let _=l.sqr(P);B<u&&!l.eql(_,l.ONE);B++)_=l.sqr(_);const k=l.pow(S,ve<<BigInt(u-B-1));S=l.sqr(k),v=l.mul(v,k),P=l.mul(P,S),u=B}return v}}function xg(e){if(e%io===Ig){const t=(e+ve)/io;return function(r,i){const o=r.pow(i,t);if(!r.eql(r.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%sa===oa){const t=(e-oa)/sa;return function(r,i){const o=r.mul(i,Wt),s=r.pow(o,t),l=r.mul(i,s),c=r.mul(r.mul(l,Wt),s),u=r.mul(l,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),i))throw new Error("Cannot find square root");return u}}return Og(e)}const Ng=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Cg(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Ng.reduce((r,i)=>(r[i]="function",r),t);return Gn(e,n)}function Lg(e,t,n){if(n<Ne)throw new Error("Expected power > 0");if(n===Ne)return e.ONE;if(n===ve)return t;let r=e.ONE,i=t;for(;n>Ne;)n&ve&&(r=e.mul(r,i)),i=e.sqr(i),n>>=ve;return r}function Pg(e,t){const n=new Array(t.length),r=t.reduce((o,s,l)=>e.is0(s)?o:(n[l]=o,e.mul(o,s)),e.ONE),i=e.inv(r);return t.reduceRight((o,s,l)=>e.is0(s)?o:(n[l]=e.mul(o,n[l]),e.mul(o,s)),i),n}function Fl(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Mg(e,t,n=!1,r={}){if(e<=Ne)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=Fl(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=xg(e),l=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Co(i),ZERO:Ne,ONE:ve,create:c=>$e(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Ne<=c&&c<e},is0:c=>c===Ne,isOdd:c=>(c&ve)===ve,neg:c=>$e(-c,e),eql:(c,u)=>c===u,sqr:c=>$e(c*c,e),add:(c,u)=>$e(c+u,e),sub:(c,u)=>$e(c-u,e),mul:(c,u)=>$e(c*u,e),pow:(c,u)=>Lg(l,c,u),div:(c,u)=>$e(c*oo(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>oo(c,e),sqrt:r.sqrt||(c=>s(l,c)),invertBatch:c=>Pg(l,c),cmov:(c,u,S)=>S?u:c,toBytes:c=>n?No(c,o):pn(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return n?xo(c):zt(c)}});return Object.freeze(l)}function ql(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Hl(e){const t=ql(e);return t+Math.ceil(t/2)}function Bg(e,t,n=!1){const r=e.length,i=ql(t),o=Hl(t);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const s=n?zt(e):xo(e),l=$e(s,t-ve)+ve;return n?No(l,i):pn(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dg=BigInt(0),Bi=BigInt(1);function $g(e,t){const n=(i,o)=>{const s=o.negate();return i?s:o},r=i=>{const o=Math.ceil(t/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:n,unsafeLadder(i,o){let s=e.ZERO,l=i;for(;o>Dg;)o&Bi&&(s=s.add(l)),l=l.double(),o>>=Bi;return s},precomputeWindow(i,o){const{windows:s,windowSize:l}=r(o),c=[];let u=i,S=u;for(let v=0;v<s;v++){S=u,c.push(S);for(let P=1;P<l;P++)S=S.add(u),c.push(S);u=S.double()}return c},wNAF(i,o,s){const{windows:l,windowSize:c}=r(i);let u=e.ZERO,S=e.BASE;const v=BigInt(2**i-1),P=2**i,B=BigInt(i);for(let k=0;k<l;k++){const _=k*c;let T=Number(s&v);s>>=B,T>c&&(T-=P,s+=Bi);const O=_,I=_+Math.abs(T)-1,M=k%2!==0,H=T<0;T===0?S=S.add(n(M,o[O])):u=u.add(n(H,o[I]))}return{p:u,f:S}},wNAFCached(i,o,s,l){const c=i._WINDOW_SIZE||1;let u=o.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&o.set(i,l(u))),this.wNAF(c,u,s)}}}function Gl(e){return Cg(e.Fp),Gn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Fl(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function kg(e){const t=Gl(e);Gn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:jg,hexToBytes:Ug}=Rg,Ht={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Ht;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:jg(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Ht,n=typeof e=="string"?Ug(e):e;Hn(n);let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=Ht._parseInt(n.subarray(2)),{d:s,l}=Ht._parseInt(o);if(l.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){const t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,n=u=>{const S=u.toString(16);return S.length&1?`0${S}`:S},r=t(n(e.s)),i=t(n(e.r)),o=r.length/2,s=i.length/2,l=n(o),c=n(s);return`30${n(s+o+4)}02${c}${i}02${l}${r}`}},bt=BigInt(0),Ve=BigInt(1);BigInt(2);const aa=BigInt(3);BigInt(4);function Wg(e){const t=kg(e),{Fp:n}=t,r=t.toBytes||((k,_,T)=>{const O=_.toAffine();return jn(Uint8Array.from([4]),n.toBytes(O.x),n.toBytes(O.y))}),i=t.fromBytes||(k=>{const _=k.subarray(1),T=n.fromBytes(_.subarray(0,n.BYTES)),O=n.fromBytes(_.subarray(n.BYTES,2*n.BYTES));return{x:T,y:O}});function o(k){const{a:_,b:T}=t,O=n.sqr(k),I=n.mul(O,k);return n.add(n.add(I,n.mul(k,_)),T)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(k){return typeof k=="bigint"&&bt<k&&k<t.n}function l(k){if(!s(k))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(k){const{allowedPrivateKeyLengths:_,nByteLength:T,wrapPrivateKey:O,n:I}=t;if(_&&typeof k!="bigint"){if(Yt(k)&&(k=hn(k)),typeof k!="string"||!_.includes(k.length))throw new Error("Invalid key");k=k.padStart(T*2,"0")}let M;try{M=typeof k=="bigint"?k:zt(Xe("private key",k,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof k}`)}return O&&(M=$e(M,I)),l(M),M}const u=new Map;function S(k){if(!(k instanceof v))throw new Error("ProjectivePoint expected")}class v{constructor(_,T,O){if(this.px=_,this.py=T,this.pz=O,_==null||!n.isValid(_))throw new Error("x required");if(T==null||!n.isValid(T))throw new Error("y required");if(O==null||!n.isValid(O))throw new Error("z required")}static fromAffine(_){const{x:T,y:O}=_||{};if(!_||!n.isValid(T)||!n.isValid(O))throw new Error("invalid affine point");if(_ instanceof v)throw new Error("projective point not allowed");const I=M=>n.eql(M,n.ZERO);return I(T)&&I(O)?v.ZERO:new v(T,O,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){const T=n.invertBatch(_.map(O=>O.pz));return _.map((O,I)=>O.toAffine(T[I])).map(v.fromAffine)}static fromHex(_){const T=v.fromAffine(i(Xe("pointHex",_)));return T.assertValidity(),T}static fromPrivateKey(_){return v.BASE.multiply(c(_))}_setWindowSize(_){this._WINDOW_SIZE=_,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:_,y:T}=this.toAffine();if(!n.isValid(_)||!n.isValid(T))throw new Error("bad point: x or y not FE");const O=n.sqr(T),I=o(_);if(!n.eql(O,I))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:_}=this.toAffine();if(n.isOdd)return!n.isOdd(_);throw new Error("Field doesn't support isOdd")}equals(_){S(_);const{px:T,py:O,pz:I}=this,{px:M,py:H,pz:W}=_,G=n.eql(n.mul(T,W),n.mul(M,I)),K=n.eql(n.mul(O,W),n.mul(H,I));return G&&K}negate(){return new v(this.px,n.neg(this.py),this.pz)}double(){const{a:_,b:T}=t,O=n.mul(T,aa),{px:I,py:M,pz:H}=this;let W=n.ZERO,G=n.ZERO,K=n.ZERO,a=n.mul(I,I),d=n.mul(M,M),b=n.mul(H,H),E=n.mul(I,M);return E=n.add(E,E),K=n.mul(I,H),K=n.add(K,K),W=n.mul(_,K),G=n.mul(O,b),G=n.add(W,G),W=n.sub(d,G),G=n.add(d,G),G=n.mul(W,G),W=n.mul(E,W),K=n.mul(O,K),b=n.mul(_,b),E=n.sub(a,b),E=n.mul(_,E),E=n.add(E,K),K=n.add(a,a),a=n.add(K,a),a=n.add(a,b),a=n.mul(a,E),G=n.add(G,a),b=n.mul(M,H),b=n.add(b,b),a=n.mul(b,E),W=n.sub(W,a),K=n.mul(b,d),K=n.add(K,K),K=n.add(K,K),new v(W,G,K)}add(_){S(_);const{px:T,py:O,pz:I}=this,{px:M,py:H,pz:W}=_;let G=n.ZERO,K=n.ZERO,a=n.ZERO;const d=t.a,b=n.mul(t.b,aa);let E=n.mul(T,M),m=n.mul(O,H),g=n.mul(I,W),C=n.add(T,O),f=n.add(M,H);C=n.mul(C,f),f=n.add(E,m),C=n.sub(C,f),f=n.add(T,I);let w=n.add(M,W);return f=n.mul(f,w),w=n.add(E,g),f=n.sub(f,w),w=n.add(O,I),G=n.add(H,W),w=n.mul(w,G),G=n.add(m,g),w=n.sub(w,G),a=n.mul(d,f),G=n.mul(b,g),a=n.add(G,a),G=n.sub(m,a),a=n.add(m,a),K=n.mul(G,a),m=n.add(E,E),m=n.add(m,E),g=n.mul(d,g),f=n.mul(b,f),m=n.add(m,g),g=n.sub(E,g),g=n.mul(d,g),f=n.add(f,g),E=n.mul(m,f),K=n.add(K,E),E=n.mul(w,f),G=n.mul(C,G),G=n.sub(G,E),E=n.mul(C,m),a=n.mul(w,a),a=n.add(a,E),new v(G,K,a)}subtract(_){return this.add(_.negate())}is0(){return this.equals(v.ZERO)}wNAF(_){return B.wNAFCached(this,u,_,T=>{const O=n.invertBatch(T.map(I=>I.pz));return T.map((I,M)=>I.toAffine(O[M])).map(v.fromAffine)})}multiplyUnsafe(_){const T=v.ZERO;if(_===bt)return T;if(l(_),_===Ve)return this;const{endo:O}=t;if(!O)return B.unsafeLadder(this,_);let{k1neg:I,k1:M,k2neg:H,k2:W}=O.splitScalar(_),G=T,K=T,a=this;for(;M>bt||W>bt;)M&Ve&&(G=G.add(a)),W&Ve&&(K=K.add(a)),a=a.double(),M>>=Ve,W>>=Ve;return I&&(G=G.negate()),H&&(K=K.negate()),K=new v(n.mul(K.px,O.beta),K.py,K.pz),G.add(K)}multiply(_){l(_);let T=_,O,I;const{endo:M}=t;if(M){const{k1neg:H,k1:W,k2neg:G,k2:K}=M.splitScalar(T);let{p:a,f:d}=this.wNAF(W),{p:b,f:E}=this.wNAF(K);a=B.constTimeNegate(H,a),b=B.constTimeNegate(G,b),b=new v(n.mul(b.px,M.beta),b.py,b.pz),O=a.add(b),I=d.add(E)}else{const{p:H,f:W}=this.wNAF(T);O=H,I=W}return v.normalizeZ([O,I])[0]}multiplyAndAddUnsafe(_,T,O){const I=v.BASE,M=(W,G)=>G===bt||G===Ve||!W.equals(I)?W.multiplyUnsafe(G):W.multiply(G),H=M(this,T).add(M(_,O));return H.is0()?void 0:H}toAffine(_){const{px:T,py:O,pz:I}=this,M=this.is0();_==null&&(_=M?n.ONE:n.inv(I));const H=n.mul(T,_),W=n.mul(O,_),G=n.mul(I,_);if(M)return{x:n.ZERO,y:n.ZERO};if(!n.eql(G,n.ONE))throw new Error("invZ was invalid");return{x:H,y:W}}isTorsionFree(){const{h:_,isTorsionFree:T}=t;if(_===Ve)return!0;if(T)return T(v,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:_,clearCofactor:T}=t;return _===Ve?this:T?T(v,this):this.multiplyUnsafe(t.h)}toRawBytes(_=!0){return this.assertValidity(),r(v,this,_)}toHex(_=!0){return hn(this.toRawBytes(_))}}v.BASE=new v(t.Gx,t.Gy,n.ONE),v.ZERO=new v(n.ZERO,n.ONE,n.ZERO);const P=t.nBitLength,B=$g(v,t.endo?Math.ceil(P/2):P);return{CURVE:t,ProjectivePoint:v,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function Fg(e){const t=Gl(e);return Gn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function qg(e){const t=Fg(e),{Fp:n,n:r}=t,i=n.BYTES+1,o=2*n.BYTES+1;function s(f){return bt<f&&f<n.ORDER}function l(f){return $e(f,r)}function c(f){return oo(f,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:S,weierstrassEquation:v,isWithinCurveOrder:P}=Wg({...t,toBytes(f,w,A){const R=w.toAffine(),D=n.toBytes(R.x),F=jn;return A?F(Uint8Array.from([w.hasEvenY()?2:3]),D):F(Uint8Array.from([4]),D,n.toBytes(R.y))},fromBytes(f){const w=f.length,A=f[0],R=f.subarray(1);if(w===i&&(A===2||A===3)){const D=zt(R);if(!s(D))throw new Error("Point is not on curve");const F=v(D);let q;try{q=n.sqrt(F)}catch(ne){const te=ne instanceof Error?": "+ne.message:"";throw new Error("Point is not on curve"+te)}const X=(q&Ve)===Ve;return(A&1)===1!==X&&(q=n.neg(q)),{x:D,y:q}}else if(w===o&&A===4){const D=n.fromBytes(R.subarray(0,n.BYTES)),F=n.fromBytes(R.subarray(n.BYTES,2*n.BYTES));return{x:D,y:F}}else throw new Error(`Point of length ${w} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),B=f=>hn(pn(f,t.nByteLength));function k(f){const w=r>>Ve;return f>w}function _(f){return k(f)?l(-f):f}const T=(f,w,A)=>zt(f.slice(w,A));class O{constructor(w,A,R){this.r=w,this.s=A,this.recovery=R,this.assertValidity()}static fromCompact(w){const A=t.nByteLength;return w=Xe("compactSignature",w,A*2),new O(T(w,0,A),T(w,A,2*A))}static fromDER(w){const{r:A,s:R}=Ht.toSig(Xe("DER",w));return new O(A,R)}assertValidity(){if(!P(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!P(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(w){return new O(this.r,this.s,w)}recoverPublicKey(w){const{r:A,s:R,recovery:D}=this,F=K(Xe("msgHash",w));if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");const q=D===2||D===3?A+t.n:A;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const X=D&1?"03":"02",U=u.fromHex(X+B(q)),ne=c(q),te=l(-F*ne),ie=l(R*ne),se=u.BASE.multiplyAndAddUnsafe(U,te,ie);if(!se)throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return k(this.s)}normalizeS(){return this.hasHighS()?new O(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return gn(this.toDERHex())}toDERHex(){return Ht.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return gn(this.toCompactHex())}toCompactHex(){return B(this.r)+B(this.s)}}const I={isValidPrivateKey(f){try{return S(f),!0}catch{return!1}},normPrivateKeyToScalar:S,randomPrivateKey:()=>{const f=Hl(t.n);return Bg(t.randomBytes(f),t.n)},precompute(f=8,w=u.BASE){return w._setWindowSize(f),w.multiply(BigInt(3)),w}};function M(f,w=!0){return u.fromPrivateKey(f).toRawBytes(w)}function H(f){const w=Yt(f),A=typeof f=="string",R=(w||A)&&f.length;return w?R===i||R===o:A?R===2*i||R===2*o:f instanceof u}function W(f,w,A=!0){if(H(f))throw new Error("first arg must be private key");if(!H(w))throw new Error("second arg must be public key");return u.fromHex(w).multiply(S(f)).toRawBytes(A)}const G=t.bits2int||function(f){const w=zt(f),A=f.length*8-t.nBitLength;return A>0?w>>BigInt(A):w},K=t.bits2int_modN||function(f){return l(G(f))},a=Co(t.nBitLength);function d(f){if(typeof f!="bigint")throw new Error("bigint expected");if(!(bt<=f&&f<a))throw new Error(`bigint expected < 2^${t.nBitLength}`);return pn(f,t.nByteLength)}function b(f,w,A=E){if(["recovered","canonical"].some(Re=>Re in A))throw new Error("sign() legacy options not supported");const{hash:R,randomBytes:D}=t;let{lowS:F,prehash:q,extraEntropy:X}=A;F==null&&(F=!0),f=Xe("msgHash",f),q&&(f=Xe("prehashed msgHash",R(f)));const U=K(f),ne=S(w),te=[d(ne),d(U)];if(X!=null&&X!==!1){const Re=X===!0?D(n.BYTES):X;te.push(Xe("extraEntropy",Re))}const ie=jn(...te),se=U;function Se(Re){const Ie=G(Re);if(!P(Ie))return;const me=c(Ie),Ee=u.BASE.multiply(Ie).toAffine(),N=l(Ee.x);if(N===bt)return;const L=l(me*l(se+N*ne));if(L===bt)return;let j=(Ee.x===N?0:2)|Number(Ee.y&Ve),J=L;return F&&k(L)&&(J=_(L),j^=1),new O(N,J,j)}return{seed:ie,k2sig:Se}}const E={lowS:t.lowS,prehash:!1},m={lowS:t.lowS,prehash:!1};function g(f,w,A=E){const{seed:R,k2sig:D}=b(f,w,A),F=t;return Wl(F.hash.outputLen,F.nByteLength,F.hmac)(R,D)}u.BASE._setWindowSize(8);function C(f,w,A,R=m){var Ee;const D=f;if(w=Xe("msgHash",w),A=Xe("publicKey",A),"strict"in R)throw new Error("options.strict was renamed to lowS");const{lowS:F,prehash:q}=R;let X,U;try{if(typeof D=="string"||Yt(D))try{X=O.fromDER(D)}catch(N){if(!(N instanceof Ht.Err))throw N;X=O.fromCompact(D)}else if(typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint"){const{r:N,s:L}=D;X=new O(N,L)}else throw new Error("PARSE");U=u.fromHex(A)}catch(N){if(N.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(F&&X.hasHighS())return!1;q&&(w=t.hash(w));const{r:ne,s:te}=X,ie=K(w),se=c(te),Se=l(ie*se),Re=l(ne*se),Ie=(Ee=u.BASE.multiplyAndAddUnsafe(U,Se,Re))==null?void 0:Ee.toAffine();return Ie?l(Ie.x)===ne:!1}return{CURVE:t,getPublicKey:M,getSharedSecret:W,sign:g,verify:C,ProjectivePoint:u,Signature:O,utils:I}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Hg(e){return{hash:e,hmac:(t,...n)=>kl(e,t,sg(...n)),randomBytes:lg}}function Gg(e,t){const n=r=>qg({...e,...Hg(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zl=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),la=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),zg=BigInt(1),so=BigInt(2),ua=(e,t)=>(e+t/so)/t;function Vg(e){const t=zl,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),l=BigInt(44),c=BigInt(88),u=e*e*e%t,S=u*u*e%t,v=Fe(S,n,t)*S%t,P=Fe(v,n,t)*S%t,B=Fe(P,so,t)*u%t,k=Fe(B,i,t)*B%t,_=Fe(k,o,t)*k%t,T=Fe(_,l,t)*_%t,O=Fe(T,c,t)*T%t,I=Fe(O,l,t)*_%t,M=Fe(I,n,t)*S%t,H=Fe(M,s,t)*k%t,W=Fe(H,r,t)*u%t,G=Fe(W,so,t);if(!ao.eql(ao.sqr(G),e))throw new Error("Cannot find square root");return G}const ao=Mg(zl,void 0,void 0,{sqrt:Vg}),Lo=Gg({a:BigInt(0),b:BigInt(7),Fp:ao,n:la,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=la,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-zg*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),l=ua(o*e,t),c=ua(-r*e,t);let u=$e(e-l*n-c*i,t),S=$e(-l*r-c*o,t);const v=u>s,P=S>s;if(v&&(u=t-u),P&&(S=t-S),u>s||S>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:v,k1:u,k2neg:P,k2:S}}}},pg);BigInt(0);Lo.ProjectivePoint;function Kg(e){let t=e;if(typeof t!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof t}`);return t.length%2&&(t=`0${t}`),t}BigInt(0);const lo={},uo={};for(let e=0;e<16;e++){const t=e,n=e*16,r=e.toString(16).toLowerCase();uo[r]=t,uo[r.toUpperCase()]=t,lo[r]=n,lo[r.toUpperCase()]=n}function Yg(e){const t=e.length,n=new Uint8Array(t/2);for(let r=0;r<t;r+=2)n[r/2]=lo[e[r]]+uo[e[r+1]];return n}Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));for(let e=0;e<=256*256-1;e++)BigInt(e);const Vr=e=>{if(typeof e!="string")throw new Error(`hex argument type ${typeof e} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(e))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${e}`);const t=e.slice(2);return Yg(t.length%2===0?t:Kg(t))},Jg=e=>{if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`},zn=e=>{const t=Jg(e);return Vr(t)};BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");Lo.CURVE.n;Lo.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const Zg="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";Vr(Zg);const Xg="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";Vr(Xg);const Qg="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";Vr(Qg);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));var fa;(function(e){e.String="string",e.Bytes="view",e.Number="number"})(fa||(fa={}));var ca;(function(e){e.String="string",e.Bytes="view",e.JSON="json"})(ca||(ca={}));var da;(function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"})(da||(da={}));var ha;(function(e){e[e.Deposit=0]="Deposit",e[e.Withdrawal=1]="Withdrawal",e[e.Consolidation=2]="Consolidation"})(ha||(ha={}));var Jt;(function(e){e[e.Version=0]="Version",e[e.Balance=1]="Balance",e[e.Nonce=2]="Nonce",e[e.CodeHash=3]="CodeHash",e[e.CodeSize=4]="CodeSize"})(Jt||(Jt={}));zn(Jt.Version);zn(Jt.Balance);zn(Jt.Nonce);zn(Jt.CodeHash);zn(Jt.CodeSize);BigInt(256)**BigInt(31);var ep={exports:{}},Po={},Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});function tp(e){var t=4,n=e.length,r=n%t;if(!r)return e;var i=n,o=t-r,s=n+o,l=Qe.alloc(s);for(l.write(e);o--;)l.write("=",i++);return l.toString()}Mo.default=tp;Object.defineProperty(Po,"__esModule",{value:!0});var np=Mo;function Vl(e,t){return t===void 0&&(t="utf8"),Qe.isBuffer(e)?fo(e.toString("base64")):fo(Qe.from(e,t).toString("base64"))}function rp(e,t){return t===void 0&&(t="utf8"),Qe.from(Bo(e),"base64").toString(t)}function Bo(e){return e=e.toString(),np.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function fo(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ip(e){return Qe.from(Bo(e),"base64")}var _n=Vl;_n.encode=Vl;_n.decode=rp;_n.toBase64=Bo;_n.fromBase64=fo;_n.toBuffer=ip;Po.default=_n;(function(e){e.exports=Po.default,e.exports.default=e.exports})(ep);const ge={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},xt={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};ge.MAINNET+"",ge.TESTNET+"",ge.CYAN+"",ge.AQUA+"",ge.CELESTE+"";ge.AQUA+"",xt.SAPPHIRE_MAINNET,ge.CELESTE+"",xt.SAPPHIRE_MAINNET,ge.CYAN+"",xt.SAPPHIRE_MAINNET,ge.MAINNET+"",xt.SAPPHIRE_MAINNET,ge.TESTNET+"",xt.SAPPHIRE_DEVNET;ge.MAINNET+"",ge.TESTNET+"",ge.CYAN+"",ge.AQUA+"",ge.CELESTE+"";xt.SAPPHIRE_MAINNET+"",xt.SAPPHIRE_DEVNET+"",ge.MAINNET+"",ge.TESTNET+"",ge.CYAN+"",ge.AQUA+"",ge.CELESTE+"";ge.MAINNET+"",ge.TESTNET+"",ge.CYAN+"",ge.AQUA+"",ge.CELESTE+"";function ga(e){let t=!1,n=0,r;try{r=window[e],t=!0,n=r.length;const i="__storage_test__";return r.setItem(i,i),r.removeItem(i),!0}catch(i){const o=i;return o&&(o.code===22||o.code===1014||o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&n!==0}}class op{constructor(){ee(this,"store",new Map)}getItem(t){return this.store.get(t)||null}setItem(t,n){this.store.set(t,n)}removeItem(t){this.store.delete(t)}}class sp{constructor(t,n){ee(this,"storage",void 0),ee(this,"_storeKey",void 0),this.storage=n,this._storeKey=t;try{n.getItem(t)||this.resetStore()}catch{}}static getInstance(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(t)){let r;n==="local"&&ga("localStorage")?r=window.localStorage:n==="session"&&ga("sessionStorage")?r=window.sessionStorage:r=new op,this.instanceMap.set(t,new this(t,r))}return this.instanceMap.get(t)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const t=this.getStore();return this.storage.removeItem(this._storeKey),t}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(t){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[t]}set(t,n){const r=JSON.parse(this.storage.getItem(this._storeKey)||"{}");r[t]=n,this.storage.setItem(this._storeKey,JSON.stringify(r))}}ee(sp,"instanceMap",new Map);Ke(Ke({},xt),ge);var ap=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Di=Math.ceil,Ge=Math.floor,De="[BigNumber Error] ",pa=De+"Number primitive has more than 15 significant digits: ",Ze=1e14,oe=14,$i=9007199254740991,ki=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Tt=1e7,xe=1e9;function Kl(e){var t,n,r,i=I.prototype={constructor:I,toString:null,valueOf:null},o=new I(1),s=20,l=4,c=-7,u=21,S=-1e7,v=1e7,P=!1,B=1,k=0,_={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},T="0123456789abcdefghijklmnopqrstuvwxyz",O=!0;function I(a,d){var b,E,m,g,C,f,w,A,R=this;if(!(R instanceof I))return new I(a,d);if(d==null){if(a&&a._isBigNumber===!0){R.s=a.s,!a.c||a.e>v?R.c=R.e=null:a.e<S?R.c=[R.e=0]:(R.e=a.e,R.c=a.c.slice());return}if((f=typeof a=="number")&&a*0==0){if(R.s=1/a<0?(a=-a,-1):1,a===~~a){for(g=0,C=a;C>=10;C/=10,g++);g>v?R.c=R.e=null:(R.e=g,R.c=[a]);return}A=String(a)}else{if(!ap.test(A=String(a)))return r(R,A,f);R.s=A.charCodeAt(0)==45?(A=A.slice(1),-1):1}(g=A.indexOf("."))>-1&&(A=A.replace(".","")),(C=A.search(/e/i))>0?(g<0&&(g=C),g+=+A.slice(C+1),A=A.substring(0,C)):g<0&&(g=A.length)}else{if(ye(d,2,T.length,"Base"),d==10&&O)return R=new I(a),G(R,s+R.e+1,l);if(A=String(a),f=typeof a=="number"){if(a*0!=0)return r(R,A,f,d);if(R.s=1/a<0?(A=A.slice(1),-1):1,I.DEBUG&&A.replace(/^0\.0*|\./,"").length>15)throw Error(pa+a)}else R.s=A.charCodeAt(0)===45?(A=A.slice(1),-1):1;for(b=T.slice(0,d),g=C=0,w=A.length;C<w;C++)if(b.indexOf(E=A.charAt(C))<0){if(E=="."){if(C>g){g=w;continue}}else if(!m&&(A==A.toUpperCase()&&(A=A.toLowerCase())||A==A.toLowerCase()&&(A=A.toUpperCase()))){m=!0,C=-1,g=0;continue}return r(R,String(a),f,d)}f=!1,A=n(A,d,10,R.s),(g=A.indexOf("."))>-1?A=A.replace(".",""):g=A.length}for(C=0;A.charCodeAt(C)===48;C++);for(w=A.length;A.charCodeAt(--w)===48;);if(A=A.slice(C,++w)){if(w-=C,f&&I.DEBUG&&w>15&&(a>$i||a!==Ge(a)))throw Error(pa+R.s*a);if((g=g-C-1)>v)R.c=R.e=null;else if(g<S)R.c=[R.e=0];else{if(R.e=g,R.c=[],C=(g+1)%oe,g<0&&(C+=oe),C<w){for(C&&R.c.push(+A.slice(0,C)),w-=oe;C<w;)R.c.push(+A.slice(C,C+=oe));C=oe-(A=A.slice(C)).length}else C-=w;for(;C--;A+="0");R.c.push(+A)}}else R.c=[R.e=0]}I.clone=Kl,I.ROUND_UP=0,I.ROUND_DOWN=1,I.ROUND_CEIL=2,I.ROUND_FLOOR=3,I.ROUND_HALF_UP=4,I.ROUND_HALF_DOWN=5,I.ROUND_HALF_EVEN=6,I.ROUND_HALF_CEIL=7,I.ROUND_HALF_FLOOR=8,I.EUCLID=9,I.config=I.set=function(a){var d,b;if(a!=null)if(typeof a=="object"){if(a.hasOwnProperty(d="DECIMAL_PLACES")&&(b=a[d],ye(b,0,xe,d),s=b),a.hasOwnProperty(d="ROUNDING_MODE")&&(b=a[d],ye(b,0,8,d),l=b),a.hasOwnProperty(d="EXPONENTIAL_AT")&&(b=a[d],b&&b.pop?(ye(b[0],-xe,0,d),ye(b[1],0,xe,d),c=b[0],u=b[1]):(ye(b,-xe,xe,d),c=-(u=b<0?-b:b))),a.hasOwnProperty(d="RANGE"))if(b=a[d],b&&b.pop)ye(b[0],-xe,-1,d),ye(b[1],1,xe,d),S=b[0],v=b[1];else if(ye(b,-xe,xe,d),b)S=-(v=b<0?-b:b);else throw Error(De+d+" cannot be zero: "+b);if(a.hasOwnProperty(d="CRYPTO"))if(b=a[d],b===!!b)if(b)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))P=b;else throw P=!b,Error(De+"crypto unavailable");else P=b;else throw Error(De+d+" not true or false: "+b);if(a.hasOwnProperty(d="MODULO_MODE")&&(b=a[d],ye(b,0,9,d),B=b),a.hasOwnProperty(d="POW_PRECISION")&&(b=a[d],ye(b,0,xe,d),k=b),a.hasOwnProperty(d="FORMAT"))if(b=a[d],typeof b=="object")_=b;else throw Error(De+d+" not an object: "+b);if(a.hasOwnProperty(d="ALPHABET"))if(b=a[d],typeof b=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(b))O=b.slice(0,10)=="0123456789",T=b;else throw Error(De+d+" invalid: "+b)}else throw Error(De+"Object expected: "+a);return{DECIMAL_PLACES:s,ROUNDING_MODE:l,EXPONENTIAL_AT:[c,u],RANGE:[S,v],CRYPTO:P,MODULO_MODE:B,POW_PRECISION:k,FORMAT:_,ALPHABET:T}},I.isBigNumber=function(a){if(!a||a._isBigNumber!==!0)return!1;if(!I.DEBUG)return!0;var d,b,E=a.c,m=a.e,g=a.s;e:if({}.toString.call(E)=="[object Array]"){if((g===1||g===-1)&&m>=-xe&&m<=xe&&m===Ge(m)){if(E[0]===0){if(m===0&&E.length===1)return!0;break e}if(d=(m+1)%oe,d<1&&(d+=oe),String(E[0]).length==d){for(d=0;d<E.length;d++)if(b=E[d],b<0||b>=Ze||b!==Ge(b))break e;if(b!==0)return!0}}}else if(E===null&&m===null&&(g===null||g===1||g===-1))return!0;throw Error(De+"Invalid BigNumber: "+a)},I.maximum=I.max=function(){return H(arguments,-1)},I.minimum=I.min=function(){return H(arguments,1)},I.random=function(){var a=9007199254740992,d=Math.random()*a&2097151?function(){return Ge(Math.random()*a)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(b){var E,m,g,C,f,w=0,A=[],R=new I(o);if(b==null?b=s:ye(b,0,xe),C=Di(b/oe),P)if(crypto.getRandomValues){for(E=crypto.getRandomValues(new Uint32Array(C*=2));w<C;)f=E[w]*131072+(E[w+1]>>>11),f>=9e15?(m=crypto.getRandomValues(new Uint32Array(2)),E[w]=m[0],E[w+1]=m[1]):(A.push(f%1e14),w+=2);w=C/2}else if(crypto.randomBytes){for(E=crypto.randomBytes(C*=7);w<C;)f=(E[w]&31)*281474976710656+E[w+1]*1099511627776+E[w+2]*4294967296+E[w+3]*16777216+(E[w+4]<<16)+(E[w+5]<<8)+E[w+6],f>=9e15?crypto.randomBytes(7).copy(E,w):(A.push(f%1e14),w+=7);w=C/7}else throw P=!1,Error(De+"crypto unavailable");if(!P)for(;w<C;)f=d(),f<9e15&&(A[w++]=f%1e14);for(C=A[--w],b%=oe,C&&b&&(f=ki[oe-b],A[w]=Ge(C/f)*f);A[w]===0;A.pop(),w--);if(w<0)A=[g=0];else{for(g=-1;A[0]===0;A.splice(0,1),g-=oe);for(w=1,f=A[0];f>=10;f/=10,w++);w<oe&&(g-=oe-w)}return R.e=g,R.c=A,R}}(),I.sum=function(){for(var a=1,d=arguments,b=new I(d[0]);a<d.length;)b=b.plus(d[a++]);return b},n=function(){var a="0123456789";function d(b,E,m,g){for(var C,f=[0],w,A=0,R=b.length;A<R;){for(w=f.length;w--;f[w]*=E);for(f[0]+=g.indexOf(b.charAt(A++)),C=0;C<f.length;C++)f[C]>m-1&&(f[C+1]==null&&(f[C+1]=0),f[C+1]+=f[C]/m|0,f[C]%=m)}return f.reverse()}return function(b,E,m,g,C){var f,w,A,R,D,F,q,X,U=b.indexOf("."),ne=s,te=l;for(U>=0&&(R=k,k=0,b=b.replace(".",""),X=new I(E),F=X.pow(b.length-U),k=R,X.c=d(pt(qe(F.c),F.e,"0"),10,m,a),X.e=X.c.length),q=d(b,E,m,C?(f=T,a):(f=a,T)),A=R=q.length;q[--R]==0;q.pop());if(!q[0])return f.charAt(0);if(U<0?--A:(F.c=q,F.e=A,F.s=g,F=t(F,X,ne,te,m),q=F.c,D=F.r,A=F.e),w=A+ne+1,U=q[w],R=m/2,D=D||w<0||q[w+1]!=null,D=te<4?(U!=null||D)&&(te==0||te==(F.s<0?3:2)):U>R||U==R&&(te==4||D||te==6&&q[w-1]&1||te==(F.s<0?8:7)),w<1||!q[0])b=D?pt(f.charAt(1),-ne,f.charAt(0)):f.charAt(0);else{if(q.length=w,D)for(--m;++q[--w]>m;)q[w]=0,w||(++A,q=[1].concat(q));for(R=q.length;!q[--R];);for(U=0,b="";U<=R;b+=f.charAt(q[U++]));b=pt(b,A,f.charAt(0))}return b}}(),t=function(){function a(E,m,g){var C,f,w,A,R=0,D=E.length,F=m%Tt,q=m/Tt|0;for(E=E.slice();D--;)w=E[D]%Tt,A=E[D]/Tt|0,C=q*w+A*F,f=F*w+C%Tt*Tt+R,R=(f/g|0)+(C/Tt|0)+q*A,E[D]=f%g;return R&&(E=[R].concat(E)),E}function d(E,m,g,C){var f,w;if(g!=C)w=g>C?1:-1;else for(f=w=0;f<g;f++)if(E[f]!=m[f]){w=E[f]>m[f]?1:-1;break}return w}function b(E,m,g,C){for(var f=0;g--;)E[g]-=f,f=E[g]<m[g]?1:0,E[g]=f*C+E[g]-m[g];for(;!E[0]&&E.length>1;E.splice(0,1));}return function(E,m,g,C,f){var w,A,R,D,F,q,X,U,ne,te,ie,se,Se,Re,Ie,me,Ee,N=E.s==m.s?1:-1,L=E.c,j=m.c;if(!L||!L[0]||!j||!j[0])return new I(!E.s||!m.s||(L?j&&L[0]==j[0]:!j)?NaN:L&&L[0]==0||!j?N*0:N/0);for(U=new I(N),ne=U.c=[],A=E.e-m.e,N=g+A+1,f||(f=Ze,A=ze(E.e/oe)-ze(m.e/oe),N=N/oe|0),R=0;j[R]==(L[R]||0);R++);if(j[R]>(L[R]||0)&&A--,N<0)ne.push(1),D=!0;else{for(Re=L.length,me=j.length,R=0,N+=2,F=Ge(f/(j[0]+1)),F>1&&(j=a(j,F,f),L=a(L,F,f),me=j.length,Re=L.length),Se=me,te=L.slice(0,me),ie=te.length;ie<me;te[ie++]=0);Ee=j.slice(),Ee=[0].concat(Ee),Ie=j[0],j[1]>=f/2&&Ie++;do{if(F=0,w=d(j,te,me,ie),w<0){if(se=te[0],me!=ie&&(se=se*f+(te[1]||0)),F=Ge(se/Ie),F>1)for(F>=f&&(F=f-1),q=a(j,F,f),X=q.length,ie=te.length;d(q,te,X,ie)==1;)F--,b(q,me<X?Ee:j,X,f),X=q.length,w=1;else F==0&&(w=F=1),q=j.slice(),X=q.length;if(X<ie&&(q=[0].concat(q)),b(te,q,ie,f),ie=te.length,w==-1)for(;d(j,te,me,ie)<1;)F++,b(te,me<ie?Ee:j,ie,f),ie=te.length}else w===0&&(F++,te=[0]);ne[R++]=F,te[0]?te[ie++]=L[Se]||0:(te=[L[Se]],ie=1)}while((Se++<Re||te[0]!=null)&&N--);D=te[0]!=null,ne[0]||ne.splice(0,1)}if(f==Ze){for(R=1,N=ne[0];N>=10;N/=10,R++);G(U,g+(U.e=R+A*oe-1)+1,C,D)}else U.e=A,U.r=+D;return U}}();function M(a,d,b,E){var m,g,C,f,w;if(b==null?b=l:ye(b,0,8),!a.c)return a.toString();if(m=a.c[0],C=a.e,d==null)w=qe(a.c),w=E==1||E==2&&(C<=c||C>=u)?hr(w,C):pt(w,C,"0");else if(a=G(new I(a),d,b),g=a.e,w=qe(a.c),f=w.length,E==1||E==2&&(d<=g||g<=c)){for(;f<d;w+="0",f++);w=hr(w,g)}else if(d-=C+(E===2&&g>C),w=pt(w,g,"0"),g+1>f){if(--d>0)for(w+=".";d--;w+="0");}else if(d+=g-f,d>0)for(g+1==f&&(w+=".");d--;w+="0");return a.s<0&&m?"-"+w:w}function H(a,d){for(var b,E,m=1,g=new I(a[0]);m<a.length;m++)E=new I(a[m]),(!E.s||(b=jt(g,E))===d||b===0&&g.s===d)&&(g=E);return g}function W(a,d,b){for(var E=1,m=d.length;!d[--m];d.pop());for(m=d[0];m>=10;m/=10,E++);return(b=E+b*oe-1)>v?a.c=a.e=null:b<S?a.c=[a.e=0]:(a.e=b,a.c=d),a}r=function(){var a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,d=/^([^.]+)\.$/,b=/^\.([^.]+)$/,E=/^-?(Infinity|NaN)$/,m=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(g,C,f,w){var A,R=f?C:C.replace(m,"");if(E.test(R))g.s=isNaN(R)?null:R<0?-1:1;else{if(!f&&(R=R.replace(a,function(D,F,q){return A=(q=q.toLowerCase())=="x"?16:q=="b"?2:8,!w||w==A?F:D}),w&&(A=w,R=R.replace(d,"$1").replace(b,"0.$1")),C!=R))return new I(R,A);if(I.DEBUG)throw Error(De+"Not a"+(w?" base "+w:"")+" number: "+C);g.s=null}g.c=g.e=null}}();function G(a,d,b,E){var m,g,C,f,w,A,R,D=a.c,F=ki;if(D){e:{for(m=1,f=D[0];f>=10;f/=10,m++);if(g=d-m,g<0)g+=oe,C=d,w=D[A=0],R=Ge(w/F[m-C-1]%10);else if(A=Di((g+1)/oe),A>=D.length)if(E){for(;D.length<=A;D.push(0));w=R=0,m=1,g%=oe,C=g-oe+1}else break e;else{for(w=f=D[A],m=1;f>=10;f/=10,m++);g%=oe,C=g-oe+m,R=C<0?0:Ge(w/F[m-C-1]%10)}if(E=E||d<0||D[A+1]!=null||(C<0?w:w%F[m-C-1]),E=b<4?(R||E)&&(b==0||b==(a.s<0?3:2)):R>5||R==5&&(b==4||E||b==6&&(g>0?C>0?w/F[m-C]:0:D[A-1])%10&1||b==(a.s<0?8:7)),d<1||!D[0])return D.length=0,E?(d-=a.e+1,D[0]=F[(oe-d%oe)%oe],a.e=-d||0):D[0]=a.e=0,a;if(g==0?(D.length=A,f=1,A--):(D.length=A+1,f=F[oe-g],D[A]=C>0?Ge(w/F[m-C]%F[C])*f:0),E)for(;;)if(A==0){for(g=1,C=D[0];C>=10;C/=10,g++);for(C=D[0]+=f,f=1;C>=10;C/=10,f++);g!=f&&(a.e++,D[0]==Ze&&(D[0]=1));break}else{if(D[A]+=f,D[A]!=Ze)break;D[A--]=0,f=1}for(g=D.length;D[--g]===0;D.pop());}a.e>v?a.c=a.e=null:a.e<S&&(a.c=[a.e=0])}return a}function K(a){var d,b=a.e;return b===null?a.toString():(d=qe(a.c),d=b<=c||b>=u?hr(d,b):pt(d,b,"0"),a.s<0?"-"+d:d)}return i.absoluteValue=i.abs=function(){var a=new I(this);return a.s<0&&(a.s=1),a},i.comparedTo=function(a,d){return jt(this,new I(a,d))},i.decimalPlaces=i.dp=function(a,d){var b,E,m,g=this;if(a!=null)return ye(a,0,xe),d==null?d=l:ye(d,0,8),G(new I(g),a+g.e+1,d);if(!(b=g.c))return null;if(E=((m=b.length-1)-ze(this.e/oe))*oe,m=b[m])for(;m%10==0;m/=10,E--);return E<0&&(E=0),E},i.dividedBy=i.div=function(a,d){return t(this,new I(a,d),s,l)},i.dividedToIntegerBy=i.idiv=function(a,d){return t(this,new I(a,d),0,1)},i.exponentiatedBy=i.pow=function(a,d){var b,E,m,g,C,f,w,A,R,D=this;if(a=new I(a),a.c&&!a.isInteger())throw Error(De+"Exponent not an integer: "+K(a));if(d!=null&&(d=new I(d)),f=a.e>14,!D.c||!D.c[0]||D.c[0]==1&&!D.e&&D.c.length==1||!a.c||!a.c[0])return R=new I(Math.pow(+K(D),f?a.s*(2-dr(a)):+K(a))),d?R.mod(d):R;if(w=a.s<0,d){if(d.c?!d.c[0]:!d.s)return new I(NaN);E=!w&&D.isInteger()&&d.isInteger(),E&&(D=D.mod(d))}else{if(a.e>9&&(D.e>0||D.e<-1||(D.e==0?D.c[0]>1||f&&D.c[1]>=24e7:D.c[0]<8e13||f&&D.c[0]<=9999975e7)))return g=D.s<0&&dr(a)?-0:0,D.e>-1&&(g=1/g),new I(w?1/g:g);k&&(g=Di(k/oe+2))}for(f?(b=new I(.5),w&&(a.s=1),A=dr(a)):(m=Math.abs(+K(a)),A=m%2),R=new I(o);;){if(A){if(R=R.times(D),!R.c)break;g?R.c.length>g&&(R.c.length=g):E&&(R=R.mod(d))}if(m){if(m=Ge(m/2),m===0)break;A=m%2}else if(a=a.times(b),G(a,a.e+1,1),a.e>14)A=dr(a);else{if(m=+K(a),m===0)break;A=m%2}D=D.times(D),g?D.c&&D.c.length>g&&(D.c.length=g):E&&(D=D.mod(d))}return E?R:(w&&(R=o.div(R)),d?R.mod(d):g?G(R,k,l,C):R)},i.integerValue=function(a){var d=new I(this);return a==null?a=l:ye(a,0,8),G(d,d.e+1,a)},i.isEqualTo=i.eq=function(a,d){return jt(this,new I(a,d))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(a,d){return jt(this,new I(a,d))>0},i.isGreaterThanOrEqualTo=i.gte=function(a,d){return(d=jt(this,new I(a,d)))===1||d===0},i.isInteger=function(){return!!this.c&&ze(this.e/oe)>this.c.length-2},i.isLessThan=i.lt=function(a,d){return jt(this,new I(a,d))<0},i.isLessThanOrEqualTo=i.lte=function(a,d){return(d=jt(this,new I(a,d)))===-1||d===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(a,d){var b,E,m,g,C=this,f=C.s;if(a=new I(a,d),d=a.s,!f||!d)return new I(NaN);if(f!=d)return a.s=-d,C.plus(a);var w=C.e/oe,A=a.e/oe,R=C.c,D=a.c;if(!w||!A){if(!R||!D)return R?(a.s=-d,a):new I(D?C:NaN);if(!R[0]||!D[0])return D[0]?(a.s=-d,a):new I(R[0]?C:l==3?-0:0)}if(w=ze(w),A=ze(A),R=R.slice(),f=w-A){for((g=f<0)?(f=-f,m=R):(A=w,m=D),m.reverse(),d=f;d--;m.push(0));m.reverse()}else for(E=(g=(f=R.length)<(d=D.length))?f:d,f=d=0;d<E;d++)if(R[d]!=D[d]){g=R[d]<D[d];break}if(g&&(m=R,R=D,D=m,a.s=-a.s),d=(E=D.length)-(b=R.length),d>0)for(;d--;R[b++]=0);for(d=Ze-1;E>f;){if(R[--E]<D[E]){for(b=E;b&&!R[--b];R[b]=d);--R[b],R[E]+=Ze}R[E]-=D[E]}for(;R[0]==0;R.splice(0,1),--A);return R[0]?W(a,R,A):(a.s=l==3?-1:1,a.c=[a.e=0],a)},i.modulo=i.mod=function(a,d){var b,E,m=this;return a=new I(a,d),!m.c||!a.s||a.c&&!a.c[0]?new I(NaN):!a.c||m.c&&!m.c[0]?new I(m):(B==9?(E=a.s,a.s=1,b=t(m,a,0,3),a.s=E,b.s*=E):b=t(m,a,0,B),a=m.minus(b.times(a)),!a.c[0]&&B==1&&(a.s=m.s),a)},i.multipliedBy=i.times=function(a,d){var b,E,m,g,C,f,w,A,R,D,F,q,X,U,ne,te=this,ie=te.c,se=(a=new I(a,d)).c;if(!ie||!se||!ie[0]||!se[0])return!te.s||!a.s||ie&&!ie[0]&&!se||se&&!se[0]&&!ie?a.c=a.e=a.s=null:(a.s*=te.s,!ie||!se?a.c=a.e=null:(a.c=[0],a.e=0)),a;for(E=ze(te.e/oe)+ze(a.e/oe),a.s*=te.s,w=ie.length,D=se.length,w<D&&(X=ie,ie=se,se=X,m=w,w=D,D=m),m=w+D,X=[];m--;X.push(0));for(U=Ze,ne=Tt,m=D;--m>=0;){for(b=0,F=se[m]%ne,q=se[m]/ne|0,C=w,g=m+C;g>m;)A=ie[--C]%ne,R=ie[C]/ne|0,f=q*A+R*F,A=F*A+f%ne*ne+X[g]+b,b=(A/U|0)+(f/ne|0)+q*R,X[g--]=A%U;X[g]=b}return b?++E:X.splice(0,1),W(a,X,E)},i.negated=function(){var a=new I(this);return a.s=-a.s||null,a},i.plus=function(a,d){var b,E=this,m=E.s;if(a=new I(a,d),d=a.s,!m||!d)return new I(NaN);if(m!=d)return a.s=-d,E.minus(a);var g=E.e/oe,C=a.e/oe,f=E.c,w=a.c;if(!g||!C){if(!f||!w)return new I(m/0);if(!f[0]||!w[0])return w[0]?a:new I(f[0]?E:m*0)}if(g=ze(g),C=ze(C),f=f.slice(),m=g-C){for(m>0?(C=g,b=w):(m=-m,b=f),b.reverse();m--;b.push(0));b.reverse()}for(m=f.length,d=w.length,m-d<0&&(b=w,w=f,f=b,d=m),m=0;d;)m=(f[--d]=f[d]+w[d]+m)/Ze|0,f[d]=Ze===f[d]?0:f[d]%Ze;return m&&(f=[m].concat(f),++C),W(a,f,C)},i.precision=i.sd=function(a,d){var b,E,m,g=this;if(a!=null&&a!==!!a)return ye(a,1,xe),d==null?d=l:ye(d,0,8),G(new I(g),a,d);if(!(b=g.c))return null;if(m=b.length-1,E=m*oe+1,m=b[m]){for(;m%10==0;m/=10,E--);for(m=b[0];m>=10;m/=10,E++);}return a&&g.e+1>E&&(E=g.e+1),E},i.shiftedBy=function(a){return ye(a,-$i,$i),this.times("1e"+a)},i.squareRoot=i.sqrt=function(){var a,d,b,E,m,g=this,C=g.c,f=g.s,w=g.e,A=s+4,R=new I("0.5");if(f!==1||!C||!C[0])return new I(!f||f<0&&(!C||C[0])?NaN:C?g:1/0);if(f=Math.sqrt(+K(g)),f==0||f==1/0?(d=qe(C),(d.length+w)%2==0&&(d+="0"),f=Math.sqrt(+d),w=ze((w+1)/2)-(w<0||w%2),f==1/0?d="5e"+w:(d=f.toExponential(),d=d.slice(0,d.indexOf("e")+1)+w),b=new I(d)):b=new I(f+""),b.c[0]){for(w=b.e,f=w+A,f<3&&(f=0);;)if(m=b,b=R.times(m.plus(t(g,m,A,1))),qe(m.c).slice(0,f)===(d=qe(b.c)).slice(0,f))if(b.e<w&&--f,d=d.slice(f-3,f+1),d=="9999"||!E&&d=="4999"){if(!E&&(G(m,m.e+s+2,0),m.times(m).eq(g))){b=m;break}A+=4,f+=4,E=1}else{(!+d||!+d.slice(1)&&d.charAt(0)=="5")&&(G(b,b.e+s+2,1),a=!b.times(b).eq(g));break}}return G(b,b.e+s+1,l,a)},i.toExponential=function(a,d){return a!=null&&(ye(a,0,xe),a++),M(this,a,d,1)},i.toFixed=function(a,d){return a!=null&&(ye(a,0,xe),a=a+this.e+1),M(this,a,d)},i.toFormat=function(a,d,b){var E,m=this;if(b==null)a!=null&&d&&typeof d=="object"?(b=d,d=null):a&&typeof a=="object"?(b=a,a=d=null):b=_;else if(typeof b!="object")throw Error(De+"Argument not an object: "+b);if(E=m.toFixed(a,d),m.c){var g,C=E.split("."),f=+b.groupSize,w=+b.secondaryGroupSize,A=b.groupSeparator||"",R=C[0],D=C[1],F=m.s<0,q=F?R.slice(1):R,X=q.length;if(w&&(g=f,f=w,w=g,X-=g),f>0&&X>0){for(g=X%f||f,R=q.substr(0,g);g<X;g+=f)R+=A+q.substr(g,f);w>0&&(R+=A+q.slice(g)),F&&(R="-"+R)}E=D?R+(b.decimalSeparator||"")+((w=+b.fractionGroupSize)?D.replace(new RegExp("\\d{"+w+"}\\B","g"),"$&"+(b.fractionGroupSeparator||"")):D):R}return(b.prefix||"")+E+(b.suffix||"")},i.toFraction=function(a){var d,b,E,m,g,C,f,w,A,R,D,F,q=this,X=q.c;if(a!=null&&(f=new I(a),!f.isInteger()&&(f.c||f.s!==1)||f.lt(o)))throw Error(De+"Argument "+(f.isInteger()?"out of range: ":"not an integer: ")+K(f));if(!X)return new I(q);for(d=new I(o),A=b=new I(o),E=w=new I(o),F=qe(X),g=d.e=F.length-q.e-1,d.c[0]=ki[(C=g%oe)<0?oe+C:C],a=!a||f.comparedTo(d)>0?g>0?d:A:f,C=v,v=1/0,f=new I(F),w.c[0]=0;R=t(f,d,0,1),m=b.plus(R.times(E)),m.comparedTo(a)!=1;)b=E,E=m,A=w.plus(R.times(m=A)),w=m,d=f.minus(R.times(m=d)),f=m;return m=t(a.minus(b),E,0,1),w=w.plus(m.times(A)),b=b.plus(m.times(E)),w.s=A.s=q.s,g=g*2,D=t(A,E,g,l).minus(q).abs().comparedTo(t(w,b,g,l).minus(q).abs())<1?[A,E]:[w,b],v=C,D},i.toNumber=function(){return+K(this)},i.toPrecision=function(a,d){return a!=null&&ye(a,1,xe),M(this,a,d,2)},i.toString=function(a){var d,b=this,E=b.s,m=b.e;return m===null?E?(d="Infinity",E<0&&(d="-"+d)):d="NaN":(a==null?d=m<=c||m>=u?hr(qe(b.c),m):pt(qe(b.c),m,"0"):a===10&&O?(b=G(new I(b),s+m+1,l),d=pt(qe(b.c),b.e,"0")):(ye(a,2,T.length,"Base"),d=n(pt(qe(b.c),m,"0"),10,a,E,!0)),E<0&&b.c[0]&&(d="-"+d)),d},i.valueOf=i.toJSON=function(){return K(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,e!=null&&I.set(e),I}function ze(e){var t=e|0;return e>0||e===t?t:t-1}function qe(e){for(var t,n,r=1,i=e.length,o=e[0]+"";r<i;){for(t=e[r++]+"",n=oe-t.length;n--;t="0"+t);o+=t}for(i=o.length;o.charCodeAt(--i)===48;);return o.slice(0,i+1||1)}function jt(e,t){var n,r,i=e.c,o=t.c,s=e.s,l=t.s,c=e.e,u=t.e;if(!s||!l)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-l:s;if(s!=l)return s;if(n=s<0,r=c==u,!i||!o)return r?0:!i^n?1:-1;if(!r)return c>u^n?1:-1;for(l=(c=i.length)<(u=o.length)?c:u,s=0;s<l;s++)if(i[s]!=o[s])return i[s]>o[s]^n?1:-1;return c==u?0:c>u^n?1:-1}function ye(e,t,n,r){if(e<t||e>n||e!==Ge(e))throw Error(De+(r||"Argument")+(typeof e=="number"?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function dr(e){var t=e.c.length-1;return ze(e.e/oe)==t&&e.c[t]%2!=0}function hr(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function pt(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(r=e.length,++t>r){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}Kl();const gr={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},yt={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},lp={GET_PROVIDER_STATE:"wallet_get_provider_state"},ji={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function up(e){return function(n,r,i){i(o=>{r.error&&Or.warn(`Error in RPC response:
`,r),!n.isTorusInternal&&(Or.info(`RPC (${e.origin}):`,n,"->",r),o())})}}var mt={},Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.EthereumProviderError=Nt.EthereumRpcError=void 0;const fp=Sl;class Yl extends Error{constructor(t,n,r){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=t,r!==void 0&&(this.data=r)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return fp.default(this.serialize(),hp,2)}}Nt.EthereumRpcError=Yl;class cp extends Yl{constructor(t,n,r){if(!dp(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,n,r)}}Nt.EthereumProviderError=cp;function dp(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function hp(e,t){if(t!=="[Circular]")return t}var Do={},Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.errorValues=Ct.errorCodes=void 0;Ct.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};Ct.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=Ct,n=Nt,r=t.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",o={code:r,message:s(r)};e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function s(P,B=i){if(Number.isInteger(P)){const k=P.toString();if(v(t.errorValues,k))return t.errorValues[k].message;if(u(P))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return B}e.getMessageFromCode=s;function l(P){if(!Number.isInteger(P))return!1;const B=P.toString();return!!(t.errorValues[B]||u(P))}e.isValidCode=l;function c(P,{fallbackError:B=o,shouldIncludeStack:k=!1}={}){var _,T;if(!B||!Number.isInteger(B.code)||typeof B.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(P instanceof n.EthereumRpcError)return P.serialize();const O={};if(P&&typeof P=="object"&&!Array.isArray(P)&&v(P,"code")&&l(P.code)){const M=P;O.code=M.code,M.message&&typeof M.message=="string"?(O.message=M.message,v(M,"data")&&(O.data=M.data)):(O.message=s(O.code),O.data={originalError:S(P)})}else{O.code=B.code;const M=(_=P)===null||_===void 0?void 0:_.message;O.message=M&&typeof M=="string"?M:B.message,O.data={originalError:S(P)}}const I=(T=P)===null||T===void 0?void 0:T.stack;return k&&P&&I&&typeof I=="string"&&(O.stack=I),O}e.serializeError=c;function u(P){return P>=-32099&&P<=-32e3}function S(P){return P&&typeof P=="object"&&!Array.isArray(P)?Object.assign({},P):P}function v(P,B){return Object.prototype.hasOwnProperty.call(P,B)}})(Do);var Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.ethErrors=void 0;const $o=Nt,Jl=Do,Le=Ct;Kr.ethErrors={rpc:{parse:e=>He(Le.errorCodes.rpc.parse,e),invalidRequest:e=>He(Le.errorCodes.rpc.invalidRequest,e),invalidParams:e=>He(Le.errorCodes.rpc.invalidParams,e),methodNotFound:e=>He(Le.errorCodes.rpc.methodNotFound,e),internal:e=>He(Le.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return He(t,e)},invalidInput:e=>He(Le.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>He(Le.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>He(Le.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>He(Le.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>He(Le.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>He(Le.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>Nn(Le.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>Nn(Le.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>Nn(Le.errorCodes.provider.unsupportedMethod,e),disconnected:e=>Nn(Le.errorCodes.provider.disconnected,e),chainDisconnected:e=>Nn(Le.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:n,data:r}=e;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new $o.EthereumProviderError(t,n,r)}}};function He(e,t){const[n,r]=Zl(t);return new $o.EthereumRpcError(e,n||Jl.getMessageFromCode(e),r)}function Nn(e,t){const[n,r]=Zl(t);return new $o.EthereumProviderError(e,n||Jl.getMessageFromCode(e),r)}function Zl(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=Nt;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const n=Do;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});const r=Kr;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});const i=Ct;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(mt);var gp=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n};const pp=wn(gp);var wp="2.1.0";function Xl(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}function bp(e){return Xl(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object"}function yp(e){return Xl(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object"}function _p(e){return bp(e)&&yp(e)}var it={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:e=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:e=>`Invalid options. Received: { maxEventListeners: ${e}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`Torus: Connected to chain with ID "${e}".`},warnings:{}};const Up={MOONPAY:"moonpay",WYRE:"wyre",RAMPNETWORK:"rampnetwork",XANPOOL:"xanpool",MERCURYO:"mercuryo",TRANSAK:"transak"},mp={PRODUCTION:"production",DEVELOPMENT:"development",TESTING:"testing"},Ln={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},Ui={GOOGLE:"google",FACEBOOK:"facebook",REDDIT:"reddit",DISCORD:"discord",TWITCH:"twitch",APPLE:"apple",LINE:"line",GITHUB:"github",KAKAO:"kakao",LINKEDIN:"linkedin",TWITTER:"twitter",WEIBO:"weibo",WECHAT:"wechat",EMAIL_PASSWORDLESS:"email_passwordless"},Ep={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}};var ko={supportedVerifierList:[Ui.GOOGLE,Ui.REDDIT,Ui.DISCORD],api:"https://api.tor.us",translations:Ep,prodTorusUrl:"",localStorageKeyPrefix:"torus-"},he=Or.getLogger("solana-embed");function Sp(){return(e,t,n)=>{(typeof e.method!="string"||!e.method)&&(t.error=mt.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),n(r=>{const{error:i}=t;return i&&he.error(`Torus - RPC Error: ${i.message}`,i),r()})}}function vp(e,t,n){let r=`Torus: Lost connection to "${e}".`;t!=null&&t.stack&&(r+=`
${t.stack}`),he.warn(r),n&&n.listenerCount("error")>0&&n.emit("error",r)}const pr=()=>Math.random().toString(36).slice(2),Ql=async e=>{let t,n;switch(e){case"testing":t="https://solana-testing.tor.us",n="debug";break;case"development":t="http://localhost:8080",n="debug";break;default:t="https://solana.tor.us",n="error";break}return{torusUrl:t,logLevel:n}},Ap=()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(ko.translations,t[0])?t[0]:"en",e},Rp={height:660,width:375},Ip={height:740,width:1315},Tp={height:700,width:1200},eu={height:600,width:400};function Op(e){let t;try{t=window[e];const n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(n){const r=n;return r&&(r.code===22||r.code===1014||r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&t.length!==0}}function Mn(e){let{width:t,height:n}=e;const r=window.screenLeft!==void 0?window.screenLeft:window.screenX,i=window.screenTop!==void 0?window.screenTop:window.screenY,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,l=1,c=Math.abs((o-t)/2/l+r),u=Math.abs((s-n)/2/l+i);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${n/l},width=${t/l},top=${u},left=${c}`}class tu extends Hr{constructor(t,n){let{maxEventListeners:r=100,jsonRpcStreamName:i="provider"}=n;if(super(),ee(this,"isTorus",void 0),ee(this,"_rpcEngine",void 0),ee(this,"jsonRpcConnectionEvents",void 0),ee(this,"_state",void 0),!_p(t))throw new Error(it.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(r),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const o=new Qh;Hs(t,o,t,this._handleStreamDisconnect.bind(this,"Torus")),o.ignoreStream("phishing");const s=Jh();Hs(s.stream,o.createStream(i),s.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const l=new wt;l.push(Zh()),l.push(Sp()),l.push(up({origin:location.origin})),l.push(s.middleware),this._rpcEngine=l,this.jsonRpcConnectionEvents=s.events}async request(t){if(!t||typeof t!="object"||Array.isArray(t))throw mt.ethErrors.rpc.invalidRequest({message:it.errors.invalidRequestArgs(),data:t});const{method:n,params:r}=t;if(typeof n!="string"||n.length===0)throw mt.ethErrors.rpc.invalidRequest({message:it.errors.invalidRequestMethod(),data:t});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw mt.ethErrors.rpc.invalidRequest({message:it.errors.invalidRequestParams(),data:t});return new Promise((i,o)=>{this._rpcRequest({method:n,params:r},ro(i,o))})}send(t,n){this._rpcRequest(t,n)}sendAsync(t){return new Promise((n,r)=>{this._rpcRequest(t,ro(n,r))})}_handleStreamDisconnect(t,n){vp(t,n,this),this._handleDisconnect(!1,n?n.message:void 0)}}const cn=e=>{const t=window.document.createElement("template"),n=e.trim();return t.innerHTML=n,t.content.firstChild};function wr(e){return e.version===void 0}class nu extends Hr{constructor(t){let{url:n,target:r,features:i,timeout:o=3e4}=t;super(),ee(this,"url",void 0),ee(this,"target",void 0),ee(this,"features",void 0),ee(this,"window",void 0),ee(this,"windowTimer",void 0),ee(this,"iClosedWindow",void 0),ee(this,"timeout",void 0),this.url=n,this.target=r||"_blank",this.features=i||Mn(Tp),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=o,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var t;return this.window=window.open(this.url.href,this.target,this.features),(t=this.window)!=null&&t.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(t){t?window.location.replace(this.url.href):window.location.href=this.url.href}}class Yr extends tu{constructor(t,n){let{maxEventListeners:r=100,jsonRpcStreamName:i="provider"}=n;super(t,{maxEventListeners:r,jsonRpcStreamName:i}),ee(this,"embedTranslations",void 0),ee(this,"torusUrl",void 0),ee(this,"dappStorageKey",void 0),ee(this,"windowRefs",void 0),ee(this,"tryWindowHandle",void 0),ee(this,"torusAlertContainer",void 0),ee(this,"torusIframe",void 0),this._state=Ke({},Yr._defaultState),this.torusUrl="",this.dappStorageKey="";const o=ko.translations[Ap()];this.embedTranslations=o.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const s=l=>{const{method:c,params:u}=l;if(c===gr.IFRAME_STATUS){const{isFullScreen:S,rid:v}=u;this._displayIframe({isFull:S,rid:v})}else if(c==="create_window"){const{windowId:S,url:v}=u;this._createPopupBlockAlert(S,v)}else if(c===gr.CLOSE_WINDOW)this._handleCloseWindow(u);else if(c===gr.USER_LOGGED_IN){const{currentLoginProvider:S}=u;this._state.isLoggedIn=!0,this._state.currentLoginProvider=S}else c===gr.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",s)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(t){try{const{torusUrl:n,dappStorageKey:r,torusAlertContainer:i,torusIframe:o}=t;this.torusUrl=n,this.dappStorageKey=r,this.torusAlertContainer=i,this.torusIframe=o,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:s,isLoggedIn:l}=await this.request({method:yt.GET_PROVIDER_STATE,params:[]});this._handleConnect(s,l)}catch(n){he.error("Torus: Failed to get initial state. Please report this bug.",n)}finally{he.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(t){let{url:n,target:r,features:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=new URL(n||`${this.torusUrl}/redirect?windowId=${t}`);this.dappStorageKey&&(o.hash?o.hash+=`&dappStorageKey=${this.dappStorageKey}`:o.hash=`#dappStorageKey=${this.dappStorageKey}`);const s=new nu({url:o,target:r,features:i});if(s.open(),!s.window){this._createPopupBlockAlert(t,o.href);return}this.windowRefs[t]=s,this.request({method:"opened_window",params:{windowId:t}}),s.once("close",()=>{delete this.windowRefs[t],this.request({method:yt.CLOSED_WINDOW,params:{windowId:t}})})}_displayIframe(){let{isFull:t=!1,rid:n=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={};if(t)r.display="block",r.width="100%",r.height="100%",r.top="0px",r.right="0px",r.left="0px",r.bottom="0px";else switch(r.display=this._state.torusWidgetVisibility?"block":"none",r.height="70px",r.width="70px",this._state.buttonPosition){case Ln.TOP_LEFT:r.top="0px",r.left="0px",r.right="auto",r.bottom="auto";break;case Ln.TOP_RIGHT:r.top="0px",r.right="0px",r.left="auto",r.bottom="auto";break;case Ln.BOTTOM_RIGHT:r.bottom="0px",r.right="0px",r.top="auto",r.left="auto";break;case Ln.BOTTOM_LEFT:default:r.bottom="0px",r.left="0px",r.top="auto",r.right="auto";break}Object.assign(this.torusIframe.style,r),this._state.isIFrameFullScreen=t,this.request({method:yt.IFRAME_STATUS,params:{isIFrameFullScreen:t,rid:n}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(t,n){const r=n,i=t;Array.isArray(i)||i.jsonrpc||(i.jsonrpc="2.0"),this.tryWindowHandle(i,r)}_handleConnect(t,n){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:t,isLoggedIn:n}),he.debug(it.info.connected(t)))}_handleDisconnect(t,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let r;t?(r=new mt.EthereumRpcError(1013,n||it.errors.disconnected()),he.debug(r)):(r=new mt.EthereumRpcError(1011,n||it.errors.permanentlyDisconnected()),he.error(r),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleCloseWindow(t){const{windowId:n}=t;this.windowRefs[n]&&(this.windowRefs[n].close(),delete this.windowRefs[n])}async _createPopupBlockAlert(t,n){const r=this.getLogoUrl(),i=cn(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${r}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),o=cn(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),s=cn('<div id="torusAlert__btn-container"></div>');s.appendChild(o),i.appendChild(s);const l=()=>{o.addEventListener("click",()=>{this._handleWindow(t,{url:n,target:"_blank",features:Mn(eu)}),i.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};(()=>{this.torusAlertContainer.appendChild(i)})(),l(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}ee(Yr,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class Jr extends tu{constructor(t,n){let{maxEventListeners:r=100,jsonRpcStreamName:i="provider"}=n;super(t,{maxEventListeners:r,jsonRpcStreamName:i}),ee(this,"chainId",void 0),ee(this,"selectedAddress",void 0),ee(this,"tryWindowHandle",void 0),this._state=Ke({},Jr._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const o=s=>{const{method:l,params:c}=s;l===ji.ACCOUNTS_CHANGED?this._handleAccountsChanged(c):l===ji.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(c):l===ji.CHAIN_CHANGED&&this._handleChainChanged(c)};this.jsonRpcConnectionEvents.on("notification",o)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:t,chainId:n,isUnlocked:r}=await this.request({method:lp.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:n}),this._handleChainChanged({chainId:n}),this._handleUnlockStateChanged({accounts:t,isUnlocked:r}),this._handleAccountsChanged(t)}catch(t){he.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{he.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=n;const o=t;if(!Array.isArray(o)){if(o.jsonrpc||(o.jsonrpc="2.0"),o.method==="solana_accounts"||o.method==="solana_requestAccounts")i=(s,l)=>{this._handleAccountsChanged(l.result||[],o.method==="solana_accounts",r),n(s,l)};else if(o.method==="wallet_getProviderState"){this._rpcEngine.handle(t,i);return}}this.tryWindowHandle(o,i)}_handleConnect(t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:t}),he.debug(it.info.connected(t)))}_handleDisconnect(t,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let r;t?(r=new mt.EthereumRpcError(1013,n||it.errors.disconnected()),he.debug(r)):(r=new mt.EthereumRpcError(1011,n||it.errors.permanentlyDisconnected()),he.error(r),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleAccountsChanged(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=t;Array.isArray(i)||(he.error("Torus: Received non-array accounts parameter. Please report this bug.",i),i=[]);for(const o of t)if(typeof o!="string"){he.error("Torus: Received non-string account. Please report this bug.",t),i=[];break}pp(this._state.accounts,i)||(n&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!r&&he.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',i),this._state.accounts=i,this.emit("accountsChanged",i)),this.selectedAddress!==i[0]&&(this.selectedAddress=i[0]||null)}_handleChainChanged(){let{chainId:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!t){he.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:t});return}t==="loading"?this._handleDisconnect(!0):(this._handleConnect(t),t!==this.chainId&&(this.chainId=t,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:t,isUnlocked:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof n!="boolean"){he.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:n});return}n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(t||[]))}}ee(Jr,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function wa(e){return new Promise((t,n)=>{try{const r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(r){n(r)}})}const xp=e=>{const{document:t}=e,n=t.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=t.querySelector('head > meta[name="title"]');return r?r.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function Np(e){try{const{document:t}=e;let n=t.querySelector('head > link[rel="shortcut icon"]');return n&&await wa(n.href)||(n=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find(r=>!!r.href),n&&await wa(n.href))?n.href:""}catch{return""}}const Cp=async()=>({name:xp(window),icon:await Np(window)}),Lp=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],Pp=[yt.SET_PROVIDER],Mp=Op("localStorage");(async function(){try{if(typeof document>"u")return;const t=document.createElement("link"),{torusUrl:n}=await Ql("production");t.href=`${n}/frame`,t.crossOrigin="anonymous",t.type="text/html",t.rel="prefetch",t.relList&&t.relList.supports&&t.relList.supports("prefetch")&&document.head.appendChild(t)}catch(t){he.warn(t)}})();class Wp{constructor(){let{modalZIndex:t=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ee(this,"isInitialized",void 0),ee(this,"torusAlert",void 0),ee(this,"modalZIndex",void 0),ee(this,"alertZIndex",void 0),ee(this,"requestedLoginProvider",void 0),ee(this,"provider",void 0),ee(this,"communicationProvider",void 0),ee(this,"dappStorageKey",void 0),ee(this,"isTopupHidden",!1),ee(this,"torusAlertContainer",void 0),ee(this,"torusUrl",void 0),ee(this,"torusIframe",void 0),ee(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=t,this.alertZIndex=t+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:t=mp.PRODUCTION,enableLogging:n=!1,network:r,showTorusButton:i=!1,useLocalStorage:o=!1,buttonPosition:s=Ln.BOTTOM_LEFT,apiKey:l="torus-default",extraParams:c={},whiteLabel:u}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:S,logLevel:v}=await Ql(t);he.enableAll(),he.info(S,"url loaded"),he.info(`Solana Embed Version :${wp}`),this.torusUrl=S,he.setDefaultLevel(v),n?he.enableAll():he.disableAll();const P=this.handleDappStorageKey(o),B=new URL(S);B.pathname.endsWith("/")?B.pathname+="frame":B.pathname+="/frame";const k=new URLSearchParams;return P&&k.append("dappStorageKey",P),k.append("origin",window.location.origin),B.hash=k.toString(),this.torusIframe=cn(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${B.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=cn(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=cn(`<link href="${S}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((_,T)=>{try{this.torusIframe.addEventListener("load",async()=>{const O=await Cp();this.torusIframe.contentWindow.postMessage({buttonPosition:s,apiKey:l,network:r,dappMetadata:O,extraParams:c,whiteLabel:u},B.origin),await this._setupWeb3({torusUrl:S}),i&&this.showTorusButton(),u!=null&&u.topupHide?this.isTopupHidden=u.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,_()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(O){T(O)}})}async login(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=t.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const n=await new Promise((r,i)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,t.login_hint]},ro(r,i))});if(Array.isArray(n)&&n.length>0)return n;throw new Error("Login failed")}catch(n){throw he.error("login failed",n),n}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(t){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:n,userInfo:r}=t,{success:i}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:n,userInfo:r}});if(!i)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:yt.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function t(n){return n instanceof Element||n instanceof Document}t(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),t(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),t(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(t){await this.communicationProvider.request({method:yt.SET_PROVIDER,params:Ke({},t)})}async showWallet(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=await this.communicationProvider.request({method:yt.WALLET_INSTANCE_ID,params:[]}),i=t?`/${t}`:"",o=new URL(`${this.torusUrl}/wallet${i}`);o.searchParams.append("instanceId",r),Object.keys(n).forEach(l=>{o.searchParams.append(l,n[l])}),this.dappStorageKey&&(o.hash=`#dappStorageKey=${this.dappStorageKey}`),new nu({url:o,features:Mn(Ip)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:yt.USER_INFO,params:[]})}async initiateTopup(t,n){if(!this.isInitialized)throw new Error("Torus is not initialized");const r=pr();return this.communicationProvider._handleWindow(r),await this.communicationProvider.request({method:yt.TOPUP,params:{provider:t,params:n,windowId:r}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(t){const n=wr(t),r=n?t.serialize({requireAllSignatures:!1}).toString("hex"):Qe.from(t.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:r,isLegacyTransaction:n}})}async signAndSendTransaction(t,n){const r=wr(t),i=r?t.serialize({requireAllSignatures:!1}).toString("hex"):Qe.from(t.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:i,options:n,isLegacyTransaction:r}})}}async signTransaction(t){const n=wr(t),r=n?t.serializeMessage().toString("hex"):Qe.from(t.message.serialize()).toString("hex"),i=await this.provider.request({method:"sign_transaction",params:{message:r,messageOnly:!0,isLegacyTransaction:n}}),o=JSON.parse(i),s={publicKey:new Yo(o.publicKey),signature:Qe.from(o.signature,"hex")};return t.addSignature(s.publicKey,s.signature),t}async signAllTransactions(t){let n;const r=t.map(s=>(n=wr(s),n?s.serializeMessage().toString("hex"):Qe.from(s.message.serialize()).toString("hex"))),o=(await this.provider.request({method:"sign_all_transactions",params:{message:r,messageOnly:!0,isLegacyTransaction:n}})).map(s=>{const l=JSON.parse(s);return{publicKey:new Yo(l.publicKey),signature:Qe.from(l.signature,"hex")}});return t.forEach((s,l)=>(s.addSignature(o[l].publicKey,o[l].signature),s)),t}async signMessage(t){return await this.provider.request({method:"sign_message",params:{data:t}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(t){const n=`${ko.localStorageKeyPrefix}${window.location.hostname}`;let r="";if(Mp&&t){const i=window.localStorage.getItem(n);if(i)r=i;else{const o=`torus-app-${pr()}`;window.localStorage.setItem(n,o),r=o}}return this.dappStorageKey=r,r}async _setupWeb3(t){he.info("setupWeb3 running");const n=new Vs({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),r=new Vs({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),i=new Jr(n,{}),o=new Yr(r,{});i.tryWindowHandle=(u,S)=>{const v=u;if(!Array.isArray(v)&&Lp.includes(v.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const P=pr();o._handleWindow(P,{target:"_blank",features:Mn(eu)}),v.windowId=P}i._rpcEngine.handle(v,S)},o.tryWindowHandle=(u,S)=>{const v=u;if(!Array.isArray(v)&&Pp.includes(v.method)){const P=pr();o._handleWindow(P,{target:"_blank",features:Mn(Rp)}),v.params.windowId=P}o._rpcEngine.handle(v,S)};const s=u=>{const S=i[u],v=this;i[u]=function(B,k){const{method:_,params:T=[]}=B;if(_==="solana_requestAccounts"){if(!k)return v.login({loginProvider:T[0]});v.login({loginProvider:T[0]}).then(O=>k(null,O)).catch(O=>k(O))}return S.apply(this,[B,k])}};s("request"),s("sendAsync"),s("send");const l=new Proxy(i,{deleteProperty:()=>!0}),c=new Proxy(o,{deleteProperty:()=>!0});this.provider=l,this.communicationProvider=c,await Promise.all([i._initializeState(),o._initializeState(Ke(Ke({},t),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),he.debug("Torus - injected provider")}}export{Ln as BUTTON_POSITION,Ui as LOGIN_PROVIDER,Up as PAYMENT_PROVIDER,mp as TORUS_BUILD_ENV,Jr as TorusInPageProvider,Wp as default};
